//# sourceMappingURL=registrationView-mf.js.map
!function(){function a(b){return b&&(b.ownerDocument&&b.ownerDocument.defaultView||b.document&&b||b.defaultView)}function f(b,d){return d>b?-1:b>d?1:b>=d?0:NaN}function g(b){return null===b?NaN:+b}function h(b){return!isNaN(b)}function e(b){return{left:function(d,k,q,a){3>arguments.length&&(q=0);for(4>arguments.length&&(a=d.length);a>q;){var m=q+a>>>1;0>b(d[m],k)?q=m+1:a=m}return q},right:function(d,k,q,a){3>arguments.length&&(q=0);for(4>arguments.length&&(a=d.length);a>q;){var m=q+a>>>1;0<b(d[m],
k)?a=m:q=m+1}return q}}}function r(b){return b.length}function l(b,d){for(var k in d)Object.defineProperty(b.prototype,k,{value:d[k],enumerable:!1})}function t(){this._=Object.create(null)}function c(b){return(b+="")===Lg||b[0]===Bd?Bd+b:b}function n(b){return(b+="")[0]===Bd?b.slice(1):b}function I(b){return c(b)in this._}function x(b){return(b=c(b))in this._&&delete this._[b]}function F(){var b=[],d;for(d in this._)b.push(n(d));return b}function w(){var b=0,d;for(d in this._)++b;return b}function C(){for(var b in this._)return!1;
return!0}function B(){this._=Object.create(null)}function z(b){return b}function J(b,d,k){return function(){var q=k.apply(d,arguments);return q===d?b:q}}function p(b,d){if(d in b)return d;d=d.charAt(0).toUpperCase()+d.slice(1);for(var k=0,q=Ge.length;q>k;++k){var a=Ge[k]+d;if(a in b)return a}}function H(){}function G(){}function T(b){function d(){for(var d,q=k,a=-1,y=q.length;++a<y;)(d=q[a].on)&&d.apply(this,arguments);return b}var k=[],q=new t;return d.on=function(d,a){var D,y=q.get(d);return 2>
arguments.length?y&&y.on:(y&&(y.on=null,k=k.slice(0,D=k.indexOf(y)).concat(k.slice(D+1)),q.remove(d)),a&&k.push(q.set(d,{on:a})),b)},d}function K(){v.event.preventDefault()}function ba(){for(var b,d=v.event;b=d.sourceEvent;)d=b;return d}function V(b){for(var d=new G,k=0,q=arguments.length;++k<q;)d[arguments[k]]=T(d);return d.of=function(k,q){return function(a){try{var y=a.sourceEvent=v.event;a.target=b;v.event=a;d[a.type].apply(k,q)}finally{v.event=y}}},d}function ha(b){return Hc(b,va),b}function W(b){return"function"==
typeof b?b:function(){return Cd(b,this)}}function Q(b){return"function"==typeof b?b:function(){return Dd(b,this)}}function sa(b,d){function k(){this.removeAttribute(b)}function q(){this.removeAttributeNS(b.space,b.local)}function a(){this.setAttribute(b,d)}function m(){this.setAttributeNS(b.space,b.local,d)}function D(){var k=d.apply(this,arguments);null==k?this.removeAttribute(b):this.setAttribute(b,k)}function y(){var k=d.apply(this,arguments);null==k?this.removeAttributeNS(b.space,b.local):this.setAttributeNS(b.space,
b.local,k)}return b=v.ns.qualify(b),null==d?b.local?q:k:"function"==typeof d?b.local?y:D:b.local?m:a}function za(b){return new RegExp("(?:^|\\s+)"+v.requote(b)+"(?:\\s+|$)","g")}function oa(b,d){function k(){for(var k=-1;++k<a;)b[k](this,d)}function q(){for(var k=-1,q=d.apply(this,arguments);++k<a;)b[k](this,q)}b=(b+"").trim().split(/^|\s+/).map(pa);var a=b.length;return"function"==typeof d?q:k}function pa(b){var d=za(b);return function(k,q){if(a=k.classList)return q?a.add(b):a.remove(b);var a=k.getAttribute("class")||
"";q?(d.lastIndex=0,d.test(a)||k.setAttribute("class",(a+" "+b).trim().replace(/\s+/g," "))):k.setAttribute("class",a.replace(d," ").trim().replace(/\s+/g," "))}}function wa(b,d,k){function q(){this.style.removeProperty(b)}function a(){this.style.setProperty(b,d,k)}function m(){var q=d.apply(this,arguments);null==q?this.style.removeProperty(b):this.style.setProperty(b,q,k)}return null==d?q:"function"==typeof d?m:a}function Fa(b,d){function k(){delete this[b]}function q(){this[b]=d}function a(){var k=
d.apply(this,arguments);null==k?delete this[b]:this[b]=k}return null==d?k:"function"==typeof d?a:q}function ta(b){function d(){var d=this.ownerDocument,k=this.namespaceURI;return k===Ed&&d.documentElement.namespaceURI===Ed?d.createElement(b):d.createElementNS(k,b)}function k(){return this.ownerDocument.createElementNS(b.space,b.local)}return"function"==typeof b?b:(b=v.ns.qualify(b)).local?k:d}function ma(){var b=this.parentNode;b&&b.removeChild(this)}function ka(b){return function(){return Fd(this,
b)}}function Z(b){return arguments.length||(b=f),function(d,k){return d&&k?b(d.__data__,k.__data__):!d-!k}}function ja(b,d){for(var k=0,q=b.length;q>k;k++)for(var a,m=b[k],D=0,y=m.length;y>D;D++)(a=m[D])&&d(a,D,k);return b}function Ga(b){return Hc(b,yb),b}function la(b){var d,k;return function(q,a,m){q=b[m].update;var D=q.length;m!=k&&(k=m,d=0);for(a>=d&&(d=a+1);!(a=q[d])&&++d<D;);return a}}function qa(b,d,k){function q(){var d=this[D];d&&(this.removeEventListener(b,d,d.$),delete this[D])}function a(){var m=
N(d,sb(arguments));q.call(this);this.addEventListener(b,this[D]=m,m.$=k);m._=d}function m(){var d,k=new RegExp("^__on([^.]+)"+v.requote(b)+"$"),q;for(q in this)if(d=q.match(k)){var a=this[q];this.removeEventListener(d[1],a,a.$);delete this[q]}}var D="__on"+b,y=b.indexOf("."),N=Y;0<y&&(b=b.slice(0,y));var fa=Gd.get(b);return fa&&(b=fa,N=E),y?d?a:q:d?H:m}function Y(b,d){return function(k){var q=v.event;v.event=k;d[0]=this.__data__;try{b.apply(this,d)}finally{v.event=q}}}function E(b,d){var k=Y(b,d);
return function(b){var d=b.relatedTarget;d&&(d===this||8&d.compareDocumentPosition(this))||k.call(this,b)}}function U(b){var d=".dragsuppress-"+ ++Mg,k="click"+d,q=v.select(a(b)).on("touchmove"+d,K).on("dragstart"+d,K).on("selectstart"+d,K);if(null==Qb&&(Qb="onselectstart"in b?!1:p(b.style,"userSelect")),Qb){var u=(b&&(b.ownerDocument||b.document||b).documentElement).style,m=u[Qb];u[Qb]="none"}return function(b){if(q.on(d,null),Qb&&(u[Qb]=m),b){var a=function(){q.on(k,null)};q.on(k,function(){K();
a()},!0);setTimeout(a,0)}}}function Ea(b,d){d.changedTouches&&(d=d.changedTouches[0]);var k=b.ownerSVGElement||b;if(k.createSVGPoint){var q=k.createSVGPoint();if(0>Hd&&(k=a(b),k.scrollX||k.scrollY)){var k=v.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"),u=k[0][0].getScreenCTM();Hd=!(u.f||u.e);k.remove()}return Hd?(q.x=d.pageX,q.y=d.pageY):(q.x=d.clientX,q.y=d.clientY),q=q.matrixTransform(b.getScreenCTM().inverse()),[q.x,q.y]}q=b.getBoundingClientRect();
return[d.clientX-q.left-b.clientLeft,d.clientY-q.top-b.clientTop]}function Wa(){return v.event.changedTouches[0].identifier}function $a(b,d,k){return(d[0]-b[0])*(k[1]-b[1])-(d[1]-b[1])*(k[0]-b[0])}function Na(b){return 1<b?0:-1>b?ca:Math.acos(b)}function S(b){return 1<b?Ka:-1>b?-Ka:Math.asin(b)}function Aa(b){return((b=Math.exp(b))+1/b)/2}function Ba(b){return(b=Math.sin(b/2))*b}function Ca(){}function ia(b,d,k){return this instanceof ia?(this.h=+b,this.s=+d,void(this.l=+k)):2>arguments.length?b instanceof
ia?new ia(b.h,b.s,b.l):Ta(""+b,Ie,ia):new ia(b,d,k)}function La(b,d,k){function q(b){return 360<b?b-=360:0>b&&(b+=360),60>b?a+(m-a)*b/60:180>b?m:240>b?a+(m-a)*(240-b)/60:a}var a,m;return b=isNaN(b)?0:0>(b%=360)?b+360:b,d=isNaN(d)?0:0>d?0:1<d?1:d,k=0>k?0:1<k?1:k,m=.5>=k?k*(1+d):k+d-k*d,a=2*k-m,new Oa(Math.round(255*q(b+120)),Math.round(255*q(b)),Math.round(255*q(b-120)))}function Qa(b,d,k){return this instanceof Qa?(this.h=+b,this.c=+d,void(this.l=+k)):2>arguments.length?b instanceof Qa?new Qa(b.h,
b.c,b.l):b instanceof Ra?M(b.l,b.a,b.b):M((b=Je((b=v.rgb(b)).r,b.g,b.b)).l,b.a,b.b):new Qa(b,d,k)}function mb(b,d,k){return isNaN(b)&&(b=0),isNaN(d)&&(d=0),new Ra(k,Math.cos(b*=da)*d,Math.sin(b)*d)}function Ra(b,d,k){return this instanceof Ra?(this.l=+b,this.a=+d,void(this.b=+k)):2>arguments.length?b instanceof Ra?new Ra(b.l,b.a,b.b):b instanceof Qa?mb(b.h,b.c,b.l):Je((b=Oa(b)).r,b.g,b.b):new Ra(b,d,k)}function A(b,d,k){b=(b+16)/116;d=b+d/500;k=b-k/200;return d=L(d)*Ke,b=L(b)*Le,k=L(k)*Me,new Oa(ra(3.2404542*
d-1.5371385*b-.4985314*k),ra(-.969266*d+1.8760108*b+.041556*k),ra(.0556434*d-.2040259*b+1.0572252*k))}function M(b,d,k){return 0<b?new Qa(Math.atan2(k,d)*Ha,Math.sqrt(d*d+k*k),b):new Qa(NaN,NaN,b)}function L(b){return.206893034<b?b*b*b:(b-4/29)/7.787037}function O(b){return.008856<b?Math.pow(b,1/3):7.787037*b+4/29}function ra(b){return Math.round(255*(.00304>=b?12.92*b:1.055*Math.pow(b,1/2.4)-.055))}function Oa(b,d,k){return this instanceof Oa?(this.r=~~b,this.g=~~d,void(this.b=~~k)):2>arguments.length?
b instanceof Oa?new Oa(b.r,b.g,b.b):Ta(""+b,Oa,La):new Oa(b,d,k)}function Ic(b){return new Oa(b>>16,b>>8&255,255&b)+""}function bc(b){return 16>b?"0"+Math.max(0,b).toString(16):Math.min(255,b).toString(16)}function Ta(b,d,k){var q,a,m,D=0,y=0,N=0;if(q=/([a-z]+)\((.*)\)/.exec(b=b.toLowerCase()))switch(a=q[2].split(","),q[1]){case "hsl":return k(parseFloat(a[0]),parseFloat(a[1])/100,parseFloat(a[2])/100);case "rgb":return d(Id(a[0]),Id(a[1]),Id(a[2]))}return(m=Jc.get(b))?d(m.r,m.g,m.b):(null==b||"#"!==
b.charAt(0)||isNaN(m=parseInt(b.slice(1),16))||(4===b.length?(D=(3840&m)>>4,D|=D>>4,y=240&m,y|=y>>4,N=15&m,N|=N<<4):7===b.length&&(D=(16711680&m)>>16,y=(65280&m)>>8,N=255&m)),d(D,y,N))}function Ie(b,d,k){var q,a,m=Math.min(b/=255,d/=255,k/=255),D=Math.max(b,d,k),y=D-m,N=(D+m)/2;return y?(a=.5>N?y/(D+m):y/(2-D-m),q=b==D?(d-k)/y+(k>d?6:0):d==D?(k-b)/y+2:(b-d)/y+4,q*=60):(q=NaN,a=0<N&&1>N?0:q),new ia(q,a,N)}function Je(b,d,k){b=Ia(b);d=Ia(d);k=Ia(k);var q=O((.4124564*b+.3575761*d+.1804375*k)/Ke),a=O((.2126729*
b+.7151522*d+.072175*k)/Le);b=O((.0193339*b+.119192*d+.9503041*k)/Me);return Ra(116*a-16,500*(q-a),200*(a-b))}function Ia(b){return.04045>=(b/=255)?b/12.92:Math.pow((b+.055)/1.055,2.4)}function Id(b){var d=parseFloat(b);return"%"===b.charAt(b.length-1)?Math.round(2.55*d):d}function ya(b){return"function"==typeof b?b:function(){return b}}function Jd(b){return function(d,k,q){return 2===arguments.length&&"function"==typeof k&&(q=k,k=null),Kc(d,k,b,q)}}function Kc(b,d,k,q){function a(){var b,d=N.status,
q;if(q=!d)q=(q=N.responseType)&&"text"!==q?N.response:N.responseText;if(q||200<=d&&300>d||304===d){try{b=k.call(m,N)}catch(u){return void D.error.call(m,u)}D.load.call(m,b)}else D.error.call(m,N)}var m={},D=v.dispatch("beforesend","progress","load","error"),y={},N=new XMLHttpRequest,fa=null;return!this.XDomainRequest||"withCredentials"in N||!/^(http(s)?:)?\/\//.test(b)||(N=new XDomainRequest),"onload"in N?N.onload=N.onerror=a:N.onreadystatechange=function(){3<N.readyState&&a()},N.onprogress=function(b){var d=
v.event;v.event=b;try{D.progress.call(m,N)}finally{v.event=d}},m.header=function(b,d){return b=(b+"").toLowerCase(),2>arguments.length?y[b]:(null==d?delete y[b]:y[b]=d+"",m)},m.mimeType=function(b){return arguments.length?(d=null==b?null:b+"",m):d},m.responseType=function(b){return arguments.length?(fa=b,m):fa},m.response=function(b){return k=b,m},["get","post"].forEach(function(b){m[b]=function(){return m.send.apply(m,[b].concat(sb(arguments)))}}),m.send=function(k,q,a){if(2===arguments.length&&
"function"==typeof q&&(a=q,q=null),N.open(k,b,!0),null==d||"accept"in y||(y.accept=d+",*/*"),N.setRequestHeader)for(var u in y)N.setRequestHeader(u,y[u]);return null!=d&&N.overrideMimeType&&N.overrideMimeType(d),null!=fa&&(N.responseType=fa),null!=a&&m.on("error",a).on("load",function(b){a(null,b)}),D.beforesend.call(m,N),N.send(null==q?null:q),m},m.abort=function(){return N.abort(),m},v.rebind(m,D,"on"),null==q?m:m.get(aa(q))}function aa(b){return 1===b.length?function(d,k){b(null==d?k:null)}:b}
function Lc(b,d,k){var q=arguments.length;2>q&&(d=0);3>q&&(k=Date.now());q={c:b,t:k+d,n:null};return Mc?Mc.n=q:Nc=q,Mc=q,Oc||(Pc=clearTimeout(Pc),Oc=1,Ne(Kd)),q}function Kd(){var b=Oe(),b=Rb()-b;24<b?(isFinite(b)&&(clearTimeout(Pc),Pc=setTimeout(Kd,b)),Oc=0):(Oc=1,Ne(Kd))}function Oe(){for(var b=Date.now(),d=Nc;d;)b>=d.t&&d.c(b-d.t)&&(d.c=null),d=d.n;return b}function Rb(){for(var b,d=Nc,k=1/0;d;)d.c?(d.t<k&&(k=d.t),d=(b=d).n):d=b?b.n=d.n:Nc=d.n;return Mc=b,k}function Xa(b,d){return d-(b?Math.ceil(Math.log(b)/
Math.LN10):1)}function X(b){var d=b.decimal,k=b.thousands,q=b.grouping,a=b.currency,m=q&&k?function(b,d){for(var a=b.length,m=[],u=0,c=q[0],e=0;0<a&&0<c&&(e+c+1>d&&(c=Math.max(1,d-e)),m.push(b.substring(a-=c,a+c)),!((e+=c+1)>d));)c=q[u=(u+1)%q.length];return m.reverse().join(k)}:z;return function(b){b=Pe.exec(b);var k=b[1]||" ",q=b[2]||">",fa=b[3]||"-",c=b[4]||"",e=b[5],f=+b[6],l=b[7],h=b[8],g=b[9],n=1,r="",p="",A=!1,t=!0;switch(h&&(h=+h.substring(1)),(e||"0"===k&&"="===q)&&(e=k="0",q="="),g){case "n":l=
!0;g="g";break;case "%":n=100;p="%";g="f";break;case "p":n=100;p="%";g="r";break;case "b":case "o":case "x":case "X":"#"===c&&(r="0"+g.toLowerCase());case "c":t=!1;case "d":A=!0;h=0;break;case "s":n=-1,g="r"}"$"===c&&(r=a[0],p=a[1]);"r"!=g||h||(g="g");null!=h&&("g"==g?h=Math.max(1,Math.min(21,h)):"e"!=g&&"f"!=g||(h=Math.max(0,Math.min(20,h))));var g=Ng.get(g)||cc,z=e&&l;return function(b){var a=p;if(A&&b%1)return"";var u=0>b||0===b&&0>1/b?(b=-b,"-"):"-"===fa?"":fa;0>n?(a=v.formatPrefix(b,h),b=a.scale(b),
a=a.symbol+p):b*=n;b=g(b,h);var D,c,Pa=b.lastIndexOf(".");0>Pa?(Pa=t?b.lastIndexOf("e"):-1,0>Pa?(D=b,c=""):(D=b.substring(0,Pa),c=b.substring(Pa))):(D=b.substring(0,Pa),c=d+b.substring(Pa+1));!e&&l&&(D=m(D,1/0));var Pa=r.length+D.length+c.length+(z?0:u.length),w=f>Pa?Array(Pa=f-Pa+1).join(k):"";return z&&(D=m(w+D,w.length?f-c.length:1/0)),u+=r,b=D+c,("<"===q?u+b+w:">"===q?w+u+b:"^"===q?w.substring(0,Pa>>=1)+u+b+w.substring(Pa):u+(z?b:w+b))+a}}}function cc(b){return b+""}function zb(){this._=new Date(1<
arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function Sb(b,d,k){function q(d){var k=b(d),q=m(k,1);return q-d>d-k?k:q}function a(k){return d(k=b(new Ya(k-1)),1),k}function m(b,k){return d(b=new Ya(+b),k),b}function D(b,q,m){b=a(b);var y=[];if(1<m)for(;q>b;)k(b)%m||y.push(new Date(+b)),d(b,1);else for(;q>b;)y.push(new Date(+b)),d(b,1);return y}b.floor=b;b.round=q;b.ceil=a;b.offset=m;b.range=D;var y=b.utc=Qc(b);return y.floor=y,y.round=Qc(q),y.ceil=Qc(a),y.offset=Qc(m),y.range=function(b,
d,k){try{Ya=zb;var q=new zb;return q._=b,D(q,d,k)}finally{Ya=Date}},b}function Qc(b){return function(d,k){try{Ya=zb;var q=new zb;return q._=d,b(q,k)._}finally{Ya=Date}}}function Og(b){function d(b){function d(k){for(var a,m,u,y=[],N=-1,D=0;++N<q;)37===b.charCodeAt(N)&&(y.push(b.slice(D,N)),null!=(m=Qe[a=b.charAt(++N)])&&(a=b.charAt(++N)),(u=t[a])&&(a=u(k,null==m?"e"===a?" ":"0":m)),y.push(a),D=N+1);return y.push(b.slice(D,N)),y.join("")}var q=b.length;return d.parse=function(d){var q={y:1900,m:0,
d:1,H:0,M:0,S:0,L:0,Z:null};if(k(q,b,d,0)!=d.length)return null;"p"in q&&(q.H=q.H%12+12*q.p);d=null!=q.Z&&Ya!==zb;var a=new (d?zb:Ya);return"j"in q?a.setFullYear(q.y,0,q.j):"W"in q||"U"in q?("w"in q||(q.w="W"in q?1:0),a.setFullYear(q.y,0,1),a.setFullYear(q.y,0,"W"in q?(q.w+6)%7+7*q.W-(a.getDay()+5)%7:q.w+7*q.U-(a.getDay()+6)%7)):a.setFullYear(q.y,q.m,q.d),a.setHours(q.H+(q.Z/100|0),q.M+q.Z%100,q.S,q.L),d?a._:a},d.toString=function(){return b},d}function k(b,d,k,q){for(var a,m,u,y=0,N=d.length,D=k.length;N>
y;){if(q>=D)return-1;if(a=d.charCodeAt(y++),37===a){if(u=d.charAt(y++),m=z[u in Qe?d.charAt(y++):u],!m||0>(q=m(b,k,q)))return-1}else if(a!=k.charCodeAt(q++))return-1}return q}var q=b.dateTime,a=b.date,m=b.time,D=b.periods,y=b.days,N=b.shortDays,fa=b.months,c=b.shortMonths;d.utc=function(b){function k(b){try{Ya=zb;var d=new Ya;return d._=b,q(d)}finally{Ya=Date}}var q=d(b);return k.parse=function(b){try{Ya=zb;var d=q.parse(b);return d&&d._}finally{Ya=Date}},k.toString=q.toString,k};d.multi=d.utc.multi=
Rc;var e=v.map(),f=Da(y),l=ga(y),h=Da(N),g=ga(N),n=Da(fa),r=ga(fa),p=Da(c),A=ga(c);D.forEach(function(b,d){e.set(b.toLowerCase(),d)});var t={a:function(b){return N[b.getDay()]},A:function(b){return y[b.getDay()]},b:function(b){return c[b.getMonth()]},B:function(b){return fa[b.getMonth()]},c:d(q),d:function(b,d){return xa(b.getDate(),d,2)},e:function(b,d){return xa(b.getDate(),d,2)},H:function(b,d){return xa(b.getHours(),d,2)},I:function(b,d){return xa(b.getHours()%12||12,d,2)},j:function(b,d){return xa(1+
R.dayOfYear(b),d,3)},L:function(b,d){return xa(b.getMilliseconds(),d,3)},m:function(b,d){return xa(b.getMonth()+1,d,2)},M:function(b,d){return xa(b.getMinutes(),d,2)},p:function(b){return D[+(12<=b.getHours())]},S:function(b,d){return xa(b.getSeconds(),d,2)},U:function(b,d){return xa(R.sundayOfYear(b),d,2)},w:function(b){return b.getDay()},W:function(b,d){return xa(R.mondayOfYear(b),d,2)},x:d(a),X:d(m),y:function(b,d){return xa(b.getFullYear()%100,d,2)},Y:function(b,d){return xa(b.getFullYear()%1E4,
d,4)},Z:Tb,"%":function(){return"%"}},z={a:function(b,d,k){h.lastIndex=0;return(d=h.exec(d.slice(k)))?(b.w=g.get(d[0].toLowerCase()),k+d[0].length):-1},A:function(b,d,k){f.lastIndex=0;return(d=f.exec(d.slice(k)))?(b.w=l.get(d[0].toLowerCase()),k+d[0].length):-1},b:function(b,d,k){p.lastIndex=0;return(d=p.exec(d.slice(k)))?(b.m=A.get(d[0].toLowerCase()),k+d[0].length):-1},B:function(b,d,k){n.lastIndex=0;return(d=n.exec(d.slice(k)))?(b.m=r.get(d[0].toLowerCase()),k+d[0].length):-1},c:function(b,d,q){return k(b,
t.c.toString(),d,q)},d:Ua,e:Ua,H:bb,I:bb,j:Pg,L:cb,m:Qg,M:Ab,p:function(b,d,k){d=e.get(d.slice(k,k+=2).toLowerCase());return null==d?-1:(b.p=d,k)},S:Va,U:eb,w:na,W:Ja,x:function(b,d,q){return k(b,t.x.toString(),d,q)},X:function(b,d,q){return k(b,t.X.toString(),d,q)},y:Rg,Y:Za,Z:Sg,"%":Bb};return d}function xa(b,d,k){var q=0>b?"-":"";b=(q?-b:b)+"";var a=b.length;return q+(k>a?Array(k-a+1).join(d)+b:b)}function Da(b){return new RegExp("^(?:"+b.map(v.requote).join("|")+")","i")}function ga(b){for(var d=
new t,k=-1,q=b.length;++k<q;)d.set(b[k].toLowerCase(),k);return d}function na(b,d,k){Ma.lastIndex=0;return(d=Ma.exec(d.slice(k,k+1)))?(b.w=+d[0],k+d[0].length):-1}function eb(b,d,k){Ma.lastIndex=0;return(d=Ma.exec(d.slice(k)))?(b.U=+d[0],k+d[0].length):-1}function Ja(b,d,k){Ma.lastIndex=0;return(d=Ma.exec(d.slice(k)))?(b.W=+d[0],k+d[0].length):-1}function Za(b,d,k){Ma.lastIndex=0;return(d=Ma.exec(d.slice(k,k+4)))?(b.y=+d[0],k+d[0].length):-1}function Rg(b,d,k){Ma.lastIndex=0;if(d=Ma.exec(d.slice(k,
k+2))){var q=+d[0];b=(b.y=q+(68<q?1900:2E3),k+d[0].length)}else b=-1;return b}function Sg(b,d,k){return/^[+-]\d{4}$/.test(d=d.slice(k,k+5))?(b.Z=-d,k+5):-1}function Qg(b,d,k){Ma.lastIndex=0;return(d=Ma.exec(d.slice(k,k+2)))?(b.m=d[0]-1,k+d[0].length):-1}function Ua(b,d,k){Ma.lastIndex=0;return(d=Ma.exec(d.slice(k,k+2)))?(b.d=+d[0],k+d[0].length):-1}function Pg(b,d,k){Ma.lastIndex=0;return(d=Ma.exec(d.slice(k,k+3)))?(b.j=+d[0],k+d[0].length):-1}function bb(b,d,k){Ma.lastIndex=0;return(d=Ma.exec(d.slice(k,
k+2)))?(b.H=+d[0],k+d[0].length):-1}function Ab(b,d,k){Ma.lastIndex=0;return(d=Ma.exec(d.slice(k,k+2)))?(b.M=+d[0],k+d[0].length):-1}function Va(b,d,k){Ma.lastIndex=0;return(d=Ma.exec(d.slice(k,k+2)))?(b.S=+d[0],k+d[0].length):-1}function cb(b,d,k){Ma.lastIndex=0;return(d=Ma.exec(d.slice(k,k+3)))?(b.L=+d[0],k+d[0].length):-1}function Tb(b){var d=b.getTimezoneOffset();b=0<d?"-":"+";var k=ea(d)/60|0,d=ea(d)%60;return b+xa(k,"0",2)+xa(d,"0",2)}function Bb(b,d,k){Re.lastIndex=0;return(b=Re.exec(d.slice(k,
k+1)))?k+b[0].length:-1}function Rc(b){for(var d=b.length,k=-1;++k<d;)b[k][0]=this(b[k][0]);return function(d){for(var k=0,a=b[k];!a[1](d);)a=b[++k];return a[0](d)}}function db(){}function nc(b,d,k){var q=k.s=b+d,a=q-b;k.t=b-(q-a)+(d-a)}function nb(b,d){b&&Se.hasOwnProperty(b.type)&&Se[b.type](b,d)}function Fb(b,d,k){var q=-1,a=b.length-k;for(d.lineStart();++q<a;)k=b[q],d.point(k[0],k[1],k[2]);d.lineEnd()}function oc(b,d){var k=-1,q=b.length;for(d.polygonStart();++k<q;)Fb(b[k],d,1);d.polygonEnd()}
function pc(){function b(b,d){b*=da;d=d*da/2+ca/4;var k=b-q,fa=0<=k?1:-1,k=fa*k,c=Math.cos(d);d=Math.sin(d);var e=m*d;Ub.add(Math.atan2(e*fa*Math.sin(k),a*c+e*Math.cos(k)));q=b;a=c;m=d}var d,k,q,a,m;gb.point=function(D,y){gb.point=b;q=(d=D)*da;a=Math.cos(y=(k=y)*da/2+ca/4);m=Math.sin(y)};gb.lineEnd=function(){b(d,k)}}function fb(b){var d=b[0];b=b[1];var k=Math.cos(b);return[k*Math.cos(d),k*Math.sin(d),Math.sin(b)]}function Gb(b,d){return b[0]*d[0]+b[1]*d[1]+b[2]*d[2]}function ob(b,d){return[b[1]*
d[2]-b[2]*d[1],b[2]*d[0]-b[0]*d[2],b[0]*d[1]-b[1]*d[0]]}function jb(b,d){b[0]+=d[0];b[1]+=d[1];b[2]+=d[2]}function Hb(b,d){return[b[0]*d,b[1]*d,b[2]*d]}function kb(b){var d=Math.sqrt(b[0]*b[0]+b[1]*b[1]+b[2]*b[2]);b[0]/=d;b[1]/=d;b[2]/=d}function Sc(b){return[Math.atan2(b[1],b[0]),S(b[2])]}function Tc(b,d){return ea(b[0]-d[0])<P&&ea(b[1]-d[1])<P}function Md(b,d){b*=da;var k=Math.cos(d*=da);qc(k*Math.cos(b),k*Math.sin(b),Math.sin(d))}function qc(b,d,k){++rc;Vb+=(b-Vb)/rc;Wb+=(d-Wb)/rc;Cb+=(k-Cb)/rc}
function Te(){function b(b,a){b*=da;var D=Math.cos(a*=da),y=D*Math.cos(b);b=D*Math.sin(b);a=Math.sin(a);var N=Math.atan2(Math.sqrt((N=k*a-q*b)*N+(N=q*y-d*a)*N+(N=d*b-k*y)*N),d*y+k*b+q*a);Uc+=N;Ib+=N*(d+(d=y));Jb+=N*(k+(k=b));tb+=N*(q+(q=a));qc(d,k,q)}var d,k,q;pb.point=function(a,m){a*=da;var D=Math.cos(m*=da);d=D*Math.cos(a);k=D*Math.sin(a);q=Math.sin(m);pb.point=b;qc(d,k,q)}}function ub(){pb.point=Md}function Vc(){function b(b,d){b*=da;var k=Math.cos(d*=da),fa=k*Math.cos(b);b=k*Math.sin(b);d=Math.sin(d);
var k=a*d-m*b,c=m*fa-q*d,e=q*b-a*fa,f=Math.sqrt(k*k+c*c+e*e),l=q*fa+a*b+m*d,h=f&&-Na(l)/f,f=Math.atan2(f,l);dc+=h*k;ec+=h*c;Kb+=h*e;Uc+=f;Ib+=f*(q+(q=fa));Jb+=f*(a+(a=b));tb+=f*(m+(m=d));qc(q,a,m)}var d,k,q,a,m;pb.point=function(D,y){d=D;k=y;pb.point=b;D*=da;var N=Math.cos(y*=da);q=N*Math.cos(D);a=N*Math.sin(D);m=Math.sin(y);qc(q,a,m)};pb.lineEnd=function(){b(d,k);pb.lineEnd=ub;pb.point=Md}}function vb(b,d){function k(k,a){return k=b(k,a),d(k[0],k[1])}return b.invert&&d.invert&&(k.invert=function(k,
a){return k=d.invert(k,a),k&&b.invert(k[0],k[1])}),k}function wb(){return!0}function sc(b,d,k,q,a){var m=[],D=[];if(b.forEach(function(b){if(!(0>=(d=b.length-1))){var d,k=b[0],q=b[d];if(Tc(k,q)){a.lineStart();for(q=0;d>q;++q)a.point((k=b[q])[0],k[1]);return void a.lineEnd()}d=new Lb(k,b,null,!0);k=new Lb(k,null,d,!1);d.o=k;m.push(d);D.push(k);d=new Lb(q,b,null,!1);k=new Lb(q,null,d,!0);d.o=k;m.push(d);D.push(k)}}),D.sort(d),tc(m),tc(D),m.length){b=0;d=k;for(k=D.length;k>b;++b)D[b].e=d=!d;for(var y,
N=m[0];;){for(var fa=N,c=!0;fa.v;)if((fa=fa.n)===N)return;d=fa.z;a.lineStart();do{if(fa.v=fa.o.v=!0,fa.e){if(c)for(b=0,k=d.length;k>b;++b)a.point((y=d[b])[0],y[1]);else q(fa.x,fa.n.x,1,a);fa=fa.n}else{if(c)for(d=fa.p.z,b=d.length-1;0<=b;--b)a.point((y=d[b])[0],y[1]);else q(fa.x,fa.p.x,-1,a);fa=fa.p}fa=fa.o;d=fa.z;c=!c}while(!fa.v);a.lineEnd()}}}function tc(b){if(d=b.length){for(var d,k,q=0,a=b[0];++q<d;)a.n=k=b[q],k.p=a,a=k;a.n=k=b[0];k.p=a}}function Lb(b,d,k,q){this.x=b;this.z=d;this.o=k;this.e=
q;this.v=!1;this.n=this.p=null}function uc(b,d,k,q){return function(a,m){function D(d,k){var q=a(d,k);b(d=q[0],k=q[1])&&m.point(d,k)}function y(b,d){b=a(b,d);n.point(b[0],b[1])}function N(){p.point=y;n.lineStart()}function fa(){p.point=D;n.lineEnd()}function c(b,d){g.push([b,d]);b=a(b,d);t.point(b[0],b[1])}function e(){t.lineStart();g=[]}function f(){c(g[0][0],g[0][1]);t.lineEnd();var b;b=t.clean();var d=A.buffer(),k=d.length;if(g.pop(),h.push(g),g=null,k)if(1&b){b=d[0];var q,k=b.length-1,d=-1;if(0<
k){z||(m.polygonStart(),z=!0);for(m.lineStart();++d<k;)m.point((q=b[d])[0],q[1]);m.lineEnd()}}else 1<k&&2&b&&d.push(d.pop().concat(d.shift())),l.push(d.filter(Tg))}var l,h,g,n=d(m),r=a.invert(q[0],q[1]),p={point:D,lineStart:N,lineEnd:fa,polygonStart:function(){p.point=c;p.lineStart=e;p.lineEnd=f;l=[];h=[]},polygonEnd:function(){p.point=D;p.lineStart=N;p.lineEnd=fa;l=v.merge(l);var b,d=r;b=h;var q=d[0],a=d[1],u=[Math.sin(q),-Math.cos(q),0],y=0,c=0;Ub.reset();for(var e=0,f=b.length;f>e;++e){var Pa=
b[e],g=Pa.length;if(g)for(var n=Pa[0],ib=n[0],d=n[1]/2+ca/4,A=Math.sin(d),He=Math.cos(d),t=1;;){t===g&&(t=0);var d=Pa[t],w=d[0],L=d[1]/2+ca/4,x=Math.sin(L),L=Math.cos(L),O=w-ib,M=0<=O?1:-1,Ld=M*O,U=Ld>ca,A=A*x;if(Ub.add(Math.atan2(A*M*Math.sin(Ld),He*L+A*Math.cos(Ld))),y+=U?O+M*hb:O,U^ib>=q^w>=q)n=ob(fb(n),fb(d)),kb(n),ib=ob(u,n),kb(ib),ib=(U^0<=O?-1:1)*S(ib[2]),(a>ib||a===ib&&(n[0]||n[1]))&&(c+=U^0<=O?1:-1);if(!t++)break;ib=w;A=x;He=L;n=d}}b=(-P>y||P>y&&-P>Ub)^1&c;l.length?(z||(m.polygonStart(),
z=!0),sc(l,Ug,b,k,m)):b&&(z||(m.polygonStart(),z=!0),m.lineStart(),k(null,null,1,m),m.lineEnd());z&&(m.polygonEnd(),z=!1);l=h=null},sphere:function(){m.polygonStart();m.lineStart();k(null,null,1,m);m.lineEnd();m.polygonEnd()}},A=Ue(),t=d(A),z=!1;return p}}function Tg(b){return 1<b.length}function Ue(){var b,d=[];return{lineStart:function(){d.push(b=[])},point:function(d,q){b.push([d,q])},lineEnd:H,buffer:function(){var k=d;return d=[],b=null,k},rejoin:function(){1<d.length&&d.push(d.pop().concat(d.shift()))}}}
function Ug(b,d){return(0>(b=b.x)[0]?b[1]-Ka-P:Ka-b[1])-(0>(d=d.x)[0]?d[1]-Ka-P:Ka-d[1])}function Vg(b){function d(b,d){return Math.cos(b)*Math.cos(d)>a}function k(b,d,k){var q=fb(b),m=fb(d),y=[1,0,0],m=ob(q,m),D=Gb(m,m),q=m[0],c=D-q*q;if(!c)return!k&&b;D=a*D/c;c=-a*q/c;q=ob(y,m);y=Hb(y,D);m=Hb(m,c);jb(y,m);m=Gb(y,q);D=Gb(q,q);c=m*m-D*(Gb(y,y)-1);if(!(0>c)){var e=Math.sqrt(c),c=Hb(q,(-m-e)/D);if(jb(c,y),c=Sc(c),!k)return c;var f;k=b[0];var l=d[0];b=b[1];d=d[1];k>l&&(f=k,k=l,l=f);var h=l-k,g=ea(h-
ca)<P,n=g||P>h;if(!g&&b>d&&(f=b,b=d,d=f),n?g?0<b+d^c[1]<(ea(c[0]-k)<P?b:d):b<=c[1]&&c[1]<=d:h>ca^(k<=c[0]&&c[0]<=l))return f=Hb(q,(-m+e)/D),jb(f,y),[c,Sc(f)]}}function q(d,k){var q=m?b:ca-b,a=0;return-q>d?a|=1:d>q&&(a|=2),-q>k?a|=4:k>q&&(a|=8),a}var a=Math.cos(b),m=0<a,D=ea(a)>P,y=Nd(b,6*da);return uc(d,function(b){var a,u,y,c,e;return{lineStart:function(){c=y=!1;e=1},point:function(f,l){var h,g=[f,l],n=d(f,l);f=m?n?0:q(f,l):n?q(f+(0>f?ca:-ca),l):0;if(!a&&(c=y=n)&&b.lineStart(),n!==y&&(h=k(a,g),(Tc(a,
h)||Tc(g,h))&&(g[0]+=P,g[1]+=P,n=d(g[0],g[1]))),n!==y)e=0,n?(b.lineStart(),h=k(g,a),b.point(h[0],h[1])):(h=k(a,g),b.point(h[0],h[1]),b.lineEnd()),a=h;else if(D&&a&&m^n){var p;f&u||!(p=k(g,a,!0))||(e=0,m?(b.lineStart(),b.point(p[0][0],p[0][1]),b.point(p[1][0],p[1][1]),b.lineEnd()):(b.point(p[1][0],p[1][1]),b.lineEnd(),b.lineStart(),b.point(p[0][0],p[0][1])))}!n||a&&Tc(a,g)||b.point(g[0],g[1]);a=g;y=n;u=f},lineEnd:function(){y&&b.lineEnd();a=null},clean:function(){return e|(c&&y)<<1}}},y,m?[0,-b]:[-ca,
b-ca])}function Ve(b,d,k,q){return function(a){var m,D=a.a,y=a.b,N=D.x,D=D.y,c=0,e=1,f=y.x-N,y=y.y-D;if(m=b-N,f||!(0<m)){if(m/=f,0>f){if(c>m)return;e>m&&(e=m)}else if(0<f){if(m>e)return;m>c&&(c=m)}if(m=k-N,f||!(0>m)){if(m/=f,0>f){if(m>e)return;m>c&&(c=m)}else if(0<f){if(c>m)return;e>m&&(e=m)}if(m=d-D,y||!(0<m)){if(m/=y,0>y){if(c>m)return;e>m&&(e=m)}else if(0<y){if(m>e)return;m>c&&(c=m)}if(m=q-D,y||!(0>m)){if(m/=y,0>y){if(m>e)return;m>c&&(c=m)}else if(0<y){if(c>m)return;e>m&&(e=m)}return 0<c&&(a.a=
{x:N+c*f,y:D+c*y}),1>e&&(a.b={x:N+e*f,y:D+e*y}),a}}}}}}function We(b,d,k,q){function a(q,m){return ea(q[0]-b)<P?0<m?0:3:ea(q[0]-k)<P?0<m?2:1:ea(q[1]-d)<P?0<m?1:0:0<m?3:2}function m(b,d){return D(b.x,d.x)}function D(b,d){var k=a(b,1),q=a(d,1);return k!==q?k-q:0===k?d[1]-b[1]:1===k?b[0]-d[0]:2===k?b[1]-d[1]:d[0]-b[0]}return function(y){function N(m,y,N,c){var e=0,f=0;if(null==m||(e=a(m,N))!==(f=a(y,N))||0>D(m,y)^0<N){do c.point(0===e||3===e?b:k,1<e?q:d);while((e=(e+N+4)%4)!==f)}else c.point(y[0],y[1])}
function c(a,m){a>=b&&k>=a&&m>=d&&q>=m&&y.point(a,m)}function e(a,m){a=Math.max(-Wc,Math.min(Wc,a));m=Math.max(-Wc,Math.min(Wc,m));var u=a>=b&&k>=a&&m>=d&&q>=m;if(l&&h.push([a,m]),z)g=a,n=m,p=u,z=!1,u&&(y.lineStart(),y.point(a,m));else if(u&&t)y.point(a,m);else{var D={a:{x:r,y:A},b:{x:a,y:m}};O(D)?(t||(y.lineStart(),y.point(D.a.x,D.a.y)),y.point(D.b.x,D.b.y),u||y.lineEnd(),w=!1):u&&(y.lineStart(),y.point(a,m),w=!1)}r=a;A=m;t=u}var f,l,h,g,n,p,r,A,t,z,w,L=y,x=Ue(),O=Ve(b,d,k,q),M={point:c,lineStart:function(){M.point=
e;l&&l.push(h=[]);z=!0;t=!1;r=A=NaN},lineEnd:function(){f&&(e(g,n),p&&t&&x.rejoin(),f.push(x.buffer()));M.point=c;t&&y.lineEnd()},polygonStart:function(){y=x;f=[];l=[];w=!0},polygonEnd:function(){y=L;f=v.merge(f);var d;d=[b,q];for(var k=0,a=l.length,u=d[1],D=0;a>D;++D)for(var c,e=1,fa=l[D],g=fa.length,n=fa[0];g>e;++e)c=fa[e],n[1]<=u?c[1]>u&&0<$a(n,c,d)&&++k:c[1]<=u&&0>$a(n,c,d)&&--k,n=c;d=0!==k;k=w&&d;a=f.length;(k||a)&&(y.polygonStart(),k&&(y.lineStart(),N(null,null,1,y),y.lineEnd()),a&&sc(f,m,d,
N,y),y.polygonEnd());f=l=h=null}};return M}}function Od(b){var d=0,k=ca/3,a=Pd(b);b=a(d,k);return b.parallels=function(b){return arguments.length?a(d=b[0]*ca/180,k=b[1]*ca/180):[d/ca*180,k/ca*180]},b}function Xe(b,d){function k(b,d){d=Math.sqrt(u-2*a*Math.sin(d))/a;return[d*Math.sin(b*=a),m-d*Math.cos(b)]}b=Math.sin(b);var a=(b+Math.sin(d))/2,u=1+b*(2*a-b),m=Math.sqrt(u)/a;return k.invert=function(b,d){d=m-d;return[Math.atan2(b,d)/a,S((u-(b*b+d*d)*a*a)/(2*a))]},k}function Wg(){function b(b,d){Qd+=
u*b-a*d;a=b;u=d}var d,k,a,u;Mb.point=function(m,D){Mb.point=b;d=a=m;k=u=D};Mb.lineEnd=function(){b(d,k)}}function Xg(){function b(b,d){D.push("M",b,",",d,m)}function d(b,d){D.push("M",b,",",d);y.point=k}function k(b,d){D.push("L",b,",",d)}function a(){y.point=b}function u(){D.push("Z")}var m=Ye(4.5),D=[],y={point:b,lineStart:function(){y.point=d},lineEnd:a,polygonStart:function(){y.lineEnd=u},polygonEnd:function(){y.lineEnd=a;y.point=b},pointRadius:function(b){return m=Ye(b),y},result:function(){if(D.length){var b=
D.join("");return D=[],b}}};return y}function Ye(b){return"m0,"+b+"a"+b+","+b+" 0 1,1 0,"+-2*b+"a"+b+","+b+" 0 1,1 0,"+2*b+"z"}function Xb(b,d){Vb+=b;Wb+=d;++Cb}function Ze(){function b(b,a){var m=b-d,D=a-k,m=Math.sqrt(m*m+D*D);Ib+=m*(d+b)/2;Jb+=m*(k+a)/2;tb+=m;Xb(d=b,k=a)}var d,k;qb.point=function(a,u){qb.point=b;Xb(d=a,k=u)}}function $e(){qb.point=Xb}function Yg(){function b(b,d){var k=b-a,N=d-u,k=Math.sqrt(k*k+N*N);Ib+=k*(a+b)/2;Jb+=k*(u+d)/2;tb+=k;k=u*b-a*d;dc+=k*(a+b);ec+=k*(u+d);Kb+=3*k;Xb(a=
b,u=d)}var d,k,a,u;qb.point=function(m,D){qb.point=b;Xb(d=a=m,k=u=D)};qb.lineEnd=function(){b(d,k)}}function Zg(b){function d(d,k){b.moveTo(d+D,k);b.arc(d,k,D,0,hb)}function k(d,k){b.moveTo(d,k);y.point=a}function a(d,k){b.lineTo(d,k)}function u(){y.point=d}function m(){b.closePath()}var D=4.5,y={point:d,lineStart:function(){y.point=k},lineEnd:u,polygonStart:function(){y.lineEnd=m},polygonEnd:function(){y.lineEnd=u;y.point=d},pointRadius:function(b){return D=b,y},result:H};return y}function af(b){function d(b){return(y?
a:k)(b)}function k(d){return bf(d,function(k,a){k=b(k,a);d.point(k[0],k[1])})}function a(d){function k(a,q){a=b(a,q);d.point(a[0],a[1])}function q(){t=NaN;x.point=m;d.lineStart()}function m(k,a){var q=fb([k,a]);a=b(k,a);u(t,v,A,z,w,L,t=a[0],v=a[1],A=k,z=q[0],w=q[1],L=q[2],y,d);d.point(t,v)}function D(){x.point=k;d.lineEnd()}function c(){q();x.point=e;x.lineEnd=f}function e(b,d){m(l=b,d);h=t;g=v;n=z;p=w;r=L;x.point=m}function f(){u(t,v,A,z,w,L,h,g,l,n,p,r,y,d);x.lineEnd=D;D()}var l,h,g,n,p,r,A,t,v,
z,w,L,x={point:k,lineStart:q,lineEnd:D,polygonStart:function(){d.polygonStart();x.lineStart=c},polygonEnd:function(){d.polygonEnd();x.lineStart=q}};return x}function u(d,k,a,q,y,c,e,f,l,h,g,n,p,r){var A=e-d,t=f-k,v=A*A+t*t;if(v>4*m&&p--){var z=q+h,w=y+g,L=c+n,x=Math.sqrt(z*z+w*w+L*L),O=Math.asin(L/=x),M=ea(ea(L)-1)<P||ea(a-l)<P?(a+l)/2:Math.atan2(w,z),U=b(M,O),O=U[0],U=U[1],C=O-d,B=U-k,E=t*C-A*B;(E*E/v>m||.3<ea((A*C+t*B)/v-.5)||D>q*h+y*g+c*n)&&(u(d,k,a,q,y,c,O,U,M,z/=x,w/=x,L,p,r),r.point(O,U),u(O,
U,M,z,w,L,e,f,l,h,g,n,p,r))}}var m=.5,D=Math.cos(30*da),y=16;return d.precision=function(b){return arguments.length?(y=0<(m=b*b)&&16,d):Math.sqrt(m)},d}function $g(b){var d=af(function(d,a){return b([d*Ha,a*Ha])});return function(b){return cf(d(b))}}function df(b){this.stream=b}function bf(b,d){return{point:d,sphere:function(){b.sphere()},lineStart:function(){b.lineStart()},lineEnd:function(){b.lineEnd()},polygonStart:function(){b.polygonStart()},polygonEnd:function(){b.polygonEnd()}}}function Nb(b){return Pd(function(){return b})()}
function Pd(b){function d(b){return b=y(b[0]*da,b[1]*da),[b[0]*h+c,e-b[1]*h]}function k(b){return b=y.invert((b[0]-c)/h,(e-b[1])/h),b&&[b[0]*Ha,b[1]*Ha]}function a(){y=vb(D=Rd(A,t,w),m);var b=m(p,r);return c=g-b[0]*h,e=n+b[1]*h,u()}function u(){return f&&(f.valid=!1,f=null),d}var m,D,y,c,e,f,l=af(function(b,d){return b=m(b,d),[b[0]*h+c,e-b[1]*h]}),h=150,g=480,n=250,p=0,r=0,A=0,t=0,w=0,L=ef,x=z,O=null,M=null;return d.stream=function(b){return f&&(f.valid=!1),f=cf(L(D,l(x(b)))),f.valid=!0,f},d.clipAngle=
function(b){return arguments.length?(L=null==b?(O=b,ef):Vg((O=+b)*da),u()):O},d.clipExtent=function(b){return arguments.length?(M=b,x=b?We(b[0][0],b[0][1],b[1][0],b[1][1]):z,u()):M},d.scale=function(b){return arguments.length?(h=+b,a()):h},d.translate=function(b){return arguments.length?(g=+b[0],n=+b[1],a()):[g,n]},d.center=function(b){return arguments.length?(p=b[0]%360*da,r=b[1]%360*da,a()):[p*Ha,r*Ha]},d.rotate=function(b){return arguments.length?(A=b[0]%360*da,t=b[1]%360*da,w=2<b.length?b[2]%
360*da:0,a()):[A*Ha,t*Ha,w*Ha]},v.rebind(d,l,"precision"),function(){return m=b.apply(this,arguments),d.invert=m.invert&&k,a()}}function cf(b){return bf(b,function(d,k){b.point(d*da,k*da)})}function vc(b,d){return[b,d]}function ff(b,d){return[b>ca?b-hb:-ca>b?b+hb:b,d]}function Rd(b,d,k){return b?d||k?vb(gf(b),hf(d,k)):gf(b):d||k?hf(d,k):ff}function jf(b){return function(d,k){return d+=b,[d>ca?d-hb:-ca>d?d+hb:d,k]}}function gf(b){var d=jf(b);return d.invert=jf(-b),d}function hf(b,d){function k(b,d){var k=
Math.cos(d),c=Math.cos(b)*k;b=Math.sin(b)*k;d=Math.sin(d);k=d*a+c*u;return[Math.atan2(b*m-k*D,c*a-d*u),S(k*m+b*D)]}var a=Math.cos(b),u=Math.sin(b),m=Math.cos(d),D=Math.sin(d);return k.invert=function(b,d){var k=Math.cos(d),c=Math.cos(b)*k;b=Math.sin(b)*k;d=Math.sin(d);k=d*m-b*D;return[Math.atan2(b*m+d*D,c*a+k*u),S(k*a-c*u)]},k}function Nd(b,d){var k=Math.cos(b),a=Math.sin(b);return function(u,m,D,y){var c=D*d;null!=u?(u=kf(k,u),m=kf(k,m),(0<D?m>u:u>m)&&(u+=D*hb)):(u=b+D*hb,m=b-.5*c);for(var e;0<D?
u>m:m>u;u-=c)y.point((e=Sc([k,-a*Math.cos(u),-a*Math.sin(u)]))[0],e[1])}}function kf(b,d){d=fb(d);d[0]-=b;kb(d);b=Na(-d[1]);return((0>-d[2]?-b:b)+2*Math.PI-P)%(2*Math.PI)}function lf(b,d,k){var a=v.range(b,d-P,k).concat(d);return function(b){return a.map(function(d){return[b,d]})}}function mf(b,d,k){var a=v.range(b,d-P,k).concat(d);return function(b){return a.map(function(d){return[d,b]})}}function Sd(b){return b.source}function Td(b){return b.target}function ah(b,d,k,a){var u=Math.cos(d),m=Math.sin(d),
D=Math.cos(a),y=Math.sin(a),c=u*Math.cos(b),e=u*Math.sin(b),f=D*Math.cos(k),l=D*Math.sin(k),h=2*Math.asin(Math.sqrt(Ba(a-d)+u*D*Ba(k-b))),g=1/Math.sin(h);k=h?function(b){var d=Math.sin(b*=h)*g;b=Math.sin(h-b)*g;var k=b*c+d*f,a=b*e+d*l;return[Math.atan2(a,k)*Ha,Math.atan2(b*m+d*y,Math.sqrt(k*k+a*a))*Ha]}:function(){return[b*Ha,d*Ha]};return k.distance=h,k}function wc(b,d){function k(d,k){var a=Math.cos(k),D=b(Math.cos(d)*a);return[D*a*Math.sin(d),D*Math.sin(k)]}return k.invert=function(b,k){var a=
Math.sqrt(b*b+k*k),D=d(a),y=Math.sin(D);return[Math.atan2(b*y,a*Math.cos(D)),Math.asin(a&&k*y/a)]},k}function nf(b,d){function k(b,d){0<m?-Ka+P>d&&(d=-Ka+P):d>Ka-P&&(d=Ka-P);d=m/Math.pow(Math.tan(ca/4+d/2),u);return[d*Math.sin(u*b),m-d*Math.cos(u*b)]}var a=Math.cos(b),u=b===d?Math.sin(b):Math.log(a/Math.cos(d))/Math.log(Math.tan(ca/4+d/2)/Math.tan(ca/4+b/2)),m=a*Math.pow(Math.tan(ca/4+b/2),u)/u;return u?(k.invert=function(b,d){d=m-d;return[Math.atan2(b,d)/u,2*Math.atan(Math.pow(m/((0<u?1:0>u?-1:0)*
Math.sqrt(b*b+d*d)),1/u))-Ka]},k):Xc}function of(b,d){function k(b,d){d=m-d;return[d*Math.sin(u*b),m-d*Math.cos(u*b)]}var a=Math.cos(b),u=b===d?Math.sin(b):(a-Math.cos(d))/(d-b),m=a/u+b;return ea(u)<P?vc:(k.invert=function(b,d){d=m-d;return[Math.atan2(b,d)/u,m-(0<u?1:0>u?-1:0)*Math.sqrt(b*b+d*d)]},k)}function Xc(b,d){return[b,Math.log(Math.tan(ca/4+d/2))]}function pf(b){var d,k=Nb(b),a=k.scale,u=k.translate,m=k.clipExtent;return k.scale=function(){var b=a.apply(k,arguments);return b===k?d?k.clipExtent(null):
k:b},k.translate=function(){var b=u.apply(k,arguments);return b===k?d?k.clipExtent(null):k:b},k.clipExtent=function(b){var y=m.apply(k,arguments);if(y===k){if(d=null==b){var c=ca*a(),e=u();m([[e[0]-c,e[1]-c],[e[0]+c,e[1]+c]])}}else d&&(y=null);return y},k.clipExtent(null)}function Ud(b,d){return[Math.log(Math.tan(ca/4+d/2)),-b]}function fc(b){return b[0]}function xc(b){return b[1]}function qf(b){for(var d=b.length,k=[0,1],a=2,u=2;d>u;u++){for(;1<a&&0>=$a(b[k[a-2]],b[k[a-1]],b[u]);)--a;k[a++]=u}return k.slice(0,
a)}function bh(b,d){return b[0]-d[0]||b[1]-d[1]}function Vd(b,d,k){return(k[0]-d[0])*(b[1]-d[1])<(k[1]-d[1])*(b[0]-d[0])}function Wd(b,d,k,a){var u=b[0],m=k[0],c=d[0]-u,y=a[0]-m;b=b[1];k=k[1];d=d[1]-b;a=a[1]-k;m=(y*(b-k)-a*(u-m))/(a*c-y*d);return[u+m*c,b+m*d]}function rf(b){var d=b[0];b=b[b.length-1];return!(d[0]-b[0]||d[1]-b[1])}function ch(){Yc(this);this.edge=this.site=this.circle=null}function sf(b){var d=tf.pop()||new ch;return d.site=b,d}function Xd(b){gc(b);hc.remove(b);tf.push(b);Yc(b)}function uf(b,
d){var k=b.site,a=k.x,u=k.y,m=u-d;if(!m)return a;b=b.P;if(!b)return-(1/0);k=b.site;b=k.x;k=k.y;d=k-d;if(!d)return b;var c=b-a,y=1/m-1/d,e=c/d;return y?(-e+Math.sqrt(e*e-2*y*(c*c/(-2*d)-k+d/2+u-m/2)))/y+a:(a+b)/2}function vf(b){this.site=b;this.edges=[]}function wf(b,d){return d.angle-b.angle}function dh(){Yc(this);this.x=this.y=this.arc=this.site=this.cy=null}function ic(b){var d=b.P,k=b.N;if(d&&k){var a=d.site,d=b.site,u=k.site;if(a!==u){var k=d.x,m=d.y,c=a.x-k,y=a.y-m,a=u.x-k,u=u.y-m,e=2*(c*u-y*
a);if(!(e>=-Zc)){var f=c*c+y*y,l=a*a+u*u,y=(u*f-y*l)/e,c=(c*l-a*f)/e,u=c+m,m=xf.pop()||new dh;m.arc=b;m.site=d;m.x=y+k;m.y=u+Math.sqrt(y*y+c*c);m.cy=u;b.circle=m;b=null;for(d=yc._;d;)if(m.y<d.y||m.y===d.y&&m.x<=d.x){if(!d.L){b=d.P;break}d=d.L}else{if(!d.R){b=d;break}d=d.R}yc.insert(b,m);b||(Yd=m)}}}}function gc(b){var d=b.circle;d&&(d.P||(Yd=d.N),yc.remove(d),xf.push(d),Yc(d),b.circle=null)}function eh(b,d){var k=b.b;if(k)return!0;var a,u,m=b.a,k=d[0][0],c=d[1][0],y=d[0][1];d=d[1][1];var e=b.l,f=
b.r,l=e.x,e=e.y,h=f.x,f=f.y;u=(l+h)/2;if(f===e){if(k>u||u>=c)return;if(l>h){if(m){if(m.y>=d)return}else m={x:u,y:y};k={x:u,y:d}}else{if(m){if(m.y<y)return}else m={x:u,y:d};k={x:u,y:y}}}else if(a=(l-h)/(f-e),u=(e+f)/2-a*u,-1>a||1<a)if(l>h){if(m){if(m.y>=d)return}else m={x:(y-u)/a,y:y};k={x:(d-u)/a,y:d}}else{if(m){if(m.y<y)return}else m={x:(d-u)/a,y:d};k={x:(y-u)/a,y:y}}else if(f>e){if(m){if(m.x>=c)return}else m={x:k,y:a*k+u};k={x:c,y:a*c+u}}else{if(m){if(m.x<k)return}else m={x:c,y:a*c+u};k={x:k,y:a*
k+u}}return b.a=m,b.b=k,!0}function yf(b,d){this.l=b;this.r=d;this.a=this.b=null}function zc(b,d,k,a){var u=new yf(b,d);return jc.push(u),k&&$c(u,b,d,k),a&&$c(u,d,b,a),Yb[b.i].edges.push(new ad(u,b,d)),Yb[d.i].edges.push(new ad(u,d,b)),u}function fh(b,d,k){b=new yf(b,null);return b.a=d,b.b=k,jc.push(b),b}function $c(b,d,k,a){b.a||b.b?b.l===k?b.b=a:b.a=a:(b.a=a,b.l=d,b.r=k)}function ad(b,d,k){var a=b.a,u=b.b;this.edge=b;this.site=d;this.angle=k?Math.atan2(k.y-d.y,k.x-d.x):b.l===d?Math.atan2(u.x-a.x,
a.y-u.y):Math.atan2(a.x-u.x,u.y-a.y)}function Zd(){this._=null}function Yc(b){b.U=b.C=b.L=b.R=b.P=b.N=null}function Ac(b,d){var k=d.R,a=d.U;a?a.L===d?a.L=k:a.R=k:b._=k;k.U=a;d.U=k;d.R=k.L;d.R&&(d.R.U=d);k.L=d}function Bc(b,d){var k=d.L,a=d.U;a?a.L===d?a.L=k:a.R=k:b._=k;k.U=a;d.U=k;d.L=k.R;d.L&&(d.L.U=d);k.R=d}function zf(b){for(;b.L;)b=b.L;return b}function $d(b,d){var k,a,u,m=b.sort(gh).pop();jc=[];Yb=Array(b.length);hc=new Zd;for(yc=new Zd;;)if(u=Yd,m&&(!u||m.y<u.y||m.y===u.y&&m.x<u.x)){if(m.x!==
k||m.y!==a){Yb[m.i]=new vf(m);k=m;for(var c=a=void 0,y=void 0,e=void 0,f=k.x,l=k.y,h=hc._;h;)if(y=uf(h,l)-f,y>P)h=h.L;else{var g;var n=h;g=l;var p=n.N;p?g=uf(p,g):(n=n.site,g=n.y===g?n.x:1/0);if(e=f-g,!(e>P)){y>-P?(a=h.P,c=h):e>-P?(a=h,c=h.N):a=c=h;break}if(!h.R){a=h;break}h=h.R}y=sf(k);if(hc.insert(a,y),a||c)if(a===c)gc(a),c=sf(a.site),hc.insert(y,c),y.edge=c.edge=zc(a.site,y.site),ic(a),ic(c);else if(c){gc(a);gc(c);e=a.site;l=e.x;h=e.y;g=k.x-l;var n=k.y-h,f=c.site,p=f.x-l,r=f.y-h,A=2*(g*r-n*p),
t=g*g+n*n,v=p*p+r*r,l={x:(r*t-n*v)/A+l,y:(g*v-p*t)/A+h};$c(c.edge,e,f,l);y.edge=zc(e,k,null,l);c.edge=zc(k,f,null,l);ic(a);ic(c)}else y.edge=zc(a.site,y.site);k=m.x;a=m.y}m=b.pop()}else{if(!u)break;f=u.arc;c=f.circle;e=c.x;l=c.cy;c={x:e,y:l};g=f.P;h=f.N;y=[f];Xd(f);for(f=g;f.circle&&ea(e-f.circle.x)<P&&ea(l-f.circle.cy)<P;)g=f.P,y.unshift(f),Xd(f),f=g;y.unshift(f);gc(f);for(g=h;g.circle&&ea(e-g.circle.x)<P&&ea(l-g.circle.cy)<P;)h=g.N,y.push(g),Xd(g),g=h;y.push(g);gc(g);l=y.length;for(e=1;l>e;++e)g=
y[e],f=y[e-1],$c(g.edge,f.site,g.site,c);f=y[0];g=y[l-1];g.edge=zc(f.site,g.site,null,c);ic(f);ic(g)}if(d){u=jc;m=Ve(d[0][0],d[0][1],d[1][0],d[1][1]);for(k=u.length;k--;)b=u[k],(!eh(b,d)||!m(b)||ea(b.a.x-b.b.x)<P&&ea(b.a.y-b.b.y)<P)&&(b.a=b.b=null,u.splice(k,1));var z;b=d[0][0];u=d[1][0];m=d[0][1];l=d[1][1];h=Yb;for(g=h.length;g--;)if(z=h[g],z&&z.prepare())for(y=z.edges,e=y.length,c=0;e>c;)f=y[c].end(),k=f.x,a=f.y,n=y[++c%e].start(),d=n.x,n=n.y,(ea(k-d)>P||ea(a-n)>P)&&(y.splice(c,0,new ad(fh(z.site,
f,ea(k-b)<P&&l-a>P?{x:b,y:ea(d-b)<P?n:l}:ea(a-l)<P&&u-k>P?{x:ea(n-l)<P?d:u,y:l}:ea(k-u)<P&&a-m>P?{x:u,y:ea(d-u)<P?n:m}:ea(a-m)<P&&k-b>P?{x:ea(n-m)<P?d:b,y:m}:null),z.site,null)),++e)}z={cells:Yb,edges:jc};return hc=yc=jc=Yb=null,z}function gh(b,d){return d.y-b.y||d.x-b.x}function hh(b){return b.x}function ih(b){return b.y}function Af(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Cc(b,d,k,a,u,m){if(!b(d,k,a,u,m)){var c=.5*(k+u),y=.5*(a+m);d=d.nodes;d[0]&&Cc(b,d[0],k,a,c,y);d[1]&&Cc(b,
d[1],c,a,u,y);d[2]&&Cc(b,d[2],k,y,c,m);d[3]&&Cc(b,d[3],c,y,u,m)}}function jh(b,d,k,a,u,m,c){var y,e=1/0;return function Pa(b,f,l,h,g){if(!(f>m||l>c||a>h||u>g)){if(n=b.point){var n,p=d-b.x,r=k-b.y,p=p*p+r*r;e>p&&(p=Math.sqrt(e=p),a=d-p,u=k-p,m=d+p,c=k+p,y=n)}n=b.nodes;for(var p=.5*(f+h),r=.5*(l+g),A=(k>=r)<<1|d>=p,t=A+4;t>A;++A)if(b=n[3&A])switch(3&A){case 0:Pa(b,f,l,p,r);break;case 1:Pa(b,p,l,h,r);break;case 2:Pa(b,f,r,p,g);break;case 3:Pa(b,p,r,h,g)}}}(b,a,u,m,c),y}function ae(b,d){b=v.rgb(b);d=
v.rgb(d);var k=b.r,a=b.g,u=b.b,m=d.r-k,c=d.g-a,y=d.b-u;return function(b){return"#"+bc(Math.round(k+m*b))+bc(Math.round(a+c*b))+bc(Math.round(u+y*b))}}function Bf(b,d){var k,a={},u={};for(k in b)k in d?a[k]=Zb(b[k],d[k]):u[k]=b[k];for(k in d)k in b||(u[k]=d[k]);return function(b){for(k in a)u[k]=a[k](b);return u}}function Db(b,d){return b=+b,d=+d,function(k){return b*(1-k)+d*k}}function Cf(b,d){var k,a,u,m=be.lastIndex=ce.lastIndex=0,c=-1,y=[],e=[];b+="";for(d+="";(k=be.exec(b))&&(a=ce.exec(d));)(u=
a.index)>m&&(u=d.slice(m,u),y[c]?y[c]+=u:y[++c]=u),(k=k[0])===(a=a[0])?y[c]?y[c]+=a:y[++c]=a:(y[++c]=null,e.push({i:c,x:Db(k,a)})),m=ce.lastIndex;return m<d.length&&(u=d.slice(m),y[c]?y[c]+=u:y[++c]=u),2>y.length?e[0]?(d=e[0].x,function(b){return d(b)+""}):function(){return d}:(d=e.length,function(b){for(var k,a=0;d>a;++a)y[(k=e[a]).i]=k.x(b);return y.join("")})}function Zb(b,d){for(var k,a=v.interpolators.length;0<=--a&&!(k=v.interpolators[a](b,d)););return k}function bd(b,d){var k,a=[],u=[],m=b.length,
c=d.length,y=Math.min(b.length,d.length);for(k=0;y>k;++k)a.push(Zb(b[k],d[k]));for(;m>k;++k)u[k]=b[k];for(;c>k;++k)u[k]=d[k];return function(b){for(k=0;y>k;++k)u[k]=a[k](b);return u}}function kh(b){return function(d){return 0>=d?0:1<=d?1:b(d)}}function Df(b){return function(d){return 1-b(1-d)}}function Ef(b){return function(d){return.5*(.5>d?b(2*d):2-b(2-2*d))}}function lh(b){return b*b}function mh(b){return b*b*b}function nh(b){if(0>=b)return 0;if(1<=b)return 1;var d=b*b,k=d*b;return 4*(.5>b?k:3*
(b-d)+k-.75)}function oh(b){return 1-Math.cos(b*Ka)}function ph(b){return Math.pow(2,10*(b-1))}function qh(b){return 1-Math.sqrt(1-b*b)}function rh(b){return 1/2.75>b?7.5625*b*b:2/2.75>b?7.5625*(b-=1.5/2.75)*b+.75:2.5/2.75>b?7.5625*(b-=2.25/2.75)*b+.9375:7.5625*(b-=2.625/2.75)*b+.984375}function Ff(b,d){return d-=b,function(k){return Math.round(b+d*k)}}function Gf(b){var d=[b.a,b.b],k=[b.c,b.d],a=Hf(d),u=d[0]*k[0]+d[1]*k[1],m;m=-u;m=(k[0]+=m*d[0],k[1]+=m*d[1],k);m=Hf(m)||0;d[0]*k[1]<k[0]*d[1]&&(d[0]*=
-1,d[1]*=-1,a*=-1,u*=-1);this.rotate=(a?Math.atan2(d[1],d[0]):Math.atan2(-k[0],k[1]))*Ha;this.translate=[b.e,b.f];this.scale=[a,m];this.skew=m?Math.atan2(u,m)*Ha:0}function Hf(b){var d=Math.sqrt(b[0]*b[0]+b[1]*b[1]);return d&&(b[0]/=d,b[1]/=d),d}function kc(b){return b.length?b.pop()+",":""}function sh(b,d,k,a){b[0]!==d[0]||b[1]!==d[1]?(k=k.push("translate(",null,",",null,")"),a.push({i:k-4,x:Db(b[0],d[0])},{i:k-2,x:Db(b[1],d[1])})):(d[0]||d[1])&&k.push("translate("+d+")")}function th(b,d,k,a){b!==
d?(180<b-d?d+=360:180<d-b&&(b+=360),a.push({i:k.push(kc(k)+"rotate(",null,")")-2,x:Db(b,d)})):d&&k.push(kc(k)+"rotate("+d+")")}function uh(b,d,k,a){b!==d?a.push({i:k.push(kc(k)+"skewX(",null,")")-2,x:Db(b,d)}):d&&k.push(kc(k)+"skewX("+d+")")}function vh(b,d,k,a){b[0]!==d[0]||b[1]!==d[1]?(k=k.push(kc(k)+"scale(",null,",",null,")"),a.push({i:k-4,x:Db(b[0],d[0])},{i:k-2,x:Db(b[1],d[1])})):1===d[0]&&1===d[1]||k.push(kc(k)+"scale("+d+")")}function If(b,d){var k=[],a=[];return b=v.transform(b),d=v.transform(d),
sh(b.translate,d.translate,k,a),th(b.rotate,d.rotate,k,a),uh(b.skew,d.skew,k,a),vh(b.scale,d.scale,k,a),b=d=null,function(b){for(var d,c=-1,y=a.length;++c<y;)k[(d=a[c]).i]=d.x(b);return k.join("")}}function wh(b,d){return d=(d-=b=+b)||1/d,function(k){return(k-b)/d}}function xh(b,d){return d=(d-=b=+b)||1/d,function(k){return Math.max(0,Math.min(1,(k-b)/d))}}function yh(b){var d=b.source;b=b.target;var k;var a=b;if(d===a)k=d;else{k=Jf(d);for(var a=Jf(a),u=k.pop(),m=a.pop(),c=null;u===m;)c=u,u=k.pop(),
m=a.pop();k=c}for(a=[d];d!==k;)d=d.parent,a.push(d);for(d=a.length;b!==k;)a.splice(d,0,b),b=b.parent;return a}function Jf(b){for(var d=[],k=b.parent;null!=k;)d.push(b),b=k,k=k.parent;return d.push(b),d}function zh(b){b.fixed|=2}function Ah(b){b.fixed&=-7}function Bh(b){b.fixed|=4;b.px=b.x;b.py=b.y}function Ch(b){b.fixed&=-5}function Kf(b,d,k){var a=0,u=0;if(b.charge=0,!b.leaf)for(var m,c=b.nodes,y=c.length,e=-1;++e<y;)m=c[e],null!=m&&(Kf(m,d,k),b.charge+=m.charge,a+=m.charge*m.cx,u+=m.charge*m.cy);
b.point&&(b.leaf||(b.point.x+=Math.random()-.5,b.point.y+=Math.random()-.5),d*=k[b.point.index],b.charge+=b.pointCharge=d,a+=d*b.point.x,u+=d*b.point.y);b.cx=a/b.charge;b.cy=u/b.charge}function Dc(b,d){return v.rebind(b,d,"sort","children","value"),b.nodes=b,b.links=Dh,b}function Ec(b,d){for(var k=[b];null!=(b=k.pop());)if(d(b),(u=b.children)&&(a=u.length))for(var a,u;0<=--a;)k.push(u[a])}function xb(b,d){for(var k=[b],a=[];null!=(b=k.pop());)if(a.push(b),(m=b.children)&&(u=m.length)){var u,m;for(b=
-1;++b<u;)k.push(m[b])}for(;null!=(b=a.pop());)d(b)}function Eh(b){return b.children}function Fh(b){return b.value}function Gh(b,d){return d.value-b.value}function Dh(b){return v.merge(b.map(function(b){return(b.children||[]).map(function(k){return{source:b,target:k}})}))}function Hh(b){return b.x}function Ih(b){return b.y}function Jh(b,d,k){b.y0=d;b.y=k}function de(b){return v.range(b.length)}function ee(b){var d=-1;b=b[0].length;for(var k=[];++d<b;)k[d]=0;return k}function Kh(b){for(var d,k=1,a=
0,u=b[0][1],m=b.length;m>k;++k)(d=b[k][1])>u&&(a=k,u=d);return a}function Lh(b){return b.reduce(Mh,0)}function Mh(b,d){return b+d[1]}function Nh(b,d){return Lf(b,Math.ceil(Math.log(d.length)/Math.LN2+1))}function Lf(b,d){var k=-1,a=+b[0];b=(b[1]-a)/d;for(var u=[];++k<=d;)u[k]=b*k+a;return u}function Oh(b){return[v.min(b),v.max(b)]}function Ph(b,d){return b.value-d.value}function fe(b,d){var k=b._pack_next;b._pack_next=d;d._pack_prev=b;d._pack_next=k;k._pack_prev=d}function Mf(b,d){b._pack_next=d;
d._pack_prev=b}function Nf(b,d){var k=d.x-b.x,a=d.y-b.y;b=b.r+d.r;return.999*b*b>k*k+a*a}function Of(b){function d(b){l=Math.min(b.x-b.r,l);h=Math.max(b.x+b.r,h);g=Math.min(b.y-b.r,g);n=Math.max(b.y+b.r,n)}if((k=b.children)&&(f=k.length)){var k,a,u,m,c,y,e,f,l=1/0,h=-(1/0),g=1/0,n=-(1/0);if(k.forEach(Qh),a=k[0],a.x=-a.r,a.y=0,d(a),1<f&&(u=k[1],u.x=u.r,u.y=0,d(u),2<f))for(m=k[2],Pf(a,u,m),d(m),fe(a,m),a._pack_prev=m,fe(m,u),u=a._pack_next,c=3;f>c;c++){Pf(a,u,m=k[c]);var p=0,r=1,A=1;for(y=u._pack_next;y!==
u;y=y._pack_next,r++)if(Nf(y,m)){p=1;break}if(1==p)for(e=a._pack_prev;e!==y._pack_prev&&!Nf(e,m);e=e._pack_prev,A++);p?(A>r||r==A&&u.r<a.r?Mf(a,u=y):Mf(a=e,u),c--):(fe(a,m),u=m,d(m))}a=(l+h)/2;u=(g+n)/2;for(c=y=0;f>c;c++)m=k[c],m.x-=a,m.y-=u,y=Math.max(y,m.r+Math.sqrt(m.x*m.x+m.y*m.y));b.r=y;k.forEach(Rh)}}function Qh(b){b._pack_next=b._pack_prev=b}function Rh(b){delete b._pack_next;delete b._pack_prev}function Qf(b,d,k,a){var u=b.children;if(b.x=d+=a*b.x,b.y=k+=a*b.y,b.r*=a,u){b=-1;for(var m=u.length;++b<
m;)Qf(u[b],d,k,a)}}function Pf(b,d,k){var a=b.r+k.r,u=d.x-b.x,m=d.y-b.y;if(a&&(u||m)){var c=d.r+k.r,y=u*u+m*m,c=c*c,a=a*a;d=.5+(a-c)/(2*y);c=Math.sqrt(Math.max(0,2*c*(a+y)-(a-=y)*a-c*c))/(2*y);k.x=b.x+d*u+c*m;k.y=b.y+d*m-c*u}else k.x=b.x+a,k.y=b.y}function Rf(b,d){return b.parent==d.parent?1:2}function ge(b){var d=b.children;return d.length?d[0]:b.t}function he(b){var d,k=b.children;return(d=k.length)?k[d-1]:b.t}function Sh(b){return 1+v.max(b,function(b){return b.y})}function Th(b){return b.reduce(function(b,
k){return b+k.x},0)/b.length}function Sf(b){var d=b.children;return d&&d.length?Sf(d[0]):b}function Tf(b){var d,k=b.children;return k&&(d=k.length)?Tf(k[d-1]):b}function ie(b){return{x:b.x,y:b.y,dx:b.dx,dy:b.dy}}function Uf(b,d){var k=b.x+d[3],a=b.y+d[0],u=b.dx-d[1]-d[3];b=b.dy-d[0]-d[2];return 0>u&&(k+=u/2,u=0),0>b&&(a+=b/2,b=0),{x:k,y:a,dx:u,dy:b}}function lc(b){var d=b[0];b=b[b.length-1];return b>d?[d,b]:[b,d]}function cd(b){return b.rangeExtent?b.rangeExtent():lc(b.range())}function Uh(b,d,k,
a){var u=k(b[0],b[1]),m=a(d[0],d[1]);return function(b){return m(u(b))}}function dd(b,d){var k,a=0,u=b.length-1,m=b[a],c=b[u];return m>c&&(k=a,a=u,u=k,k=m,m=c,c=k),b[a]=d.floor(m),b[u]=d.ceil(c),b}function Vf(b){return b?{floor:function(d){return Math.floor(d/b)*b},ceil:function(d){return Math.ceil(d/b)*b}}:Vh}function Wh(b,d,k,a){var u=[],m=[],c=0,y=Math.min(b.length,d.length)-1;for(b[y]<b[0]&&(b=b.slice().reverse(),d=d.slice().reverse());++c<=y;)u.push(k(b[c-1],b[c])),m.push(a(d[c-1],d[c]));return function(d){var k=
v.bisect(b,d,1,y)-1;return m[k](u[k](d))}}function Wf(b,d,k,a){function u(){var u=2<Math.min(b.length,d.length)?Wh:Uh,e=a?xh:wh;return c=u(b,d,e,k),y=u(d,b,e,Zb),m}function m(b){return c(b)}var c,y;return m.invert=function(b){return y(b)},m.domain=function(d){return arguments.length?(b=d.map(Number),u()):b},m.range=function(b){return arguments.length?(d=b,u()):d},m.rangeRound=function(b){return m.range(b).interpolate(Ff)},m.clamp=function(b){return arguments.length?(a=b,u()):a},m.interpolate=function(b){return arguments.length?
(k=b,u()):k},m.ticks=function(d){return v.range.apply(v,Ob(b,d))},m.tickFormat=function(d,a){return je(b,d,a)},m.nice=function(d){return Xf(b,d),u()},m.copy=function(){return Wf(b,d,k,a)},u()}function ke(b,d){return v.rebind(b,d,"range","rangeRound","interpolate","clamp")}function Xf(b,d){return dd(b,Vf(Ob(b,d)[2])),dd(b,Vf(Ob(b,d)[2])),b}function Ob(b,d){null==d&&(d=10);b=lc(b);var a=b[1]-b[0],q=Math.pow(10,Math.floor(Math.log(a/d)/Math.LN10));d=d/a*q;return.15>=d?q*=10:.35>=d?q*=5:.75>=d&&(q*=2),
b[0]=Math.ceil(b[0]/q)*q,b[1]=Math.floor(b[1]/q)*q+.5*q,b[2]=q,b}function je(b,d,a){b=Ob(b,d);if(a){d=Pe.exec(a);if(d.shift(),"s"===d[8]){var q=v.formatPrefix(Math.max(ea(b[0]),ea(b[1])));return d[7]||(d[7]="."+ed(q.scale(b[2]))),d[8]="f",a=v.format(d.join("")),function(b){return a(q.scale(b))+q.symbol}}d[7]||(d[7]="."+Xh(d[8],b));a=d.join("")}else a=",."+ed(b[2])+"f";return v.format(a)}function ed(b){return-Math.floor(Math.log(b)/Math.LN10+.01)}function Xh(b,d){var a=ed(d[2]);return b in Yh?Math.abs(a-
ed(Math.max(ea(d[0]),ea(d[1]))))+ +("e"!==b):a-2*("%"===b)}function Yf(b,d,a,q){function u(b){return(a?Math.log(0>b?0:b):-Math.log(0<b?0:-b))/Math.log(d)}function m(b){return a?Math.pow(d,b):-Math.pow(d,-b)}function c(d){return b(u(d))}return c.invert=function(d){return m(b.invert(d))},c.domain=function(d){return arguments.length?(a=0<=d[0],b.domain((q=d.map(Number)).map(u)),c):q},c.base=function(a){return arguments.length?(d=+a,b.domain(q.map(u)),c):d},c.nice=function(){var d=dd(q.map(u),a?Math:
Zh);return b.domain(d),q=d.map(m),c},c.ticks=function(){var b=lc(q),c=[],e=b[0],b=b[1],f=Math.floor(u(e)),l=Math.ceil(u(b)),h=d%1?2:d;if(isFinite(l-f)){if(a){for(;l>f;f++)for(var D=1;h>D;D++)c.push(m(f)*D);c.push(m(f))}else for(c.push(m(f));f++<l;)for(D=h-1;0<D;D--)c.push(m(f)*D);for(f=0;c[f]<e;f++);for(l=c.length;c[l-1]>b;l--);c=c.slice(f,l)}return c},c.tickFormat=function(b,a){if(!arguments.length)return Zf;2>arguments.length?a=Zf:"function"!=typeof a&&(a=v.format(a));var k=Math.max(1,d*b/c.ticks().length);
return function(b){var q=b/m(Math.round(u(b)));return d-.5>q*d&&(q*=d),k>=q?a(b):""}},c.copy=function(){return Yf(b.copy(),d,a,q)},ke(c,b)}function $f(b,d,a){function q(d){return b(u(d))}var u=fd(d),m=fd(1/d);return q.invert=function(d){return m(b.invert(d))},q.domain=function(d){return arguments.length?(b.domain((a=d.map(Number)).map(u)),q):a},q.ticks=function(b){return v.range.apply(v,Ob(a,b))},q.tickFormat=function(b,d){return je(a,b,d)},q.nice=function(b){return q.domain(Xf(a,b))},q.exponent=
function(c){return arguments.length?(u=fd(d=c),m=fd(1/d),b.domain(a.map(u)),q):d},q.copy=function(){return $f(b.copy(),d,a)},ke(q,b)}function fd(b){return function(d){return 0>d?-Math.pow(-d,b):Math.pow(d,b)}}function ag(b,d){function a(k){return m[((u.get(k)||("range"===d.t?u.set(k,b.push(k)):NaN))-1)%m.length]}function q(d,a){return v.range(b.length).map(function(b){return d+a*b})}var u,m,c;return a.domain=function(m){if(!arguments.length)return b;b=[];u=new t;for(var q,c=-1,e=m.length;++c<e;)u.has(q=
m[c])||u.set(q,b.push(q));return a[d.t].apply(a,d.a)},a.range=function(b){return arguments.length?(m=b,c=0,d={t:"range",a:arguments},a):m},a.rangePoints=function(u,e){2>arguments.length&&(e=0);var f=u[0],l=u[1],l=2>b.length?(f=(f+l)/2,0):(l-f)/(b.length-1+e);return m=q(f+l*e/2,l),c=0,d={t:"rangePoints",a:arguments},a},a.rangeRoundPoints=function(u,e){2>arguments.length&&(e=0);var f=u[0],l=u[1],h=2>b.length?(f=l=Math.round((f+l)/2),0):(l-f)/(b.length-1+e)|0;return m=q(f+Math.round(h*e/2+(l-f-(b.length-
1+e)*h)/2),h),c=0,d={t:"rangeRoundPoints",a:arguments},a},a.rangeBands=function(u,e,f){2>arguments.length&&(e=0);3>arguments.length&&(f=e);var l=u[1]<u[0],h=u[l-0],g=(u[1-l]-h)/(b.length-e+2*f);return m=q(h+g*f,g),l&&m.reverse(),c=g*(1-e),d={t:"rangeBands",a:arguments},a},a.rangeRoundBands=function(u,e,f){2>arguments.length&&(e=0);3>arguments.length&&(f=e);var l=u[1]<u[0],h=u[l-0],g=u[1-l],n=Math.floor((g-h)/(b.length-e+2*f));return m=q(h+Math.round((g-h-(b.length-e)*n)/2),n),l&&m.reverse(),c=Math.round(n*
(1-e)),d={t:"rangeRoundBands",a:arguments},a},a.rangeBand=function(){return c},a.rangeExtent=function(){return lc(d.a[0])},a.copy=function(){return ag(b,d)},a.domain(b)}function bg(b,d){function a(){var k=0,c=d.length;for(u=[];++k<c;)u[k-1]=v.quantile(b,k/c);return q}function q(b){return isNaN(b=+b)?void 0:d[v.bisect(u,b)]}var u;return q.domain=function(d){return arguments.length?(b=d.map(g).filter(h).sort(f),a()):b},q.range=function(b){return arguments.length?(d=b,a()):d},q.quantiles=function(){return u},
q.invertExtent=function(a){return a=d.indexOf(a),0>a?[NaN,NaN]:[0<a?u[a-1]:b[0],a<u.length?u[a]:b[b.length-1]]},q.copy=function(){return bg(b,d)},a()}function cg(b,d,a){function q(d){return a[Math.max(0,Math.min(c,Math.floor(m*(d-b))))]}function u(){return m=a.length/(d-b),c=a.length-1,q}var m,c;return q.domain=function(a){return arguments.length?(b=+a[0],d=+a[a.length-1],u()):[b,d]},q.range=function(b){return arguments.length?(a=b,u()):a},q.invertExtent=function(d){return d=a.indexOf(d),d=0>d?NaN:
d/m+b,[d,d+1/m]},q.copy=function(){return cg(b,d,a)},u()}function dg(b,d){function a(k){return k>=k?d[v.bisect(b,k)]:void 0}return a.domain=function(d){return arguments.length?(b=d,a):b},a.range=function(b){return arguments.length?(d=b,a):d},a.invertExtent=function(a){return a=d.indexOf(a),[b[a-1],b[a]]},a.copy=function(){return dg(b,d)},a}function eg(b){function d(b){return+b}return d.invert=d,d.domain=d.range=function(a){return arguments.length?(b=a.map(d),d):b},d.ticks=function(d){return v.range.apply(v,
Ob(b,d))},d.tickFormat=function(d,a){return je(b,d,a)},d.copy=function(){return eg(b)},d}function $h(){return 0}function ai(b){return b.innerRadius}function bi(b){return b.outerRadius}function fg(b){return b.startAngle}function gg(b){return b.endAngle}function ci(b){return b&&b.padAngle}function gd(b,d,a,q){return 0<(b-a)*d-(d-q)*b?0:1}function hd(b,d,a,q,u){var m=b[0]-d[0],c=b[1]-d[1];u=(u?q:-q)/Math.sqrt(m*m+c*c);var c=u*c,m=-u*m,e=b[0]+c,f=b[1]+m,l=d[0]+c,h=d[1]+m;b=(e+l)/2;d=(f+h)/2;u=l-e;var g=
h-f,n=u*u+g*g;q=a-q;var h=e*h-l*f,p=(0>g?-1:1)*Math.sqrt(Math.max(0,q*q*n-h*h)),e=(h*g-u*p)/n,f=(-h*u-g*p)/n,l=(h*g+u*p)/n;u=(-h*u+g*p)/n;g=e-b;n=f-d;b=l-b;d=u-d;return g*g+n*n>b*b+d*d&&(e=l,f=u),[[e-c,f-m],[e*a/q,f*a/q]]}function hg(b){function d(d){function c(){l.push("M",m(b(h),e))}for(var f,l=[],h=[],g=-1,n=d.length,D=ya(a),p=ya(q);++g<n;)u.call(this,f=d[g],g)?h.push([+D.call(this,f,g),+p.call(this,f,g)]):h.length&&(c(),h=[]);return h.length&&c(),l.length?l.join(""):null}var a=fc,q=xc,u=wb,m=
rb,c=m.key,e=.7;return d.x=function(b){return arguments.length?(a=b,d):a},d.y=function(b){return arguments.length?(q=b,d):q},d.defined=function(b){return arguments.length?(u=b,d):u},d.interpolate=function(b){return arguments.length?(c="function"==typeof b?m=b:(m=le.get(b)||rb).key,d):c},d.tension=function(b){return arguments.length?(e=b,d):e},d}function rb(b){return 1<b.length?b.join("L"):b+"Z"}function ig(b){return b.join("L")+"Z"}function me(b){for(var d=0,a=b.length,q=b[0],u=[q[0],",",q[1]];++d<
a;)u.push("V",(q=b[d])[1],"H",q[0]);return u.join("")}function ne(b){for(var d=0,a=b.length,q=b[0],u=[q[0],",",q[1]];++d<a;)u.push("H",(q=b[d])[0],"V",q[1]);return u.join("")}function id(b,d){if(1>d.length||b.length!=d.length&&b.length!=d.length+2)return rb(b);var a=b.length!=d.length,q="",u=b[0],m=b[1],c=d[0],e=c,f=1;if(a&&(q+="Q"+(m[0]-2*c[0]/3)+","+(m[1]-2*c[1]/3)+","+m[0]+","+m[1],u=b[1],f=2),1<d.length)for(e=d[1],m=b[f],f++,q+="C"+(u[0]+c[0])+","+(u[1]+c[1])+","+(m[0]-e[0])+","+(m[1]-e[1])+","+
m[0]+","+m[1],u=2;u<d.length;u++,f++)m=b[f],e=d[u],q+="S"+(m[0]-e[0])+","+(m[1]-e[1])+","+m[0]+","+m[1];a&&(b=b[f],q+="Q"+(m[0]+2*e[0]/3)+","+(m[1]+2*e[1]/3)+","+b[0]+","+b[1]);return q}function oe(b,d){for(var a=[],q=(1-d)/2,u=b[0],m=b[1],c=1,e=b.length;++c<e;)d=u,u=m,m=b[c],a.push([q*(m[0]-d[0]),q*(m[1]-d[1])]);return a}function jg(b){if(3>b.length)return rb(b);var d=1,a=b.length,q=b[0],c=q[0],m=q[1],e=[c,c,c,(q=b[1])[0]],f=[m,m,m,q[1]],c=[c,",",m,"L",lb(Pb,e),",",lb(Pb,f)];for(b.push(b[a-1]);++d<=
a;)q=b[d],e.shift(),e.push(q[0]),f.shift(),f.push(q[1]),pe(c,e,f);return b.pop(),c.push("L",q),c.join("")}function lb(b,d){return b[0]*d[0]+b[1]*d[1]+b[2]*d[2]+b[3]*d[3]}function pe(b,d,a){b.push("C",lb(kg,d),",",lb(kg,a),",",lb(lg,d),",",lb(lg,a),",",lb(Pb,d),",",lb(Pb,a))}function qe(b,d){return(d[1]-b[1])/(d[0]-b[0])}function mg(b){for(var d,a,q,c=-1,m=b.length;++c<m;)d=b[c],a=d[0],q=d[1]-Ka,d[0]=a*Math.cos(q),d[1]=a*Math.sin(q);return b}function ng(b){function d(d){function l(){A.push("M",f(b(v),
n),g,h(b(t.reverse()),n),"Z")}for(var p,N,r,A=[],t=[],v=[],z=-1,w=d.length,L=ya(a),x=ya(c),O=a===q?function(){return N}:ya(q),M=c===m?function(){return r}:ya(m);++z<w;)e.call(this,p=d[z],z)?(t.push([N=+L.call(this,p,z),r=+x.call(this,p,z)]),v.push([+O.call(this,p,z),+M.call(this,p,z)])):t.length&&(l(),t=[],v=[]);return t.length&&l(),A.length?A.join(""):null}var a=fc,q=fc,c=0,m=xc,e=wb,f=rb,l=f.key,h=f,g="L",n=.7;return d.x=function(b){return arguments.length?(a=q=b,d):q},d.x0=function(b){return arguments.length?
(a=b,d):a},d.x1=function(b){return arguments.length?(q=b,d):q},d.y=function(b){return arguments.length?(c=m=b,d):m},d.y0=function(b){return arguments.length?(c=b,d):c},d.y1=function(b){return arguments.length?(m=b,d):m},d.defined=function(b){return arguments.length?(e=b,d):e},d.interpolate=function(b){return arguments.length?(l="function"==typeof b?f=b:(f=le.get(b)||rb).key,h=f.reverse||f,g=f.closed?"M":"L",d):l},d.tension=function(b){return arguments.length?(n=b,d):n},d}function di(b){return b.radius}
function og(b){return[b.x,b.y]}function ei(b){return function(){var d=b.apply(this,arguments),a=d[0],d=d[1]-Ka;return[a*Math.cos(d),a*Math.sin(d)]}}function fi(){return 64}function gi(){return"circle"}function pg(b){b=Math.sqrt(b/ca);return"M0,"+b+"A"+b+","+b+" 0 1,1 0,"+-b+"A"+b+","+b+" 0 1,1 0,"+b+"Z"}function qg(b){return function(){var d,a,q;(d=this[b])&&(q=d[a=d.active])&&(q.timer.c=null,q.timer.t=NaN,--d.count?delete d[a]:delete this[b],d.active+=.5,q.event&&q.event.interrupt.call(this,this.__data__,
q.index))}}function Fc(b,d,a){return Hc(b,Sa),b.namespace=d,b.id=a,b}function re(b,d,a,q){var c=b.id,m=b.namespace;return ja(b,"function"==typeof a?function(b,e,f){b[m][c].tween.set(d,q(a.call(b,b.__data__,e,f)))}:(a=q(a),function(b){b[m][c].tween.set(d,a)}))}function hi(b){return null==b&&(b=""),function(){this.textContent=b}}function se(b){return null==b?"__transition__":"__transition_"+b+"__"}function jd(b,d,a,q,c){function m(b){var d=A.delay;return h.t=d+l,b>=d?e(b-d):void(h.c=e)}function e(a){var k=
r.active,m=r[k];m&&(m.timer.c=null,m.timer.t=NaN,--r.count,delete r[k],m.event&&m.event.interrupt.call(b,b.__data__,m.index));for(var c in r)q>+c&&(k=r[c],k.timer.c=null,k.timer.t=NaN,--r.count,delete r[c]);h.c=f;Lc(function(){return h.c&&f(a||1)&&(h.c=null,h.t=NaN),1},0,l);r.active=q;A.event&&A.event.start.call(b,b.__data__,d);p=[];A.tween.forEach(function(a,k){(k=k.call(b,b.__data__,d))&&p.push(k)});n=A.ease;g=A.duration}function f(m){m/=g;for(var c=n(m),u=p.length;0<u;)p[--u].call(b,c);return 1<=
m?(A.event&&A.event.end.call(b,b.__data__,d),--r.count?delete r[q]:delete b[a],1):void 0}var l,h,g,n,p,r=b[a]||(b[a]={active:0,count:0}),A=r[q];A||(l=c.time,h=Lc(m,0,l),A=r[q]={tween:new t,time:l,timer:h,delay:c.delay,duration:c.duration,ease:c.ease,index:d},c=null,++r.count)}function ii(b,d,a){b.attr("transform",function(b){var c=d(b);return"translate("+(isFinite(c)?c:a(b))+",0)"})}function ji(b,d,a){b.attr("transform",function(b){var c=d(b);return"translate(0,"+(isFinite(c)?c:a(b))+")"})}function te(b){return b.toISOString()}
function ue(b,d,a){function q(d){return b(d)}function c(b,a){var k=(b[1]-b[0])/a,q=v.bisect(kd,k);return q==kd.length?[d.year,Ob(b.map(function(b){return b/31536E6}),a)[2]]:q?d[k/kd[q-1]<kd[q]/k?q-1:q]:[ki,Ob(b,a)[2]]}return q.invert=function(d){return $b(b.invert(d))},q.domain=function(d){return arguments.length?(b.domain(d),q):b.domain().map($b)},q.nice=function(b,d){function a(k){return!isNaN(k)&&!b.range(k,$b(+k+1),d).length}var k=q.domain(),e=lc(k),e=null==b?c(e,10):"number"==typeof b&&c(e,b);
return e&&(b=e[0],d=e[1]),q.domain(dd(k,1<d?{floor:function(d){for(;a(d=b.floor(d));)d=$b(d-1);return d},ceil:function(d){for(;a(d=b.ceil(d));)d=$b(+d+1);return d}}:b))},q.ticks=function(b,d){var a=lc(q.domain()),k=null==b?c(a,10):"number"==typeof b?c(a,b):!b.range&&[{range:b},d];return k&&(b=k[0],d=k[1]),b.range(a[0],$b(+a[1]+1),1>d?1:d)},q.tickFormat=function(){return a},q.copy=function(){return ue(b.copy(),d,a)},ke(q,b)}function $b(b){return new Date(b)}function li(b){return JSON.parse(b.responseText)}
function mi(b){var d=ab.createRange();return d.selectNode(ab.body),d.createContextualFragment(b.responseText)}var v={version:"3.5.17"},rg=[].slice,sb=function(b){return rg.call(b)},ab=this.document;if(ab)try{sb(ab.documentElement.childNodes)[0].nodeType}catch(b){sb=function(b){for(var a=b.length,q=Array(a);a--;)q[a]=b[a];return q}}if(Date.now||(Date.now=function(){return+new Date}),ab)try{ab.createElement("DIV").style.setProperty("opacity",0,"")}catch(b){var ld=this.Element.prototype,ni=ld.setAttribute,
oi=ld.setAttributeNS,sg=this.CSSStyleDeclaration.prototype,pi=sg.setProperty;ld.setAttribute=function(b,a){ni.call(this,b,a+"")};ld.setAttributeNS=function(b,a,q){oi.call(this,b,a,q+"")};sg.setProperty=function(b,a,q){pi.call(this,b,a+"",q)}}v.ascending=f;v.descending=function(b,d){return b>d?-1:d>b?1:d>=b?0:NaN};v.min=function(b,d){var a,q,c=-1,m=b.length;if(1===arguments.length){for(;++c<m;)if(null!=(q=b[c])&&q>=q){a=q;break}for(;++c<m;)null!=(q=b[c])&&a>q&&(a=q)}else{for(;++c<m;)if(null!=(q=d.call(b,
b[c],c))&&q>=q){a=q;break}for(;++c<m;)null!=(q=d.call(b,b[c],c))&&a>q&&(a=q)}return a};v.max=function(b,d){var a,q,c=-1,m=b.length;if(1===arguments.length){for(;++c<m;)if(null!=(q=b[c])&&q>=q){a=q;break}for(;++c<m;)null!=(q=b[c])&&q>a&&(a=q)}else{for(;++c<m;)if(null!=(q=d.call(b,b[c],c))&&q>=q){a=q;break}for(;++c<m;)null!=(q=d.call(b,b[c],c))&&q>a&&(a=q)}return a};v.extent=function(b,d){var a,q,c,m=-1,e=b.length;if(1===arguments.length){for(;++m<e;)if(null!=(q=b[m])&&q>=q){a=c=q;break}for(;++m<e;)null!=
(q=b[m])&&(a>q&&(a=q),q>c&&(c=q))}else{for(;++m<e;)if(null!=(q=d.call(b,b[m],m))&&q>=q){a=c=q;break}for(;++m<e;)null!=(q=d.call(b,b[m],m))&&(a>q&&(a=q),q>c&&(c=q))}return[a,c]};v.sum=function(b,d){var a,q=0,c=b.length,m=-1;if(1===arguments.length)for(;++m<c;)!isNaN(a=+b[m])&&(q+=a);else for(;++m<c;)!isNaN(a=+d.call(b,b[m],m))&&(q+=a);return q};v.mean=function(b,d){var a,q=0,c=b.length,m=-1,e=c;if(1===arguments.length)for(;++m<c;)isNaN(a=g(b[m]))?--e:q+=a;else for(;++m<c;)isNaN(a=g(d.call(b,b[m],m)))?
--e:q+=a;return e?q/e:void 0};v.quantile=function(b,d){var a=(b.length-1)*d+1;d=Math.floor(a);var q=+b[d-1];return(a-=d)?q+a*(b[d]-q):q};v.median=function(b,d){var a,q=[],c=b.length,m=-1;if(1===arguments.length)for(;++m<c;)!isNaN(a=g(b[m]))&&q.push(a);else for(;++m<c;)!isNaN(a=g(d.call(b,b[m],m)))&&q.push(a);return q.length?v.quantile(q.sort(f),.5):void 0};v.variance=function(b,d){var a,q,c=b.length,m=0,e=0,f=-1,l=0;if(1===arguments.length)for(;++f<c;)!isNaN(a=g(b[f]))&&(q=a-m,m+=q/++l,e+=q*(a-m));
else for(;++f<c;)!isNaN(a=g(d.call(b,b[f],f)))&&(q=a-m,m+=q/++l,e+=q*(a-m));return 1<l?e/(l-1):void 0};v.deviation=function(){var b=v.variance.apply(this,arguments);return b?Math.sqrt(b):b};var tg=e(f);v.bisectLeft=tg.left;v.bisect=v.bisectRight=tg.right;v.bisector=function(b){return e(1===b.length?function(d,a){return f(b(d),a)}:b)};v.shuffle=function(b,d,a){3>(m=arguments.length)&&(a=b.length,2>m&&(d=0));for(var q,c,m=a-d;m;)c=Math.random()*m--|0,q=b[m+d],b[m+d]=b[c+d],b[c+d]=q;return b};v.permute=
function(b,d){for(var a=d.length,q=Array(a);a--;)q[a]=b[d[a]];return q};v.pairs=function(b){for(var d=0,a=b.length-1,q=b[0],c=Array(0>a?0:a);a>d;)c[d]=[q,q=b[++d]];return c};v.transpose=function(b){if(!(c=b.length))return[];for(var d=-1,a=v.min(b,r),q=Array(a);++d<a;)for(var c,m=-1,e=q[d]=Array(c);++m<c;)e[m]=b[m][d];return q};v.zip=function(){return v.transpose(arguments)};v.keys=function(b){var d=[],a;for(a in b)d.push(a);return d};v.values=function(b){var d=[],a;for(a in b)d.push(b[a]);return d};
v.entries=function(b){var d=[],a;for(a in b)d.push({key:a,value:b[a]});return d};v.merge=function(b){var d,a,q,c=b.length;d=-1;for(var m=0;++d<c;)m+=b[d].length;for(a=Array(m);0<=--c;)for(q=b[c],d=q.length;0<=--d;)a[--m]=q[d];return a};var ea=Math.abs;v.range=function(b,d,a){if(3>arguments.length&&(a=1,2>arguments.length&&(d=b,b=0)),(d-b)/a===1/0)throw Error("infinite range");var q,c=[],m;q=ea(a);for(m=1;q*m%1;)m*=10;var e=-1;if(b*=m,d*=m,a*=m,0>a)for(;(q=b+a*++e)>d;)c.push(q/m);else for(;(q=b+a*
++e)<d;)c.push(q/m);return c};v.map=function(b,d){var a=new t;if(b instanceof t)b.forEach(function(b,d){a.set(b,d)});else if(Array.isArray(b)){var q,c=-1,m=b.length;if(1===arguments.length)for(;++c<m;)a.set(c,b[c]);else for(;++c<m;)a.set(d.call(b,q=b[c],c),q)}else for(c in b)a.set(c,b[c]);return a};var Lg="__proto__",Bd="\x00";l(t,{has:I,get:function(b){return this._[c(b)]},set:function(b,d){return this._[c(b)]=d},remove:x,keys:F,values:function(){var b=[],d;for(d in this._)b.push(this._[d]);return b},
entries:function(){var b=[],d;for(d in this._)b.push({key:n(d),value:this._[d]});return b},size:w,empty:C,forEach:function(b){for(var d in this._)b.call(this,n(d),this._[d])}});v.nest=function(){function b(d,e,f){if(f>=m.length)return q?q.call(c,e):a?e.sort(a):e;for(var l,h,g,n,p=-1,D=e.length,r=m[f++],A=new t;++p<D;)(n=A.get(l=r(h=e[p])))?n.push(h):A.set(l,[h]);return d?(h=d(),g=function(a,k){h.set(a,b(d,k,f))}):(h={},g=function(a,k){h[a]=b(d,k,f)}),A.forEach(g),h}function d(b,a){if(a>=m.length)return b;
var k=[],q=e[a++];return b.forEach(function(b,m){k.push({key:b,values:d(m,a)})}),q?k.sort(function(b,d){return q(b.key,d.key)}):k}var a,q,c={},m=[],e=[];return c.map=function(d,a){return b(a,d,0)},c.entries=function(a){return d(b(v.map,a,0),0)},c.key=function(b){return m.push(b),c},c.sortKeys=function(b){return e[m.length-1]=b,c},c.sortValues=function(b){return a=b,c},c.rollup=function(b){return q=b,c},c};v.set=function(b){var d=new B;if(b)for(var a=0,q=b.length;q>a;++a)d.add(b[a]);return d};l(B,
{has:I,add:function(b){return this._[c(b+="")]=!0,b},remove:x,values:F,size:w,empty:C,forEach:function(b){for(var d in this._)b.call(this,n(d))}});v.behavior={};v.rebind=function(b,d){for(var a,q=1,c=arguments.length;++q<c;)b[a=arguments[q]]=J(b,d,d[a]);return b};var Ge="webkit ms moz Moz o O".split(" ");v.dispatch=function(){for(var b=new G,d=-1,a=arguments.length;++d<a;)b[arguments[d]]=T(b);return b};G.prototype.on=function(b,d){var a=b.indexOf("."),q="";if(0<=a&&(q=b.slice(a+1),b=b.slice(0,a)),
b)return 2>arguments.length?this[b].on(q):this[b].on(q,d);if(2===arguments.length){if(null==d)for(b in this)this.hasOwnProperty(b)&&this[b].on(q,null);return this}};v.event=null;v.requote=function(b){return b.replace(qi,"\\$&")};var qi=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Hc={}.__proto__?function(b,d){b.__proto__=d}:function(b,d){for(var a in d)b[a]=d[a]},Cd=function(b,d){return d.querySelector(b)},Dd=function(b,d){return d.querySelectorAll(b)},Fd=function(b,d){var a=b.matches||b[p(b,"matchesSelector")];
return(Fd=function(b,d){return a.call(b,d)})(b,d)};"function"==typeof Sizzle&&(Cd=function(b,d){return Sizzle(b,d)[0]||null},Dd=Sizzle,Fd=Sizzle.matchesSelector);v.selection=function(){return v.select(ab.documentElement)};var va=v.selection.prototype=[];va.select=function(b){var d,a,q,c,m=[];b=W(b);for(var e=-1,f=this.length;++e<f;){m.push(d=[]);d.parentNode=(q=this[e]).parentNode;for(var l=-1,h=q.length;++l<h;)(c=q[l])?(d.push(a=b.call(c,c.__data__,l,e)),a&&"__data__"in c&&(a.__data__=c.__data__)):
d.push(null)}return ha(m)};va.selectAll=function(b){var d,a,q=[];b=Q(b);for(var c=-1,m=this.length;++c<m;)for(var e=this[c],f=-1,l=e.length;++f<l;)(a=e[f])&&(q.push(d=sb(b.call(a,a.__data__,f,c))),d.parentNode=a);return ha(q)};var Ed="http://www.w3.org/1999/xhtml",ve={svg:"http://www.w3.org/2000/svg",xhtml:Ed,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};v.ns={prefix:ve,qualify:function(b){var d=b.indexOf(":"),a=b;return 0<=
d&&"xmlns"!==(a=b.slice(0,d))&&(b=b.slice(d+1)),ve.hasOwnProperty(a)?{space:ve[a],local:b}:b}};va.attr=function(b,d){if(2>arguments.length){if("string"==typeof b){var a=this.node();return b=v.ns.qualify(b),b.local?a.getAttributeNS(b.space,b.local):a.getAttribute(b)}for(d in b)this.each(sa(d,b[d]));return this}return this.each(sa(b,d))};va.classed=function(b,d){if(2>arguments.length){if("string"==typeof b){var a=this.node(),c=(b=(b+"").trim().split(/^|\s+/)).length,e=-1;if(d=a.classList)for(;++e<c;){if(!d.contains(b[e]))return!1}else for(d=
a.getAttribute("class");++e<c;)if(!za(b[e]).test(d))return!1;return!0}for(d in b)this.each(oa(d,b[d]));return this}return this.each(oa(b,d))};va.style=function(b,d,k){var c=arguments.length;if(3>c){if("string"!=typeof b){2>c&&(d="");for(k in b)this.each(wa(k,b[k],d));return this}if(2>c)return c=this.node(),a(c).getComputedStyle(c,null).getPropertyValue(b);k=""}return this.each(wa(b,d,k))};va.property=function(b,d){if(2>arguments.length){if("string"==typeof b)return this.node()[b];for(d in b)this.each(Fa(d,
b[d]));return this}return this.each(Fa(b,d))};va.text=function(b){return arguments.length?this.each("function"==typeof b?function(){var d=b.apply(this,arguments);this.textContent=null==d?"":d}:null==b?function(){this.textContent=""}:function(){this.textContent=b}):this.node().textContent};va.html=function(b){return arguments.length?this.each("function"==typeof b?function(){var d=b.apply(this,arguments);this.innerHTML=null==d?"":d}:null==b?function(){this.innerHTML=""}:function(){this.innerHTML=b}):
this.node().innerHTML};va.append=function(b){return b=ta(b),this.select(function(){return this.appendChild(b.apply(this,arguments))})};va.insert=function(b,d){return b=ta(b),d=W(d),this.select(function(){return this.insertBefore(b.apply(this,arguments),d.apply(this,arguments)||null)})};va.remove=function(){return this.each(ma)};va.data=function(b,d){function a(b,k){var c,m,q,e=b.length,f=k.length,u=Math.min(e,f),n=Array(f),p=Array(f),r=Array(e);if(d){var A,u=new t,D=Array(e);for(c=-1;++c<e;)(m=b[c])&&
(u.has(A=d.call(m,m.__data__,c))?r[c]=m:u.set(A,m),D[c]=A);for(c=-1;++c<f;)(m=u.get(A=d.call(k,q=k[c],c)))?!0!==m&&(n[c]=m,m.__data__=q):p[c]={__data__:q},u.set(A,!0);for(c=-1;++c<e;)c in D&&!0!==u.get(D[c])&&(r[c]=b[c])}else{for(c=-1;++c<u;)m=b[c],q=k[c],m?(m.__data__=q,n[c]=m):p[c]={__data__:q};for(;f>c;++c)p[c]={__data__:k[c]};for(;e>c;++c)r[c]=b[c]}p.update=n;p.parentNode=n.parentNode=r.parentNode=b.parentNode;l.push(p);h.push(n);g.push(r)}var c,e,m=-1,f=this.length;if(!arguments.length){for(b=
Array(f=(c=this[0]).length);++m<f;)(e=c[m])&&(b[m]=e.__data__);return b}var l=Ga([]),h=ha([]),g=ha([]);if("function"==typeof b)for(;++m<f;)a(c=this[m],b.call(c,c.parentNode.__data__,m));else for(;++m<f;)a(c=this[m],b);return h.enter=function(){return l},h.exit=function(){return g},h};va.datum=function(b){return arguments.length?this.property("__data__",b):this.property("__data__")};va.filter=function(b){var d,a,c,e=[];"function"!=typeof b&&(b=ka(b));for(var m=0,f=this.length;f>m;m++){e.push(d=[]);
d.parentNode=(a=this[m]).parentNode;for(var l=0,h=a.length;h>l;l++)(c=a[l])&&b.call(c,c.__data__,l,m)&&d.push(c)}return ha(e)};va.order=function(){for(var b=-1,d=this.length;++b<d;)for(var a,c=this[b],e=c.length-1,m=c[e];0<=--e;)(a=c[e])&&(m&&m!==a.nextSibling&&m.parentNode.insertBefore(a,m),m=a);return this};va.sort=function(b){b=Z.apply(this,arguments);for(var d=-1,a=this.length;++d<a;)this[d].sort(b);return this.order()};va.each=function(b){return ja(this,function(d,a,c){b.call(d,d.__data__,a,
c)})};va.call=function(b){var d=sb(arguments);return b.apply(d[0]=this,d),this};va.empty=function(){return!this.node()};va.node=function(){for(var b=0,d=this.length;d>b;b++)for(var a=this[b],c=0,e=a.length;e>c;c++){var m=a[c];if(m)return m}return null};va.size=function(){var b=0;return ja(this,function(){++b}),b};var yb=[];v.selection.enter=Ga;v.selection.enter.prototype=yb;yb.append=va.append;yb.empty=va.empty;yb.node=va.node;yb.call=va.call;yb.size=va.size;yb.select=function(b){for(var d,a,c,e,
m,f=[],l=-1,h=this.length;++l<h;){c=(e=this[l]).update;f.push(d=[]);d.parentNode=e.parentNode;for(var g=-1,n=e.length;++g<n;)(m=e[g])?(d.push(c[g]=a=b.call(e.parentNode,m.__data__,g,l)),a.__data__=m.__data__):d.push(null)}return ha(f)};yb.insert=function(b,d){return 2>arguments.length&&(d=la(this)),va.insert.call(this,b,d)};v.select=function(b){var d;return"string"==typeof b?(d=[Cd(b,ab)],d.parentNode=ab.documentElement):(d=[b],d.parentNode=b&&(b.ownerDocument||b.document||b).documentElement),ha([d])};
v.selectAll=function(b){var d;return"string"==typeof b?(d=sb(Dd(b,ab)),d.parentNode=ab.documentElement):(d=sb(b),d.parentNode=null),ha([d])};va.on=function(b,d,a){var c=arguments.length;if(3>c){if("string"!=typeof b){2>c&&(d=!1);for(a in b)this.each(qa(a,b[a],d));return this}if(2>c)return(c=this.node()["__on"+b])&&c._;a=!1}return this.each(qa(b,d,a))};var Gd=v.map({mouseenter:"mouseover",mouseleave:"mouseout"});ab&&Gd.forEach(function(b){"on"+b in ab&&Gd.remove(b)});var Qb,Mg=0;v.mouse=function(b){return Ea(b,
ba())};var Hd=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;v.touch=function(b,d,a){if(3>arguments.length&&(a=d,d=ba().changedTouches),d)for(var c,e=0,m=d.length;m>e;++e)if((c=d[e]).identifier===a)return Ea(b,c)};v.behavior.drag=function(){function b(){this.on("mousedown.drag",e).on("touchstart.drag",m)}function d(b,d,a,m,e){return function(){var f,u=v.event.target.correspondingElement||v.event.target,l=this.parentNode,h=k.of(this,arguments),g=0,n=b(),p=".drag"+(null==n?"":"-"+n),r=
v.select(a(u)).on(m+p,function(){var b,a,k=d(l,n);k&&(b=k[0]-t[0],a=k[1]-t[1],g|=b|a,t=k,h({type:"drag",x:k[0]+f[0],y:k[1]+f[1],dx:b,dy:a}))}).on(e+p,function(){d(l,n)&&(r.on(m+p,null).on(e+p,null),A(g),h({type:"dragend"}))}),A=U(u),t=d(l,n);c?(f=c.apply(this,arguments),f=[f.x-t[0],f.y-t[1]]):f=[0,0];h({type:"dragstart"})}}var k=V(b,"drag","dragstart","dragend"),c=null,e=d(H,v.mouse,a,"mousemove","mouseup"),m=d(Wa,v.touch,z,"touchmove","touchend");return b.origin=function(d){return arguments.length?
(c=d,b):c},v.rebind(b,k,"on")};v.touches=function(b,d){return 2>arguments.length&&(d=ba().touches),d?sb(d).map(function(d){var a=Ea(b,d);return a.identifier=d.identifier,a}):[]};var P=1E-6,Zc=P*P,ca=Math.PI,hb=2*ca,ri=hb-P,Ka=ca/2,da=ca/180,Ha=180/ca,Gc=Math.SQRT2;v.interpolateZoom=function(b,d){var a,c=b[0],e=b[1],m=b[2];b=d[2];var f=d[0]-c,l=d[1]-e,h=f*f+l*l;if(Zc>h)a=Math.log(b/m)/Gc,b=function(b){return[c+b*f,e+b*l,m*Math.exp(Gc*b*a)]};else{var g=Math.sqrt(h);d=(b*b-m*m+4*h)/(4*m*g);b=(b*b-m*
m-4*h)/(4*b*g);var n=Math.log(Math.sqrt(d*d+1)-d);a=(Math.log(Math.sqrt(b*b+1)-b)-n)/Gc;b=function(b){b*=a;var d=Aa(n),h=m/(2*g),p,r=Gc*b+n;p=((r=Math.exp(2*r))-1)/(r+1);var A=n,r=((A=Math.exp(A))-1/A)/2,h=h*(d*p-r);return[c+h*f,e+h*l,m*d/Aa(Gc*b+n)]}}return b.duration=1E3*a,b};v.behavior.zoom=function(){function b(b){b.on(Oa,g).on(we+".zoom",p).on("dblclick.zoom",r).on(G,n)}function d(b){return[(b[0]-B.x)/B.k,(b[1]-B.y)/B.k]}function k(b){B.k=Math.max(I[0],Math.min(I[1],b))}function c(b,d){d=[d[0]*
B.k+B.x,d[1]*B.k+B.y];B.x+=b[0]-d[0];B.y+=b[1]-d[1]}function e(d,a,m,f){d.__chart__={x:B.x,y:B.y,k:B.k};k(Math.pow(2,f));c(t=a,m);d=v.select(d);0<Q&&(d=d.transition().duration(Q));d.call(b.event)}function m(){O&&O.domain(x.range().map(function(b){return(b-B.x)/B.k}).map(x.invert));C&&C.domain(M.range().map(function(b){return(b-B.y)/B.k}).map(M.invert))}function f(b){ra++||b({type:"zoomstart"})}function l(b){m();b({type:"zoom",scale:B.k,translate:[B.x,B.y]})}function h(b){--ra||(b({type:"zoomend"}),
t=null)}function g(){var b=this,k=Ta.of(b,arguments),m=0,e=v.select(a(b)).on(F,function(){m=1;c(v.mouse(b),u);l(k)}).on(J,function(){e.on(F,null).on(J,null);n(m);h(k)}),u=d(v.mouse(b)),n=U(b);md.call(b);f(k)}function n(){function b(){var a=v.touches(A);return r=B.k,a.forEach(function(b){b.identifier in z&&(z[b.identifier]=d(b))}),a}function a(){var d=v.event.target;v.select(d).on(O,m).on(M,p);C.push(d);for(var d=v.event.changedTouches,k=0,c=d.length;c>k;++k)z[d[k].identifier]=null;k=b();c=Date.now();
1===k.length?(500>c-L&&(d=k[0],e(A,d,z[d.identifier],Math.floor(Math.log(B.k)/Math.LN2)+1),K()),L=c):1<k.length&&(d=k[0],c=k[1],k=d[0]-c[0],d=d[1]-c[1],w=k*k+d*d)}function m(){var b,d,a,e,f=v.touches(A);md.call(A);for(var u=0,h=f.length;h>u;++u,e=null)if(a=f[u],e=z[a.identifier]){if(d)break;b=a;d=e}if(e){var g=(g=a[0]-b[0])*g+(g=a[1]-b[1])*g,f=w&&Math.sqrt(g/w);b=[(b[0]+a[0])/2,(b[1]+a[1])/2];d=[(d[0]+e[0])/2,(d[1]+e[1])/2];k(f*r)}L=null;c(b,d);l(t)}function p(){if(v.event.touches.length){for(var d=
v.event.changedTouches,a=0,k=d.length;k>a;++a)delete z[d[a].identifier];for(var c in z)return void b()}v.selectAll(C).on(x,null);ib.on(Oa,g).on(G,n);E();h(t)}var r,A=this,t=Ta.of(A,arguments),z={},w=0,x=".zoom-"+v.event.changedTouches[0].identifier,O="touchmove"+x,M="touchend"+x,C=[],ib=v.select(A),E=U(A);a();f(t);ib.on(Oa,null).on(G,a)}function p(){var b=Ta.of(this,arguments);w?clearTimeout(w):(md.call(this),A=d(t=z||v.mouse(this)),f(b));w=setTimeout(function(){w=null;h(b)},50);K();k(Math.pow(2,
.002*nd())*B.k);c(t,A);l(b)}function r(){var b=v.mouse(this),a=Math.log(B.k)/Math.LN2;e(this,b,d(b),v.event.shiftKey?Math.ceil(a)-1:Math.floor(a)+1)}var A,t,z,w,L,x,O,M,C,B={x:0,y:0,k:1},E=[960,500],I=ug,Q=250,ra=0,Oa="mousedown.zoom",F="mousemove.zoom",J="mouseup.zoom",G="touchstart.zoom",Ta=V(b,"zoomstart","zoom","zoomend");return we||(we="onwheel"in ab?(nd=function(){return-v.event.deltaY*(v.event.deltaMode?120:1)},"wheel"):"onmousewheel"in ab?(nd=function(){return v.event.wheelDelta},"mousewheel"):
(nd=function(){return-v.event.detail},"MozMousePixelScroll")),b.event=function(b){b.each(function(){var b=Ta.of(this,arguments),d=B;ac?v.select(this).transition().each("start.zoom",function(){B=this.__chart__||{x:0,y:0,k:1};f(b)}).tween("zoom:zoom",function(){var a=E[0],k=E[1],c=t?t[0]:a/2,m=t?t[1]:k/2,q=v.interpolateZoom([(c-B.x)/B.k,(m-B.y)/B.k,a/B.k],[(c-d.x)/d.k,(m-d.y)/d.k,a/d.k]);return function(d){d=q(d);var k=a/d[2];this.__chart__=B={x:c-d[0]*k,y:m-d[1]*k,k:k};l(b)}}).each("interrupt.zoom",
function(){h(b)}).each("end.zoom",function(){h(b)}):(this.__chart__=B,f(b),l(b),h(b))})},b.translate=function(d){return arguments.length?(B={x:+d[0],y:+d[1],k:B.k},m(),b):[B.x,B.y]},b.scale=function(d){return arguments.length?(B={x:B.x,y:B.y,k:null},k(+d),m(),b):B.k},b.scaleExtent=function(d){return arguments.length?(I=null==d?ug:[+d[0],+d[1]],b):I},b.center=function(d){return arguments.length?(z=d&&[+d[0],+d[1]],b):z},b.size=function(d){return arguments.length?(E=d&&[+d[0],+d[1]],b):E},b.duration=
function(d){return arguments.length?(Q=+d,b):Q},b.x=function(d){return arguments.length?(O=d,x=d.copy(),B={x:0,y:0,k:1},b):O},b.y=function(d){return arguments.length?(C=d,M=d.copy(),B={x:0,y:0,k:1},b):C},v.rebind(b,Ta,"on")};var nd,we,ug=[0,1/0];v.color=Ca;Ca.prototype.toString=function(){return this.rgb()+""};v.hsl=ia;var ye=ia.prototype=new Ca;ye.brighter=function(b){return b=Math.pow(.7,arguments.length?b:1),new ia(this.h,this.s,this.l/b)};ye.darker=function(b){return b=Math.pow(.7,arguments.length?
b:1),new ia(this.h,this.s,b*this.l)};ye.rgb=function(){return La(this.h,this.s,this.l)};v.hcl=Qa;var ze=Qa.prototype=new Ca;ze.brighter=function(b){return new Qa(this.h,this.c,Math.min(100,this.l+od*(arguments.length?b:1)))};ze.darker=function(b){return new Qa(this.h,this.c,Math.max(0,this.l-od*(arguments.length?b:1)))};ze.rgb=function(){return mb(this.h,this.c,this.l).rgb()};v.lab=Ra;var od=18,Ke=.95047,Le=1,Me=1.08883,Ae=Ra.prototype=new Ca;Ae.brighter=function(b){return new Ra(Math.min(100,this.l+
od*(arguments.length?b:1)),this.a,this.b)};Ae.darker=function(b){return new Ra(Math.max(0,this.l-od*(arguments.length?b:1)),this.a,this.b)};Ae.rgb=function(){return A(this.l,this.a,this.b)};v.rgb=Oa;var pd=Oa.prototype=new Ca;pd.brighter=function(b){b=Math.pow(.7,arguments.length?b:1);var d=this.r,a=this.g,c=this.b;return d||a||c?(d&&30>d&&(d=30),a&&30>a&&(a=30),c&&30>c&&(c=30),new Oa(Math.min(255,d/b),Math.min(255,a/b),Math.min(255,c/b))):new Oa(30,30,30)};pd.darker=function(b){return b=Math.pow(.7,
arguments.length?b:1),new Oa(b*this.r,b*this.g,b*this.b)};pd.hsl=function(){return Ie(this.r,this.g,this.b)};pd.toString=function(){return"#"+bc(this.r)+bc(this.g)+bc(this.b)};var Jc=v.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,
crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,
floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,
lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,
moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,
sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Jc.forEach(function(b,d){Jc.set(b,new Oa(d>>16,d>>8&255,255&d))});v.functor=ya;v.xhr=Jd(z);v.dsv=function(b,d){function a(b,k,m){3>arguments.length&&(m=k,k=null);var f=Kc(b,
d,null==k?c:e(k),m);return f.row=function(b){return arguments.length?f.response(null==(k=b)?c:e(b)):k},f}function c(b){return a.parse(b.responseText)}function e(b){return function(d){return a.parse(d.responseText,b)}}function m(d){return d.map(f).join(b)}function f(b){return l.test(b)?'"'+b.replace(/\"/g,'""')+'"':b}var l=new RegExp('["'+b+"\n]"),h=b.charCodeAt(0);return a.parse=function(b,d){var c;return a.parseRows(b,function(b,a){if(c)return c(b,a-1);var k=new Function("d","return {"+b.map(function(b,
d){return JSON.stringify(b)+": d["+d+"]"}).join(",")+"}");c=d?function(b,a){return d(k(b),a)}:k})},a.parseRows=function(b,d){function a(){if(u>=f)return q;if(c)return c=!1,m;var d=u;if(34===b.charCodeAt(d)){for(var k=d;k++<f;)if(34===b.charCodeAt(k)){if(34!==b.charCodeAt(k+1))break;++k}u=k+2;var e=b.charCodeAt(k+1);return 13===e?(c=!0,10===b.charCodeAt(k+2)&&++u):10===e&&(c=!0),b.slice(d+1,k).replace(/""/g,'"')}for(;f>u;){e=b.charCodeAt(u++);k=1;if(10===e)c=!0;else if(13===e)c=!0,10===b.charCodeAt(u)&&
(++u,++k);else if(e!==h)continue;return b.slice(d,u-k)}return b.slice(d)}for(var k,c,m={},q={},e=[],f=b.length,u=0,l=0;(k=a())!==q;){for(var g=[];k!==m&&k!==q;)g.push(k),k=a();d&&null==(g=d(g,l++))||e.push(g)}return e},a.format=function(d){if(Array.isArray(d[0]))return a.formatRows(d);var c=new B,m=[];return d.forEach(function(b){for(var d in b)c.has(d)||m.push(c.add(d))}),[m.map(f).join(b)].concat(d.map(function(d){return m.map(function(b){return f(d[b])}).join(b)})).join("\n")},a.formatRows=function(b){return b.map(m).join("\n")},
a};v.csv=v.dsv(",","text/csv");v.tsv=v.dsv("\t","text/tab-separated-values");var Nc,Mc,Oc,Pc,Ne=this[p(this,"requestAnimationFrame")]||function(b){setTimeout(b,17)};v.timer=function(){Lc.apply(this,arguments)};v.timer.flush=function(){Oe();Rb()};v.round=function(b,d){return d?Math.round(b*(d=Math.pow(10,d)))/d:Math.round(b)};var si="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ").map(function(b,d){var a=Math.pow(10,3*ea(8-d));return{scale:8<d?function(b){return b/a}:function(b){return b*a},symbol:b}});
v.formatPrefix=function(b,d){var a=0;return(b=+b)&&(0>b&&(b*=-1),d&&(b=v.round(b,Xa(b,d))),a=1+Math.floor(1E-12+Math.log(b)/Math.LN10),a=Math.max(-24,Math.min(24,3*Math.floor((a-1)/3)))),si[8+a/3]};var Pe=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Ng=v.map({b:function(b){return b.toString(2)},c:function(b){return String.fromCharCode(b)},o:function(b){return b.toString(8)},x:function(b){return b.toString(16)},X:function(b){return b.toString(16).toUpperCase()},g:function(b,
d){return b.toPrecision(d)},e:function(b,d){return b.toExponential(d)},f:function(b,d){return b.toFixed(d)},r:function(b,d){return(b=v.round(b,Xa(b,d))).toFixed(Math.max(0,Math.min(20,Xa(b*(1+1E-15),d))))}}),R=v.time={},Ya=Date;zb.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},
getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Eb.setUTCDate.apply(this._,arguments)},setDay:function(){Eb.setUTCDay.apply(this._,arguments)},setFullYear:function(){Eb.setUTCFullYear.apply(this._,arguments)},setHours:function(){Eb.setUTCHours.apply(this._,
arguments)},setMilliseconds:function(){Eb.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Eb.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Eb.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Eb.setUTCSeconds.apply(this._,arguments)},setTime:function(){Eb.setTime.apply(this._,arguments)}};var Eb=Date.prototype;R.year=Sb(function(b){return b=R.day(b),b.setMonth(0,1),b},function(b,d){b.setFullYear(b.getFullYear()+d)},function(b){return b.getFullYear()});R.years=
R.year.range;R.years.utc=R.year.utc.range;R.day=Sb(function(b){var d=new Ya(2E3,0);return d.setFullYear(b.getFullYear(),b.getMonth(),b.getDate()),d},function(b,d){b.setDate(b.getDate()+d)},function(b){return b.getDate()-1});R.days=R.day.range;R.days.utc=R.day.utc.range;R.dayOfYear=function(b){var d=R.year(b);return Math.floor((b-d-6E4*(b.getTimezoneOffset()-d.getTimezoneOffset()))/864E5)};"sunday monday tuesday wednesday thursday friday saturday".split(" ").forEach(function(b,d){d=7-d;var a=R[b]=
Sb(function(b){return(b=R.day(b)).setDate(b.getDate()-(b.getDay()+d)%7),b},function(b,d){b.setDate(b.getDate()+7*Math.floor(d))},function(b){var a=R.year(b).getDay();return Math.floor((R.dayOfYear(b)+(a+d)%7)/7)-(a!==d)});R[b+"s"]=a.range;R[b+"s"].utc=a.utc.range;R[b+"OfYear"]=function(b){var a=R.year(b).getDay();return Math.floor((R.dayOfYear(b)+(a+d)%7)/7)}});R.week=R.sunday;R.weeks=R.sunday.range;R.weeks.utc=R.sunday.utc.range;R.weekOfYear=R.sundayOfYear;var Qe={"-":"",_:" ",0:"0"},Ma=/^\s*\d+/,
Re=/^%/;v.locale=function(b){return{numberFormat:X(b),timeFormat:Og(b)}};var vg=v.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});
v.format=vg.numberFormat;v.geo={};db.prototype={s:0,t:0,add:function(b){nc(b,this.t,qd);nc(qd.s,this.s,this);this.s?this.t+=qd.t:this.s=qd.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var qd=new db;v.geo.stream=function(b,d){b&&wg.hasOwnProperty(b.type)?wg[b.type](b,d):nb(b,d)};var wg={Feature:function(b,d){nb(b.geometry,d)},FeatureCollection:function(b,d){b=b.features;for(var a=-1,c=b.length;++a<c;)nb(b[a].geometry,d)}},Se={Sphere:function(b,d){d.sphere()},Point:function(b,
d){b=b.coordinates;d.point(b[0],b[1],b[2])},MultiPoint:function(b,d){for(var a=b.coordinates,c=-1,e=a.length;++c<e;)b=a[c],d.point(b[0],b[1],b[2])},LineString:function(b,d){Fb(b.coordinates,d,0)},MultiLineString:function(b,d){b=b.coordinates;for(var a=-1,c=b.length;++a<c;)Fb(b[a],d,0)},Polygon:function(b,d){oc(b.coordinates,d)},MultiPolygon:function(b,d){b=b.coordinates;for(var a=-1,c=b.length;++a<c;)oc(b[a],d)},GeometryCollection:function(b,d){b=b.geometries;for(var a=-1,c=b.length;++a<c;)nb(b[a],
d)}};v.geo.area=function(b){return rd=0,v.geo.stream(b,gb),rd};var rd,Ub=new db,gb={sphere:function(){rd+=4*ca},point:H,lineStart:H,lineEnd:H,polygonStart:function(){Ub.reset();gb.lineStart=pc},polygonEnd:function(){var b=2*Ub;rd+=0>b?4*ca+b:b;gb.lineStart=gb.lineEnd=gb.point=H}};v.geo.bounds=function(){function b(b,d){O.push(B=[n=b,r=b]);p>d&&(p=d);d>A&&(A=d)}function d(d,a){var k=fb([d*da,a*da]);if(L){var c=ob(L,k),c=ob([c[1],-c[0],0],c);kb(c);var c=Sc(c),m=d-t,q=0<m?1:-1,e=c[0]*Ha*q,m=180<ea(m);
m^(e>q*t&&q*d>e)?(a=c[1]*Ha,a>A&&(A=a)):(e=(e+360)%360-180,m^(e>q*t&&q*d>e))?(a=-c[1]*Ha,p>a&&(p=a)):(p>a&&(p=a),a>A&&(A=a));m?t>d?l(n,d)>l(n,r)&&(r=d):l(d,r)>l(n,r)&&(n=d):r>=n?(n>d&&(n=d),d>r&&(r=d)):d>t?l(n,d)>l(n,r)&&(r=d):l(d,r)>l(n,r)&&(n=d)}else b(d,a);L=k;t=d}function a(){M.point=d}function c(){B[0]=n;B[1]=r;M.point=b;L=null}function e(b,a){if(L){var k=b-t;x+=180<ea(k)?k+(0<k?360:-360):k}else z=b,w=a;gb.point(b,a);d(b,a)}function m(){gb.lineStart()}function f(){e(z,w);gb.lineEnd();ea(x)>P&&
(n=-(r=180));B[0]=n;B[1]=r;L=null}function l(b,d){return 0>(d-=b)?d+360:d}function h(b,d){return b[0]-d[0]}function g(b,d){return d[0]<=d[1]?d[0]<=b&&b<=d[1]:b<d[0]||d[1]<b}var n,p,r,A,t,z,w,L,x,O,B,M={point:b,lineStart:a,lineEnd:c,polygonStart:function(){M.point=e;M.lineStart=m;M.lineEnd=f;x=0;gb.polygonStart()},polygonEnd:function(){gb.polygonEnd();M.point=b;M.lineStart=a;M.lineEnd=c;0>Ub?(n=-(r=180),p=-(A=90)):x>P?A=90:-P>x&&(p=-90);B[0]=n;B[1]=r}};return function(b){A=r=-(n=p=1/0);O=[];v.geo.stream(b,
M);if(b=O.length){O.sort(h);for(var d,a=1,k=O[0],c=[k];b>a;++a)d=O[a],g(d[0],k)||g(d[1],k)?(l(k[0],d[1])>l(k[0],k[1])&&(k[1]=d[1]),l(d[0],k[1])>l(k[0],k[1])&&(k[0]=d[0])):c.push(k=d);var m,q=-(1/0);b=c.length-1;a=0;for(k=c[b];b>=a;k=d,++a)d=c[a],(m=l(k[1],d[0]))>q&&(q=m,n=d[0],r=k[1])}return O=B=null,n===1/0||p===1/0?[[NaN,NaN],[NaN,NaN]]:[[n,p],[r,A]]}}();v.geo.centroid=function(b){rc=Uc=Vb=Wb=Cb=Ib=Jb=tb=dc=ec=Kb=0;v.geo.stream(b,pb);b=dc;var d=ec,a=Kb,c=b*b+d*d+a*a;return Zc>c&&(b=Ib,d=Jb,a=tb,
P>Uc&&(b=Vb,d=Wb,a=Cb),c=b*b+d*d+a*a,Zc>c)?[NaN,NaN]:[Math.atan2(d,b)*Ha,S(a/Math.sqrt(c))*Ha]};var rc,Uc,Vb,Wb,Cb,Ib,Jb,tb,dc,ec,Kb,pb={sphere:H,point:Md,lineStart:Te,lineEnd:ub,polygonStart:function(){pb.lineStart=Vc},polygonEnd:function(){pb.lineStart=Te}},ef=uc(wb,function(b){var d,a=NaN,c=NaN,e=NaN;return{lineStart:function(){b.lineStart();d=1},point:function(m,f){var l=0<m?ca:-ca,h=ea(m-a);if(ea(h-ca)<P)b.point(a,c=0<(c+f)/2?Ka:-Ka),b.point(e,c),b.lineEnd(),b.lineStart(),b.point(l,c),b.point(m,
c),d=0;else if(e!==l&&h>=ca){ea(a-e)<P&&(a-=e*P);ea(m-l)<P&&(m-=l*P);var h=a,g=c,n=m,p,r,A=Math.sin(h-n);c=ea(A)>P?Math.atan((Math.sin(g)*(r=Math.cos(f))*Math.sin(n)-Math.sin(f)*(p=Math.cos(g))*Math.sin(h))/(p*r*A)):(g+f)/2;b.point(e,c);b.lineEnd();b.lineStart();b.point(l,c);d=0}b.point(a=m,c=f);e=l},lineEnd:function(){b.lineEnd();a=c=NaN},clean:function(){return 2-d}}},function(b,d,a,c){null==b?(a*=Ka,c.point(-ca,a),c.point(0,a),c.point(ca,a),c.point(ca,0),c.point(ca,-a),c.point(0,-a),c.point(-ca,
-a),c.point(-ca,0),c.point(-ca,a)):ea(b[0]-d[0])>P?(b=b[0]<d[0]?ca:-ca,a=a*b/2,c.point(-b,a),c.point(0,a),c.point(b,a)):c.point(d[0],d[1])},[-ca,-ca/2]),Wc=1E9;v.geo.clipExtent=function(){var b,d,a,c,e,m,f={stream:function(b){return e&&(e.valid=!1),e=m(b),e.valid=!0,e},extent:function(l){return arguments.length?(m=We(b=+l[0][0],d=+l[0][1],a=+l[1][0],c=+l[1][1]),e&&(e.valid=!1,e=null),f):[[b,d],[a,c]]}};return f.extent([[0,0],[960,500]])};(v.geo.conicEqualArea=function(){return Od(Xe)}).raw=Xe;v.geo.albers=
function(){return v.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};v.geo.albersUsa=function(){function b(b){var m=b[0];b=b[1];return d=null,a(m,b),d||(c(m,b),d)||e(m,b),d}var d,a,c,e,m=v.geo.albers(),f=v.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=v.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),h={point:function(b,a){d=[b,a]}};return b.invert=function(b){var d=m.scale(),a=m.translate(),k=(b[0]-a[0])/
d,d=(b[1]-a[1])/d;return(.12<=d&&.234>d&&-.425<=k&&-.214>k?f:.166<=d&&.234>d&&-.214<=k&&-.115>k?l:m).invert(b)},b.stream=function(b){var d=m.stream(b),a=f.stream(b),k=l.stream(b);return{point:function(b,c){d.point(b,c);a.point(b,c);k.point(b,c)},sphere:function(){d.sphere();a.sphere();k.sphere()},lineStart:function(){d.lineStart();a.lineStart();k.lineStart()},lineEnd:function(){d.lineEnd();a.lineEnd();k.lineEnd()},polygonStart:function(){d.polygonStart();a.polygonStart();k.polygonStart()},polygonEnd:function(){d.polygonEnd();
a.polygonEnd();k.polygonEnd()}}},b.precision=function(d){return arguments.length?(m.precision(d),f.precision(d),l.precision(d),b):m.precision()},b.scale=function(d){return arguments.length?(m.scale(d),f.scale(.35*d),l.scale(d),b.translate(m.translate())):m.scale()},b.translate=function(d){if(!arguments.length)return m.translate();var g=m.scale(),n=+d[0],p=+d[1];return a=m.translate(d).clipExtent([[n-.455*g,p-.238*g],[n+.455*g,p+.238*g]]).stream(h).point,c=f.translate([n-.307*g,p+.201*g]).clipExtent([[n-
.425*g+P,p+.12*g+P],[n-.214*g-P,p+.234*g-P]]).stream(h).point,e=l.translate([n-.205*g,p+.212*g]).clipExtent([[n-.214*g+P,p+.166*g+P],[n-.115*g-P,p+.234*g-P]]).stream(h).point,b},b.scale(1070)};var Be,Qd,sd,td,ud,vd,Mb={point:H,lineStart:H,lineEnd:H,polygonStart:function(){Qd=0;Mb.lineStart=Wg},polygonEnd:function(){Mb.lineStart=Mb.lineEnd=Mb.point=H;Be+=ea(Qd/2)}},ti={point:function(b,d){sd>b&&(sd=b);b>ud&&(ud=b);td>d&&(td=d);d>vd&&(vd=d)},lineStart:H,lineEnd:H,polygonStart:H,polygonEnd:H},qb={point:Xb,
lineStart:Ze,lineEnd:$e,polygonStart:function(){qb.lineStart=Yg},polygonEnd:function(){qb.point=Xb;qb.lineStart=Ze;qb.lineEnd=$e}};v.geo.path=function(){function b(b){return b&&("function"==typeof f&&e.pointRadius(+f.apply(this,arguments)),m&&m.valid||(m=c(e)),v.geo.stream(b,m)),e.result()}var d,a,c,e,m,f=4.5;return b.area=function(b){return Be=0,v.geo.stream(b,c(Mb)),Be},b.centroid=function(b){return Vb=Wb=Cb=Ib=Jb=tb=dc=ec=Kb=0,v.geo.stream(b,c(qb)),Kb?[dc/Kb,ec/Kb]:tb?[Ib/tb,Jb/tb]:Cb?[Vb/Cb,Wb/
Cb]:[NaN,NaN]},b.bounds=function(b){return ud=vd=-(sd=td=1/0),v.geo.stream(b,c(ti)),[[sd,td],[ud,vd]]},b.projection=function(a){return arguments.length?(c=(d=a)?a.stream||$g(a):z,m=null,b):d},b.context=function(d){return arguments.length?(e=null==(a=d)?new Xg:new Zg(d),"function"!=typeof f&&e.pointRadius(f),m=null,b):a},b.pointRadius=function(d){return arguments.length?(f="function"==typeof d?d:(e.pointRadius(+d),+d),b):f},b.projection(v.geo.albersUsa()).context(null)};v.geo.transform=function(b){return{stream:function(d){d=
new df(d);for(var a in b)d[a]=b[a];return d}}};df.prototype={point:function(b,d){this.stream.point(b,d)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};v.geo.projection=Nb;v.geo.projectionMutator=Pd;(v.geo.equirectangular=function(){return Nb(vc)}).raw=vc.invert=vc;v.geo.rotation=function(b){function d(d){return d=b(d[0]*
da,d[1]*da),d[0]*=Ha,d[1]*=Ha,d}return b=Rd(b[0]%360*da,b[1]*da,2<b.length?b[2]*da:0),d.invert=function(d){return d=b.invert(d[0]*da,d[1]*da),d[0]*=Ha,d[1]*=Ha,d},d};ff.invert=vc;v.geo.circle=function(){function b(){var b="function"==typeof c?c.apply(this,arguments):c,d=Rd(-b[0]*da,-b[1]*da,0).invert,e=[];return a(null,null,1,{point:function(b,a){e.push(b=d(b,a));b[0]*=Ha;b[1]*=Ha}}),{type:"Polygon",coordinates:[e]}}var d,a,c=[0,0],e=6;return b.origin=function(d){return arguments.length?(c=d,b):c},
b.angle=function(c){return arguments.length?(a=Nd((d=+c)*da,e*da),b):d},b.precision=function(c){return arguments.length?(a=Nd(d*da,(e=+c)*da),b):e},b.angle(90)};v.geo.distance=function(b,d){var a,c=(d[0]-b[0])*da,e=b[1]*da,m=d[1]*da;d=Math.cos(c);b=Math.sin(e);var e=Math.cos(e),f=Math.sin(m),m=Math.cos(m);return Math.atan2(Math.sqrt((a=m*Math.sin(c))*a+(a=e*f-b*m*d)*a),b*f+e*m*d)};v.geo.graticule=function(){function b(){return{type:"MultiLineString",coordinates:d()}}function d(){return v.range(Math.ceil(m/
w)*w,e,w).map(r).concat(v.range(Math.ceil(g/L)*L,h,L).map(A)).concat(v.range(Math.ceil(c/t)*t,a,t).filter(function(b){return ea(b%w)>P}).map(n)).concat(v.range(Math.ceil(l/z)*z,f,z).filter(function(b){return ea(b%L)>P}).map(p))}var a,c,e,m,f,l,h,g,n,p,r,A,t=10,z=t,w=90,L=360,x=2.5;return b.lines=function(){return d().map(function(b){return{type:"LineString",coordinates:b}})},b.outline=function(){return{type:"Polygon",coordinates:[r(m).concat(A(h).slice(1),r(e).reverse().slice(1),A(g).reverse().slice(1))]}},
b.extent=function(d){return arguments.length?b.majorExtent(d).minorExtent(d):b.minorExtent()},b.majorExtent=function(d){return arguments.length?(m=+d[0][0],e=+d[1][0],g=+d[0][1],h=+d[1][1],m>e&&(d=m,m=e,e=d),g>h&&(d=g,g=h,h=d),b.precision(x)):[[m,g],[e,h]]},b.minorExtent=function(d){return arguments.length?(c=+d[0][0],a=+d[1][0],l=+d[0][1],f=+d[1][1],c>a&&(d=c,c=a,a=d),l>f&&(d=l,l=f,f=d),b.precision(x)):[[c,l],[a,f]]},b.step=function(d){return arguments.length?b.majorStep(d).minorStep(d):b.minorStep()},
b.majorStep=function(d){return arguments.length?(w=+d[0],L=+d[1],b):[w,L]},b.minorStep=function(d){return arguments.length?(t=+d[0],z=+d[1],b):[t,z]},b.precision=function(d){return arguments.length?(x=+d,n=lf(l,f,90),p=mf(c,a,x),r=lf(g,h,90),A=mf(m,e,x),b):x},b.majorExtent([[-180,-90+P],[180,90-P]]).minorExtent([[-180,-80-P],[180,80+P]])};v.geo.greatArc=function(){function b(){return{type:"LineString",coordinates:[d||c.apply(this,arguments),a||e.apply(this,arguments)]}}var d,a,c=Sd,e=Td;return b.distance=
function(){return v.geo.distance(d||c.apply(this,arguments),a||e.apply(this,arguments))},b.source=function(a){return arguments.length?(c=a,d="function"==typeof a?null:a,b):c},b.target=function(d){return arguments.length?(e=d,a="function"==typeof d?null:d,b):e},b.precision=function(){return arguments.length?b:0},b};v.geo.interpolate=function(b,d){return ah(b[0]*da,b[1]*da,d[0]*da,d[1]*da)};v.geo.length=function(b){return Ce=0,v.geo.stream(b,mc),Ce};var Ce,mc={sphere:H,point:H,lineStart:function(){function b(b,
m){var e=Math.sin(m*=da);m=Math.cos(m);var f=ea((b*=da)-d),l=Math.cos(f);Ce+=Math.atan2(Math.sqrt((f=m*Math.sin(f))*f+(f=c*e-a*m*l)*f),a*e+c*m*l);d=b;a=e;c=m}var d,a,c;mc.point=function(e,m){d=e*da;a=Math.sin(m*=da);c=Math.cos(m);mc.point=b};mc.lineEnd=function(){mc.point=mc.lineEnd=H}},lineEnd:H,polygonStart:H,polygonEnd:H},xg=wc(function(b){return Math.sqrt(2/(1+b))},function(b){return 2*Math.asin(b/2)});(v.geo.azimuthalEqualArea=function(){return Nb(xg)}).raw=xg;var yg=wc(function(b){return(b=
Math.acos(b))&&b/Math.sin(b)},z);(v.geo.azimuthalEquidistant=function(){return Nb(yg)}).raw=yg;(v.geo.conicConformal=function(){return Od(nf)}).raw=nf;(v.geo.conicEquidistant=function(){return Od(of)}).raw=of;var zg=wc(function(b){return 1/b},Math.atan);(v.geo.gnomonic=function(){return Nb(zg)}).raw=zg;Xc.invert=function(b,d){return[b,2*Math.atan(Math.exp(d))-Ka]};(v.geo.mercator=function(){return pf(Xc)}).raw=Xc;var Ag=wc(function(){return 1},Math.asin);(v.geo.orthographic=function(){return Nb(Ag)}).raw=
Ag;var Bg=wc(function(b){return 1/(1+b)},function(b){return 2*Math.atan(b)});(v.geo.stereographic=function(){return Nb(Bg)}).raw=Bg;Ud.invert=function(b,d){return[-d,2*Math.atan(Math.exp(b))-Ka]};(v.geo.transverseMercator=function(){var b=pf(Ud),d=b.center,a=b.rotate;return b.center=function(b){return b?d([-b[1],b[0]]):(b=d(),[b[1],-b[0]])},b.rotate=function(b){return b?a([b[0],b[1],2<b.length?b[2]+90:90]):(b=a(),[b[0],b[1],b[2]-90])},a([0,0,90])}).raw=Ud;v.geom={};v.geom.hull=function(b){function d(b){if(3>
b.length)return[];var d,e=ya(a),f=ya(c),l=b.length,h=[],g=[];for(d=0;l>d;d++)h.push([+e.call(this,b[d],d),+f.call(this,b[d],d),d]);h.sort(bh);for(d=0;l>d;d++)g.push([h[d][0],-h[d][1]]);var e=qf(h),g=qf(g),f=g[0]===e[0],l=g[g.length-1]===e[e.length-1],n=[];for(d=e.length-1;0<=d;--d)n.push(b[h[e[d]][2]]);for(d=+f;d<g.length-l;++d)n.push(b[h[g[d]][2]]);return n}var a=fc,c=xc;return arguments.length?d(b):(d.x=function(b){return arguments.length?(a=b,d):a},d.y=function(b){return arguments.length?(c=b,
d):c},d)};v.geom.polygon=function(b){return Hc(b,wd),b};var wd=v.geom.polygon.prototype=[];wd.area=function(){for(var b,d=-1,a=this.length,c=this[a-1],e=0;++d<a;)b=c,c=this[d],e+=b[1]*c[0]-b[0]*c[1];return.5*e};wd.centroid=function(b){var d,a,c=-1,e=this.length,m=0,f=0,l=this[e-1];for(arguments.length||(b=-1/(6*this.area()));++c<e;)d=l,l=this[c],a=d[0]*l[1]-l[0]*d[1],m+=(d[0]+l[0])*a,f+=(d[1]+l[1])*a;return[m*b,f*b]};wd.clip=function(b){for(var d,a,c,e,m,f,l=rf(b),h=-1,g=this.length-rf(this),n=this[g-
1];++h<g;){d=b.slice();b.length=0;e=this[h];m=d[(c=d.length-l)-1];for(a=-1;++a<c;)f=d[a],Vd(f,n,e)?(Vd(m,n,e)||b.push(Wd(m,f,n,e)),b.push(f)):Vd(m,n,e)&&b.push(Wd(m,f,n,e)),m=f;l&&b.push(b[0]);n=e}return b};var jc,Yb,hc,Yd,yc,tf=[],xf=[];vf.prototype.prepare=function(){for(var b,d=this.edges,a=d.length;a--;)b=d[a].edge,b.b&&b.a||d.splice(a,1);return d.sort(wf),d.length};ad.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?
this.edge.b:this.edge.a}};Zd.prototype={insert:function(b,d){var a,c;if(b){if(d.P=b,d.N=b.N,b.N&&(b.N.P=d),b.N=d,b.R){for(b=b.R;b.L;)b=b.L;b.L=d}else b.R=d;a=b}else this._?(b=zf(this._),d.P=null,d.N=b,b.P=b.L=d,a=b):(d.P=d.N=null,this._=d,a=null);d.L=d.R=null;d.U=a;d.C=!0;for(b=d;a&&a.C;)d=a.U,a===d.L?(c=d.R,c&&c.C?(a.C=c.C=!1,d.C=!0,b=d):(b===a.R&&(Ac(this,a),b=a,a=b.U),a.C=!1,d.C=!0,Bc(this,d))):(c=d.L,c&&c.C?(a.C=c.C=!1,d.C=!0,b=d):(b===a.L&&(Bc(this,a),b=a,a=b.U),a.C=!1,d.C=!0,Ac(this,d))),a=
b.U;this._.C=!1},remove:function(b){b.N&&(b.N.P=b.P);b.P&&(b.P.N=b.N);b.N=b.P=null;var d,a,c,e=b.U,m=b.L,f=b.R;if(a=m?f?zf(f):m:f,e?e.L===b?e.L=a:e.R=a:this._=a,m&&f?(c=a.C,a.C=b.C,a.L=m,m.U=a,a!==f?(e=a.U,a.U=b.U,b=a.R,e.L=b,a.R=f,f.U=a):(a.U=e,e=a,b=a.R)):(c=b.C,b=a),b&&(b.U=e),!c){if(b&&b.C)return void(b.C=!1);do{if(b===this._)break;if(b===e.L){if(d=e.R,d.C&&(d.C=!1,e.C=!0,Ac(this,e),d=e.R),d.L&&d.L.C||d.R&&d.R.C){d.R&&d.R.C||(d.L.C=!1,d.C=!0,Bc(this,d),d=e.R);d.C=e.C;e.C=d.R.C=!1;Ac(this,e);b=
this._;break}}else if(d=e.L,d.C&&(d.C=!1,e.C=!0,Bc(this,e),d=e.L),d.L&&d.L.C||d.R&&d.R.C){d.L&&d.L.C||(d.R.C=!1,d.C=!0,Ac(this,d),d=e.L);d.C=e.C;e.C=d.L.C=!1;Bc(this,e);b=this._;break}d.C=!0;b=e;e=e.U}while(!b.C);b&&(b.C=!1)}}};v.geom.voronoi=function(b){function d(b){var d=Array(b.length),c=l[0][0],m=l[0][1],e=l[1][0],f=l[1][1];return $d(a(b),l).cells.forEach(function(a,k){var q=a.edges;a=a.site;(d[k]=q.length?q.map(function(b){b=b.start();return[b.x,b.y]}):a.x>=c&&a.x<=e&&a.y>=m&&a.y<=f?[[c,f],
[e,f],[e,m],[c,m]]:[]).point=b[k]}),d}function a(b){return b.map(function(b,d){return{x:Math.round(m(b,d)/P)*P,y:Math.round(f(b,d)/P)*P,i:d}})}var c=fc,e=xc,m=c,f=e,l=xd;return b?d(b):(d.links=function(b){return $d(a(b)).edges.filter(function(b){return b.l&&b.r}).map(function(d){return{source:b[d.l.i],target:b[d.r.i]}})},d.triangles=function(b){var d=[];return $d(a(b)).cells.forEach(function(a,c){for(var k=a.site,m=a.edges.sort(wf),e=-1,f=m.length,q=m[f-1].edge,q=q.l===k?q.r:q.l;++e<f;)a=q,q=m[e].edge,
q=q.l===k?q.r:q.l,c<a.i&&c<q.i&&0>(k.x-q.x)*(a.y-k.y)-(k.x-a.x)*(q.y-k.y)&&d.push([b[c],b[a.i],b[q.i]])}),d},d.x=function(b){return arguments.length?(m=ya(c=b),d):c},d.y=function(b){return arguments.length?(f=ya(e=b),d):e},d.clipExtent=function(b){return arguments.length?(l=null==b?xd:b,d):l===xd?null:l},d.size=function(b){return arguments.length?d.clipExtent(b&&[[0,0],b]):l===xd?null:l&&l[1]},d)};var xd=[[-1E6,-1E6],[1E6,1E6]];v.geom.delaunay=function(b){return v.geom.voronoi().triangles(b)};v.geom.quadtree=
function(b,d,a,c,e){function m(b){function m(b,d,a,c,k,e,f,q){if(!isNaN(a)&&!isNaN(c))if(b.leaf){var l=b.x,h=b.y;if(null!=l){if(!(.01>ea(l-a)+ea(h-c))){var n=b.point;b.x=b.y=b.point=null;g(b,n,l,h,k,e,f,q)}g(b,d,a,c,k,e,f,q)}else b.x=a,b.y=c,b.point=d}else g(b,d,a,c,k,e,f,q)}function g(b,d,a,c,k,e,f,q){var l=.5*(k+f),h=.5*(e+q),n=a>=l,u=c>=h,p=u<<1|n;b.leaf=!1;b=b.nodes[p]||(b.nodes[p]=Af());n?k=l:f=l;u?e=h:q=h;m(b,d,a,c,k,e,f,q)}var n,p,r,A,t,v,z,w,L,x=ya(l),O=ya(h);if(null!=d)v=d,z=a,w=c,L=e;else if(w=
L=-(v=z=1/0),p=[],r=[],t=b.length,f)for(A=0;t>A;++A)n=b[A],n.x<v&&(v=n.x),n.y<z&&(z=n.y),n.x>w&&(w=n.x),n.y>L&&(L=n.y),p.push(n.x),r.push(n.y);else for(A=0;t>A;++A){var B=+x(n=b[A],A);n=+O(n,A);v>B&&(v=B);z>n&&(z=n);B>w&&(w=B);n>L&&(L=n);p.push(B);r.push(n)}B=w-v;n=L-z;B>n?L=z+B:w=v+n;var M=Af();if(M.add=function(b){m(M,b,+x(b,++A),+O(b,A),v,z,w,L)},M.visit=function(b){Cc(b,M,v,z,w,L)},M.find=function(b){return jh(M,b[0],b[1],v,z,w,L)},A=-1,null==d){for(;++A<t;)m(M,b[A],p[A],r[A],v,z,w,L);--A}else b.forEach(M.add);
return p=r=b=n=null,M}var f,l=fc,h=xc;return(f=arguments.length)?(l=hh,h=ih,3===f&&(e=a,c=d,a=d=0),m(b)):(m.x=function(b){return arguments.length?(l=b,m):l},m.y=function(b){return arguments.length?(h=b,m):h},m.extent=function(b){return arguments.length?(null==b?d=a=c=e=null:(d=+b[0][0],a=+b[0][1],c=+b[1][0],e=+b[1][1]),m):null==d?null:[[d,a],[c,e]]},m.size=function(b){return arguments.length?(null==b?d=a=c=e=null:(d=a=0,c=+b[0],e=+b[1]),m):null==d?null:[c-d,e-a]},m)};v.interpolateRgb=ae;v.interpolateObject=
Bf;v.interpolateNumber=Db;v.interpolateString=Cf;var be=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ce=new RegExp(be.source,"g");v.interpolate=Zb;v.interpolators=[function(b,d){var a=typeof d;return("string"===a?Jc.has(d.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(d)?ae:Cf:d instanceof Ca?ae:Array.isArray(d)?bd:"object"===a&&isNaN(d)?Bf:Db)(b,d)}];v.interpolateArray=bd;var Cg=function(){return z},ui=v.map({linear:Cg,poly:function(b){return function(d){return Math.pow(d,b)}},quad:function(){return lh},
cubic:function(){return mh},sin:function(){return oh},exp:function(){return ph},circle:function(){return qh},elastic:function(b,d){var a;return 2>arguments.length&&(d=.45),arguments.length?a=d/hb*Math.asin(1/b):(b=1,a=d/4),function(c){return 1+b*Math.pow(2,-10*c)*Math.sin((c-a)*hb/d)}},back:function(b){return b||(b=1.70158),function(d){return d*d*((b+1)*d-b)}},bounce:function(){return rh}}),vi=v.map({"in":z,out:Df,"in-out":Ef,"out-in":function(b){return Ef(Df(b))}});v.ease=function(b){var d=b.indexOf("-"),
a=0<=d?b.slice(0,d):b,d=0<=d?b.slice(d+1):"in";return a=ui.get(a)||Cg,d=vi.get(d)||z,kh(d(a.apply(null,rg.call(arguments,1))))};v.interpolateHcl=function(b,d){b=v.hcl(b);d=v.hcl(d);var a=b.h,c=b.c,e=b.l,m=d.h-a,f=d.c-c,l=d.l-e;return isNaN(f)&&(f=0,c=isNaN(c)?d.c:c),isNaN(m)?(m=0,a=isNaN(a)?d.h:a):180<m?m-=360:-180>m&&(m+=360),function(b){return mb(a+m*b,c+f*b,e+l*b)+""}};v.interpolateHsl=function(b,d){b=v.hsl(b);d=v.hsl(d);var a=b.h,c=b.s,e=b.l,m=d.h-a,f=d.s-c,l=d.l-e;return isNaN(f)&&(f=0,c=isNaN(c)?
d.s:c),isNaN(m)?(m=0,a=isNaN(a)?d.h:a):180<m?m-=360:-180>m&&(m+=360),function(b){return La(a+m*b,c+f*b,e+l*b)+""}};v.interpolateLab=function(b,d){b=v.lab(b);d=v.lab(d);var a=b.l,c=b.a,e=b.b,m=d.l-a,f=d.a-c,l=d.b-e;return function(b){return A(a+m*b,c+f*b,e+l*b)+""}};v.interpolateRound=Ff;v.transform=function(b){var d=ab.createElementNS(v.ns.prefix.svg,"g");return(v.transform=function(b){if(null!=b){d.setAttribute("transform",b);var a=d.transform.baseVal.consolidate()}return new Gf(a?a.matrix:wi)})(b)};
Gf.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var wi={a:1,b:0,c:0,d:1,e:0,f:0};v.interpolateTransform=If;v.layout={};v.layout.bundle=function(){return function(b){for(var d=[],a=-1,c=b.length;++a<c;)d.push(yh(b[a]));return d}};v.layout.chord=function(){function b(){var b,g,p,r,A,t={},z=[],w=v.range(m),L=[];a=[];c=[];b=0;for(r=-1;++r<m;){g=0;for(A=-1;++A<m;)g+=e[r][A];z.push(g);L.push(v.range(m));b+=g}f&&w.sort(function(b,
d){return f(z[b],z[d])});l&&L.forEach(function(b,d){b.sort(function(b,a){return l(e[d][b],e[d][a])})});b=(hb-n*m)/b;g=0;for(r=-1;++r<m;){p=g;for(A=-1;++A<m;){var x=w[r],B=L[x][A],M=e[x][B],O=g,fa=g+=M*b;t[x+"-"+B]={index:x,subindex:B,startAngle:O,endAngle:fa,value:M}}c[x]={index:x,startAngle:p,endAngle:g,value:z[x]};g+=n}for(r=-1;++r<m;)for(A=r-1;++A<m;)b=t[r+"-"+A],g=t[A+"-"+r],(b.value||g.value)&&a.push(b.value<g.value?{source:g,target:b}:{source:b,target:g});h&&d()}function d(){a.sort(function(b,
d){return h((b.source.value+b.target.value)/2,(d.source.value+d.target.value)/2)})}var a,c,e,m,f,l,h,g={},n=0;return g.matrix=function(b){return arguments.length?(m=(e=b)&&e.length,a=c=null,g):e},g.padding=function(b){return arguments.length?(n=b,a=c=null,g):n},g.sortGroups=function(b){return arguments.length?(f=b,a=c=null,g):f},g.sortSubgroups=function(b){return arguments.length?(l=b,a=null,g):l},g.sortChords=function(b){return arguments.length?(h=b,a&&d(),g):h},g.chords=function(){return a||b(),
a},g.groups=function(){return c||b(),c},g};v.layout.force=function(){function b(b){return function(d,a,c,k){if(d.point!==b){c=d.cx-b.x;var e=d.cy-b.y;a=k-a;k=c*c+e*e;if(k>a*a/x)return w>k&&(a=d.charge/k,b.px-=c*a,b.py-=e*a),!0;d.point&&k&&w>k&&(a=d.pointCharge/k,b.px-=c*a,b.py-=e*a)}return!d.charge}}function d(b){b.px=v.event.x;b.py=v.event.y;h.resume()}var a,c,e,m,f,l,h={},g=v.dispatch("start","tick","end"),n=[1,1],p=.9,r=xi,A=yi,t=-30,w=zi,L=.1,x=.64,B=[],M=[];return h.tick=function(){if(.005>(e*=
.99))return a=null,g.end({type:"end",alpha:e=0}),!0;var d,c,q,h,r,A,z,w,x=B.length,O=M.length;for(c=0;O>c;++c)q=M[c],d=q.source,h=q.target,z=h.x-d.x,w=h.y-d.y,(r=z*z+w*w)&&(r=e*f[c]*((r=Math.sqrt(r))-m[c])/r,z*=r,w*=r,h.x-=z*(A=d.weight+h.weight?d.weight/(d.weight+h.weight):.5),h.y-=w*A,d.x+=z*(A=1-A),d.y+=w*A);if((A=e*L)&&(z=n[0]/2,w=n[1]/2,c=-1,A))for(;++c<x;)q=B[c],q.x+=(z-q.x)*A,q.y+=(w-q.y)*A;if(t)for(Kf(d=v.geom.quadtree(B),e,l),c=-1;++c<x;)(q=B[c]).fixed||d.visit(b(q));for(c=-1;++c<x;)q=B[c],
q.fixed?(q.x=q.px,q.y=q.py):(q.x-=(q.px-(q.px=q.x))*p,q.y-=(q.py-(q.py=q.y))*p);g.tick({type:"tick",alpha:e})},h.nodes=function(b){return arguments.length?(B=b,h):B},h.links=function(b){return arguments.length?(M=b,h):M},h.size=function(b){return arguments.length?(n=b,h):n},h.linkDistance=function(b){return arguments.length?(r="function"==typeof b?b:+b,h):r},h.distance=h.linkDistance,h.linkStrength=function(b){return arguments.length?(A="function"==typeof b?b:+b,h):A},h.friction=function(b){return arguments.length?
(p=+b,h):p},h.charge=function(b){return arguments.length?(t="function"==typeof b?b:+b,h):t},h.chargeDistance=function(b){return arguments.length?(w=b*b,h):Math.sqrt(w)},h.gravity=function(b){return arguments.length?(L=+b,h):L},h.theta=function(b){return arguments.length?(x=b*b,h):Math.sqrt(x)},h.alpha=function(b){return arguments.length?(b=+b,e?0<b?e=b:(a.c=null,a.t=NaN,a=null,g.end({type:"end",alpha:e=0})):0<b&&(g.start({type:"start",alpha:e=b}),a=Lc(h.tick)),h):e},h.start=function(){function b(c,
m){if(!a){a=Array(k);for(l=0;k>l;++l)a[l]=[];for(l=0;e>l;++l){var f=M[l];a[f.source.index].push(f.target);a[f.target.index].push(f.source)}}for(var q=a[d],l=-1,h=q.length;++l<h;)if(!isNaN(f=q[l][c]))return f;return Math.random()*m}var d,a,c,k=B.length,e=M.length,q=n[0],g=n[1];for(d=0;k>d;++d)(c=B[d]).index=d,c.weight=0;for(d=0;e>d;++d)c=M[d],"number"==typeof c.source&&(c.source=B[c.source]),"number"==typeof c.target&&(c.target=B[c.target]),++c.source.weight,++c.target.weight;for(d=0;k>d;++d)c=B[d],
isNaN(c.x)&&(c.x=b("x",q)),isNaN(c.y)&&(c.y=b("y",g)),isNaN(c.px)&&(c.px=c.x),isNaN(c.py)&&(c.py=c.y);if(m=[],"function"==typeof r)for(d=0;e>d;++d)m[d]=+r.call(this,M[d],d);else for(d=0;e>d;++d)m[d]=r;if(f=[],"function"==typeof A)for(d=0;e>d;++d)f[d]=+A.call(this,M[d],d);else for(d=0;e>d;++d)f[d]=A;if(l=[],"function"==typeof t)for(d=0;k>d;++d)l[d]=+t.call(this,B[d],d);else for(d=0;k>d;++d)l[d]=t;return h.resume()},h.resume=function(){return h.alpha(.1)},h.stop=function(){return h.alpha(0)},h.drag=
function(){return c||(c=v.behavior.drag().origin(z).on("dragstart.force",zh).on("drag.force",d).on("dragend.force",Ah)),arguments.length?void this.on("mouseover.force",Bh).on("mouseout.force",Ch).call(c):c},v.rebind(h,g,"on")};var xi=20,yi=1,zi=1/0;v.layout.hierarchy=function(){function b(e){var m,f=[e],l=[];for(e.depth=0;null!=(m=f.pop());)if(l.push(m),(g=a.call(b,m,m.depth))&&(h=g.length)){for(var h,g,n;0<=--h;)f.push(n=g[h]),n.parent=m,n.depth=m.depth+1;c&&(m.value=0);m.children=g}else c&&(m.value=
+c.call(b,m,m.depth)||0),delete m.children;return xb(e,function(b){var a,k;d&&(a=b.children)&&a.sort(d);c&&(k=b.parent)&&(k.value+=b.value)}),l}var d=Gh,a=Eh,c=Fh;return b.sort=function(a){return arguments.length?(d=a,b):d},b.children=function(d){return arguments.length?(a=d,b):a},b.value=function(d){return arguments.length?(c=d,b):c},b.revalue=function(d){return c&&(Ec(d,function(b){b.children&&(b.value=0)}),xb(d,function(d){var a;d.children||(d.value=+c.call(b,d,d.depth)||0);(a=d.parent)&&(a.value+=
d.value)})),d},b};v.layout.partition=function(){function b(d,a,c,k){var e=d.children;if(d.x=a,d.y=d.depth*k,d.dx=c,d.dy=k,e&&(f=e.length)){var f,q,l=-1;for(c=d.value?c/d.value:0;++l<f;)b(q=e[l],a,d=q.value*c,k),a+=d}}function d(b){b=b.children;var a=0;if(b&&(c=b.length))for(var c,k=-1;++k<c;)a=Math.max(a,d(b[k]));return 1+a}function a(k,f){k=c.call(this,k,f);return b(k[0],0,e[0],e[1]/d(k[0])),k}var c=v.layout.hierarchy(),e=[1,1];return a.size=function(b){return arguments.length?(e=b,a):e},Dc(a,c)};
v.layout.pie=function(){function b(f){var l,h=f.length,g=f.map(function(a,c){return+d.call(b,a,c)}),n=+("function"==typeof c?c.apply(this,arguments):c),p=("function"==typeof e?e.apply(this,arguments):e)-n,r=Math.min(Math.abs(p)/h,+("function"==typeof m?m.apply(this,arguments):m)),A=r*(0>p?-1:1),t=v.sum(g),z=t?(p-h*A)/t:0,h=v.range(h),w=[];return null!=a&&h.sort(a===Dg?function(b,d){return g[d]-g[b]}:function(b,d){return a(f[b],f[d])}),h.forEach(function(b){w[b]={data:f[b],value:l=g[b],startAngle:n,
endAngle:n+=l*z+A,padAngle:r}}),w}var d=Number,a=Dg,c=0,e=hb,m=0;return b.value=function(a){return arguments.length?(d=a,b):d},b.sort=function(d){return arguments.length?(a=d,b):a},b.startAngle=function(d){return arguments.length?(c=d,b):c},b.endAngle=function(d){return arguments.length?(e=d,b):e},b.padAngle=function(d){return arguments.length?(m=d,b):m},b};var Dg={};v.layout.stack=function(){function b(l,h){if(!(r=l.length))return l;for(var g=l.map(function(a,c){return d.call(b,a,c)}),n=g.map(function(d){return d.map(function(d,
a){return[m.call(b,d,a),f.call(b,d,a)]})}),p=a.call(b,n,h),g=v.permute(g,p),n=v.permute(n,p),r,A,t=c.call(b,n,h),z=g[0].length,p=0;z>p;++p)for(e.call(b,g[0][p],A=t[p],n[0][p][1]),h=1;r>h;++h)e.call(b,g[h][p],A+=n[h-1][p][1],n[h][p][1]);return l}var d=z,a=de,c=ee,e=Jh,m=Hh,f=Ih;return b.values=function(a){return arguments.length?(d=a,b):d},b.order=function(d){return arguments.length?(a="function"==typeof d?d:Ai.get(d)||de,b):a},b.offset=function(d){return arguments.length?(c="function"==typeof d?d:
Bi.get(d)||ee,b):c},b.x=function(d){return arguments.length?(m=d,b):m},b.y=function(d){return arguments.length?(f=d,b):f},b.out=function(d){return arguments.length?(e=d,b):e},b};var Ai=v.map({"inside-out":function(b){var d,a=b.length,c=b.map(Kh),e=b.map(Lh),m=v.range(a).sort(function(b,d){return c[b]-c[d]}),f=0,l=0,h=[],g=[];for(b=0;a>b;++b)d=m[b],l>f?(f+=e[d],h.push(d)):(l+=e[d],g.push(d));return g.reverse().concat(h)},reverse:function(b){return v.range(b.length).reverse()},"default":de}),Bi=v.map({silhouette:function(b){var d,
a,c,e=b.length,m=b[0].length,f=[],l=0,h=[];for(a=0;m>a;++a){for(c=d=0;e>d;d++)c+=b[d][a][1];c>l&&(l=c);f.push(c)}for(a=0;m>a;++a)h[a]=(l-f[a])/2;return h},wiggle:function(b){var d,a,c,e,m,f,l,h,g,n=b.length,p=b[0],r=p.length,A=[];A[0]=h=g=0;for(a=1;r>a;++a){for(e=d=0;n>d;++d)e+=b[d][a][1];m=d=0;for(l=p[a][0]-p[a-1][0];n>d;++d){c=0;for(f=(b[d][a][1]-b[d][a-1][1])/(2*l);d>c;++c)f+=(b[c][a][1]-b[c][a-1][1])/l;m+=f*b[d][a][1]}A[a]=h-=e?m/e*l:0;g>h&&(g=h)}for(a=0;r>a;++a)A[a]-=g;return A},expand:function(b){var d,
a,c,e=b.length,m=b[0].length,f=1/e,l=[];for(a=0;m>a;++a){for(c=d=0;e>d;d++)c+=b[d][a][1];if(c)for(d=0;e>d;d++)b[d][a][1]/=c;else for(d=0;e>d;d++)b[d][a][1]=f}for(a=0;m>a;++a)l[a]=0;return l},zero:ee});v.layout.histogram=function(){function b(b,f){var l,h,g=[],n=b.map(a,this),p=c.call(this,n,f),A=e.call(this,p,n,f);f=-1;for(var r=n.length,t=A.length-1,z=d?1:1/r;++f<t;)l=g[f]=[],l.dx=A[f+1]-(l.x=A[f]),l.y=0;if(0<t)for(f=-1;++f<r;)h=n[f],h>=p[0]&&h<=p[1]&&(l=g[v.bisect(A,h,1,t)-1],l.y+=z,l.push(b[f]));
return g}var d=!0,a=Number,c=Oh,e=Nh;return b.value=function(d){return arguments.length?(a=d,b):a},b.range=function(d){return arguments.length?(c=ya(d),b):c},b.bins=function(d){return arguments.length?(e="number"==typeof d?function(b){return Lf(b,d)}:ya(d),b):e},b.frequency=function(a){return arguments.length?(d=!!a,b):d},b};v.layout.pack=function(){function b(b,f){b=a.call(this,b,f);f=b[0];var l=e[0],h=e[1],g=null==d?Math.sqrt:"function"==typeof d?d:function(){return d};if(f.x=f.y=0,xb(f,function(b){b.r=
+g(b.value)}),xb(f,Of),c){var n=c*(d?1:Math.max(2*f.r/l,2*f.r/h))/2;xb(f,function(b){b.r+=n});xb(f,Of);xb(f,function(b){b.r-=n})}return Qf(f,l/2,h/2,d?1:1/Math.max(2*f.r/l,2*f.r/h)),b}var d,a=v.layout.hierarchy().sort(Ph),c=0,e=[1,1];return b.size=function(d){return arguments.length?(e=d,b):e},b.radius=function(a){return arguments.length?(d=null==a||"function"==typeof a?a:+a,b):d},b.padding=function(d){return arguments.length?(c=+d,b):c},Dc(b,a)};v.layout.tree=function(){function b(b,n){b=f.call(this,
b,n);n=b[0];var p=d(n);if(xb(p,a),p.parent.m=-p.z,Ec(p,c),g)Ec(n,e);else{var A=n,r=n,t=n;Ec(n,function(b){b.x<A.x&&(A=b);b.x>r.x&&(r=b);b.depth>t.depth&&(t=b)});var z=l(A,r)/2-A.x,v=h[0]/(r.x+l(r,A)/2+z),w=h[1]/(t.depth||1);Ec(n,function(b){b.x=(b.x+z)*v;b.y=b.depth*w})}return b}function d(b){for(var d={A:null,children:[b]},a=[d];null!=(b=a.pop());)for(var c,k=b.children,e=0,f=k.length;f>e;++e)a.push((k[e]=c={_:k[e],parent:b,children:(c=k[e].children)&&c.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,
t:null,i:e}).a=c);return d.children[0]}function a(b){var d=b.children,c=b.parent.children,k=b.i?c[b.i-1]:null;if(d.length){for(var e,f=0,m=0,h=b.children,q=h.length;0<=--q;)e=h[q],e.z+=f,e.m+=f,f+=e.s+(m+=e.c);d=(d[0].z+d[d.length-1].z)/2;k?(b.z=k.z+l(b._,k._),b.m=b.z-d):b.z=d}else k&&(b.z=k.z+l(b._,k._));d=b.parent;c=b.parent.A||c[0];if(k){for(var f=e=b,m=k,h=e.parent.children[0],q=e.m,g=f.m,n=m.m,p=h.m;m=he(m),e=ge(e),m&&e;){h=ge(h);f=he(f);f.a=b;k=m.z+n-e.z-q+l(m._,e._);if(0<k){var A=m.a.parent===
b.parent?m.a:c,r=b,u=k,t=u/(r.i-A.i);r.c-=t;r.s+=u;A.c+=t;r.z+=u;r.m+=u;q+=k;g+=k}n+=m.m;q+=e.m;p+=h.m;g+=f.m}m&&!he(f)&&(f.t=m,f.m+=n-g);e&&!ge(h)&&(h.t=e,h.m+=q-p,c=b)}d.A=c}function c(b){b._.x=b.z+b.parent.m;b.m+=b.parent.m}function e(b){b.x*=h[0];b.y=b.depth*h[1]}var f=v.layout.hierarchy().sort(null).value(null),l=Rf,h=[1,1],g=null;return b.separation=function(d){return arguments.length?(l=d,b):l},b.size=function(d){return arguments.length?(g=null==(h=d)?e:null,b):g?null:h},b.nodeSize=function(d){return arguments.length?
(g=null==(h=d)?null:e,b):g?h:null},Dc(b,f)};v.layout.cluster=function(){function b(b,f){var l;b=d.call(this,b,f);var h=b[0],g=0;xb(h,function(b){var d=b.children;d&&d.length?(b.x=Th(d),b.y=Sh(d)):(b.x=l?g+=a(b,l):0,b.y=0,l=b)});f=Sf(h);var n=Tf(h),p=f.x-a(f,n)/2,r=n.x+a(n,f)/2;return xb(h,e?function(b){b.x=(b.x-h.x)*c[0];b.y=(h.y-b.y)*c[1]}:function(b){b.x=(b.x-p)/(r-p)*c[0];b.y=(1-(h.y?b.y/h.y:1))*c[1]}),b}var d=v.layout.hierarchy().sort(null).value(null),a=Rf,c=[1,1],e=!1;return b.separation=function(d){return arguments.length?
(a=d,b):a},b.size=function(d){return arguments.length?(e=null==(c=d),b):e?null:c},b.nodeSize=function(d){return arguments.length?(e=null!=(c=d),b):e?c:null},Dc(b,d)};v.layout.treemap=function(){function b(b,d){for(var a,c,k=-1,e=b.length;++k<e;)c=(a=b[k]).value*(0>d?0:d),a.area=isNaN(c)||0>=c?0:c}function d(a){var k=a.children;if(k&&k.length){var e,f=p(a),m=[],l=k.slice(),h=1/0,g="slice"===A?f.dx:"dice"===A?f.dy:"slice-dice"===A?1&a.depth?f.dy:f.dx:Math.min(f.dx,f.dy);b(l,f.dx*f.dy/a.value);for(m.area=
0;0<(a=l.length);){m.push(a=l[a-1]);m.area+=a.area;var n;if(!(n="squarify"!==A)){a=g;e=void 0;var r=m.area;n=0;for(var u=1/0,z=-1,v=m.length;++z<v;)(e=m[z].area)&&(u>e&&(u=e),e>n&&(n=e));n=(e=(r*=r,a*=a,r?Math.max(a*n*t/r,r/(a*u*t)):1/0))<=h}n?(l.pop(),h=e):(m.area-=m.pop().area,c(m,g,f,!1),g=Math.min(f.dx,f.dy),m.length=m.area=0,h=1/0)}m.length&&(c(m,g,f,!0),m.length=m.area=0);k.forEach(d)}}function a(d){var e=d.children;if(e&&e.length){var f=p(d),m=e.slice(),l=[];b(m,f.dx*f.dy/d.value);for(l.area=
0;d=m.pop();)l.push(d),l.area+=d.area,null!=d.z&&(c(l,d.z?f.dx:f.dy,f,!m.length),l.length=l.area=0);e.forEach(a)}}function c(b,d,a,k){var e,f=-1,m=b.length,l=a.x,q=a.y,g=d?h(b.area/d):0;if(d==a.dx){for((k||g>a.dy)&&(g=a.dy);++f<m;)e=b[f],e.x=l,e.y=q,e.dy=g,l+=e.dx=Math.min(a.x+a.dx-l,g?h(e.area/g):0);e.z=!0;e.dx+=a.x+a.dx-l;a.y+=g;a.dy-=g}else{for((k||g>a.dx)&&(g=a.dx);++f<m;)e=b[f],e.x=l,e.y=q,e.dx=g,q+=e.dy=Math.min(a.y+a.dy-q,g?h(e.area/g):0);e.z=!1;e.dy+=a.y+a.dy-q;a.x+=g;a.dx-=g}}function e(c){c=
f||l(c);var h=c[0];return h.x=h.y=0,h.value?(h.dx=g[0],h.dy=g[1]):h.dx=h.dy=0,f&&l.revalue(h),b([h],h.dx*h.dy/h.value),(f?a:d)(h),r&&(f=c),c}var f,l=v.layout.hierarchy(),h=Math.round,g=[1,1],n=null,p=ie,r=!1,A="squarify",t=.5*(1+Math.sqrt(5));return e.size=function(b){return arguments.length?(g=b,e):g},e.padding=function(b){function d(a){var c=b.call(e,a,a.depth);return null==c?ie(a):Uf(a,"number"==typeof c?[c,c,c,c]:c)}function a(d){return Uf(d,b)}if(!arguments.length)return n;var c;return p=null==
(n=b)?ie:"function"==(c=typeof b)?d:"number"===c?(b=[b,b,b,b],a):a,e},e.round=function(b){return arguments.length?(h=b?Math.round:Number,e):h!=Number},e.sticky=function(b){return arguments.length?(r=b,f=null,e):r},e.ratio=function(b){return arguments.length?(t=b,e):t},e.mode=function(b){return arguments.length?(A=b+"",e):A},Dc(e,l)};v.random={normal:function(b,d){var a=arguments.length;return 2>a&&(d=1),1>a&&(b=0),function(){var a,c;do a=2*Math.random()-1,c=2*Math.random()-1,c=a*a+c*c;while(!c||1<
c);return b+d*a*Math.sqrt(-2*Math.log(c)/c)}},logNormal:function(){var b=v.random.normal.apply(v,arguments);return function(){return Math.exp(b())}},bates:function(b){var d=v.random.irwinHall(b);return function(){return d()/b}},irwinHall:function(b){return function(){for(var d=0,a=0;b>a;a++)d+=Math.random();return d}}};v.scale={};var Vh={floor:z,ceil:z};v.scale.linear=function(){return Wf([0,1],[0,1],Zb,!1)};var Yh={s:1,g:1,p:1,r:1,e:1};v.scale.log=function(){return Yf(v.scale.linear().domain([0,
1]),10,!0,[1,10])};var Zf=v.format(".0e"),Zh={floor:function(b){return-Math.ceil(-b)},ceil:function(b){return-Math.floor(-b)}};v.scale.pow=function(){return $f(v.scale.linear(),1,[0,1])};v.scale.sqrt=function(){return v.scale.pow().exponent(.5)};v.scale.ordinal=function(){return ag([],{t:"range",a:[[]]})};v.scale.category10=function(){return v.scale.ordinal().range(Ci)};v.scale.category20=function(){return v.scale.ordinal().range(Di)};v.scale.category20b=function(){return v.scale.ordinal().range(Ei)};
v.scale.category20c=function(){return v.scale.ordinal().range(Fi)};var Ci=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Ic),Di=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Ic),Ei=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,
10834324,13528509,14589654].map(Ic),Fi=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Ic);v.scale.quantile=function(){return bg([],[])};v.scale.quantize=function(){return cg(0,1,[0,1])};v.scale.threshold=function(){return dg([.5],[0,1])};v.scale.identity=function(){return eg([0,1])};v.svg={};v.svg.arc=function(){function b(){var b=Math.max(0,+a.apply(this,arguments)),
n=Math.max(0,+c.apply(this,arguments)),p=l.apply(this,arguments)-Ka,r=h.apply(this,arguments)-Ka,A=Math.abs(r-p),t=p>r?0:1;if(b>n&&(z=n,n=b,b=z),A>=ri)return d(n,t)+(b?d(b,1-t):"")+"Z";var z,v,w,L,x,B,M,O,U,C,E=0;M=0;var I=[];((L=(+g.apply(this,arguments)||0)/2)&&(w=f===yd?Math.sqrt(b*b+n*n):+f.apply(this,arguments),t||(M*=-1),n&&(M=S(w/n*Math.sin(L))),b&&(E=S(w/b*Math.sin(L)))),n)?(w=n*Math.cos(p+M),L=n*Math.sin(p+M),x=n*Math.cos(r-M),B=n*Math.sin(r-M),v=Math.abs(r-p-2*M)<=ca?0:1,M&&gd(w,L,x,B)===
t^v&&(x=(p+r)/2,w=n*Math.cos(x),L=n*Math.sin(x),x=B=null)):w=L=0;if(b){M=b*Math.cos(r-E);O=b*Math.sin(r-E);U=b*Math.cos(p+E);C=b*Math.sin(p+E);var Q=Math.abs(p-r+2*E)<=ca?0:1;E&&gd(M,O,U,C)===1-t^Q&&(U=(p+r)/2,M=b*Math.cos(U),O=b*Math.sin(U),U=C=null)}else M=O=0;A>P&&.001<(z=Math.min(Math.abs(n-b)/2,+e.apply(this,arguments)))?(v=n>b^t?0:1,Q=p=z,ca>A&&(A=null==U?[M,O]:null==x?[w,L]:Wd([w,L],[U,C],[x,B],[M,O]),Q=w-A[0],p=L-A[1],r=x-A[0],E=B-A[1],p=1/Math.sin(Math.acos((Q*r+p*E)/(Math.sqrt(Q*Q+p*p)*
Math.sqrt(r*r+E*E)))/2),A=Math.sqrt(A[0]*A[0]+A[1]*A[1]),Q=Math.min(z,(b-A)/(p-1)),p=Math.min(z,(n-A)/(p+1))),null!=x?(A=hd(null==U?[M,O]:[U,C],[w,L],n,p,t),r=hd([x,B],[M,O],n,p,t),z===p?I.push("M",A[0],"A",p,",",p," 0 0,",v," ",A[1],"A",n,",",n," 0 ",1-t^gd(A[1][0],A[1][1],r[1][0],r[1][1]),",",t," ",r[1],"A",p,",",p," 0 0,",v," ",r[0]):I.push("M",A[0],"A",p,",",p," 0 1,",v," ",r[0])):I.push("M",w,",",L),null!=U?(n=hd([w,L],[U,C],b,-Q,t),x=hd([M,O],null==x?[w,L]:[x,B],b,-Q,t),z===Q?I.push("L",x[0],
"A",Q,",",Q," 0 0,",v," ",x[1],"A",b,",",b," 0 ",t^gd(x[1][0],x[1][1],n[1][0],n[1][1]),",",1-t," ",n[1],"A",Q,",",Q," 0 0,",v," ",n[0]):I.push("L",x[0],"A",Q,",",Q," 0 0,",v," ",n[0])):I.push("L",M,",",O)):(I.push("M",w,",",L),null!=x&&I.push("A",n,",",n," 0 ",v,",",t," ",x,",",B),I.push("L",M,",",O),null!=U&&I.push("A",b,",",b," 0 ",Q,",",1-t," ",U,",",C));return I.push("Z"),I.join("")}function d(b,d){return"M0,"+b+"A"+b+","+b+" 0 1,"+d+" 0,"+-b+"A"+b+","+b+" 0 1,"+d+" 0,"+b}var a=ai,c=bi,e=$h,f=
yd,l=fg,h=gg,g=ci;return b.innerRadius=function(d){return arguments.length?(a=ya(d),b):a},b.outerRadius=function(d){return arguments.length?(c=ya(d),b):c},b.cornerRadius=function(d){return arguments.length?(e=ya(d),b):e},b.padRadius=function(d){return arguments.length?(f=d==yd?yd:ya(d),b):f},b.startAngle=function(d){return arguments.length?(l=ya(d),b):l},b.endAngle=function(d){return arguments.length?(h=ya(d),b):h},b.padAngle=function(d){return arguments.length?(g=ya(d),b):g},b.centroid=function(){var b=
(+a.apply(this,arguments)+ +c.apply(this,arguments))/2,d=(+l.apply(this,arguments)+ +h.apply(this,arguments))/2-Ka;return[Math.cos(d)*b,Math.sin(d)*b]},b};var yd="auto";v.svg.line=function(){return hg(z)};var le=v.map({linear:rb,"linear-closed":ig,step:function(b){for(var d=0,a=b.length,c=b[0],e=[c[0],",",c[1]];++d<a;)e.push("H",(c[0]+(c=b[d])[0])/2,"V",c[1]);return 1<a&&e.push("H",c[0]),e.join("")},"step-before":me,"step-after":ne,basis:jg,"basis-open":function(b){if(4>b.length)return rb(b);for(var d,
a=[],c=-1,e=b.length,f=[0],l=[0];3>++c;)d=b[c],f.push(d[0]),l.push(d[1]);a.push(lb(Pb,f)+","+lb(Pb,l));for(--c;++c<e;)d=b[c],f.shift(),f.push(d[0]),l.shift(),l.push(d[1]),pe(a,f,l);return a.join("")},"basis-closed":function(b){for(var d,a,c=-1,e=b.length,f=e+4,l=[],h=[];4>++c;)a=b[c%e],l.push(a[0]),h.push(a[1]);d=[lb(Pb,l),",",lb(Pb,h)];for(--c;++c<f;)a=b[c%e],l.shift(),l.push(a[0]),h.shift(),h.push(a[1]),pe(d,l,h);return d.join("")},bundle:function(b,d){var a=b.length-1;if(a)for(var c,e,f=b[0][0],
l=b[0][1],h=b[a][0]-f,g=b[a][1]-l,n=-1;++n<=a;)c=b[n],e=n/a,c[0]=d*c[0]+(1-d)*(f+e*h),c[1]=d*c[1]+(1-d)*(l+e*g);return jg(b)},cardinal:function(b,d){return 3>b.length?rb(b):b[0]+id(b,oe(b,d))},"cardinal-open":function(b,d){return 4>b.length?rb(b):b[1]+id(b.slice(1,-1),oe(b,d))},"cardinal-closed":function(b,d){return 3>b.length?ig(b):b[0]+id((b.push(b[0]),b),oe([b[b.length-2]].concat(b,[b[1]]),d))},monotone:function(b){if(3>b.length)b=rb(b);else{var d=b[0],a,c,e,f,l=[],h;a=0;h=b.length-1;for(var g=
[],n=b[1],p=g[0]=qe(b[0],n);++a<h;)g[a]=(p+(p=qe(n,n=b[a+1])))/2;h=(g[a]=p,g);g=-1;for(n=b.length-1;++g<n;)a=qe(b[g],b[g+1]),ea(a)<P?h[g]=h[g+1]=0:(c=h[g]/a,e=h[g+1]/a,f=c*c+e*e,9<f&&(f=3*a/Math.sqrt(f),h[g]=f*c,h[g+1]=f*e));for(g=-1;++g<=n;)f=(b[Math.min(n,g+1)][0]-b[Math.max(0,g-1)][0])/(6*(1+h[g]*h[g])),l.push([f||0,h[g]*f||0]);b=d+id(b,l)}return b}});le.forEach(function(b,d){d.key=b;d.closed=/-closed$/.test(b)});var kg=[0,2/3,1/3,0],lg=[0,1/3,2/3,0],Pb=[0,1/6,2/3,1/6];v.svg.line.radial=function(){var b=
hg(mg);return b.radius=b.x,delete b.x,b.angle=b.y,delete b.y,b};me.reverse=ne;ne.reverse=me;v.svg.area=function(){return ng(z)};v.svg.area.radial=function(){var b=ng(mg);return b.radius=b.x,delete b.x,b.innerRadius=b.x0,delete b.x0,b.outerRadius=b.x1,delete b.x1,b.angle=b.y,delete b.y,b.startAngle=b.y0,delete b.y0,b.endAngle=b.y1,delete b.y1,b};v.svg.chord=function(){function b(b,f){var m=d(this,c,b,f);b=d(this,e,b,f);return"M"+m.p0+a(m.r,m.p1,m.a1-m.a0)+(m.a0==b.a0&&m.a1==b.a1?"Q 0,0 "+m.p0:"Q 0,0 "+
b.p0+a(b.r,b.p1,b.a1-b.a0)+("Q 0,0 "+m.p0))+"Z"}function d(b,d,a,c){var e=d.call(b,a,c);d=f.call(b,e,c);a=l.call(b,e,c)-Ka;b=h.call(b,e,c)-Ka;return{r:d,a0:a,a1:b,p0:[d*Math.cos(a),d*Math.sin(a)],p1:[d*Math.cos(b),d*Math.sin(b)]}}function a(b,d,c){return"A"+b+","+b+" 0 "+ +(c>ca)+",1 "+d}var c=Sd,e=Td,f=di,l=fg,h=gg;return b.radius=function(d){return arguments.length?(f=ya(d),b):f},b.source=function(d){return arguments.length?(c=ya(d),b):c},b.target=function(d){return arguments.length?(e=ya(d),b):
e},b.startAngle=function(d){return arguments.length?(l=ya(d),b):l},b.endAngle=function(d){return arguments.length?(h=ya(d),b):h},b};v.svg.diagonal=function(){function b(b,e){var f=d.call(this,b,e);b=a.call(this,b,e);e=(f.y+b.y)/2;f=[f,{x:f.x,y:e},{x:b.x,y:e},b];return f=f.map(c),"M"+f[0]+"C"+f[1]+" "+f[2]+" "+f[3]}var d=Sd,a=Td,c=og;return b.source=function(a){return arguments.length?(d=ya(a),b):d},b.target=function(d){return arguments.length?(a=ya(d),b):a},b.projection=function(d){return arguments.length?
(c=d,b):c},b};v.svg.diagonal.radial=function(){var b=v.svg.diagonal(),d=og,a=b.projection;return b.projection=function(b){return arguments.length?a(ei(d=b)):d},b};v.svg.symbol=function(){function b(b,c){return(Eg.get(d.call(this,b,c))||pg)(a.call(this,b,c))}var d=gi,a=fi;return b.type=function(a){return arguments.length?(d=ya(a),b):d},b.size=function(d){return arguments.length?(a=ya(d),b):a},b};var Eg=v.map({circle:pg,cross:function(b){b=Math.sqrt(b/5)/2;return"M"+-3*b+","+-b+"H"+-b+"V"+-3*b+"H"+
b+"V"+-b+"H"+3*b+"V"+b+"H"+b+"V"+3*b+"H"+-b+"V"+b+"H"+-3*b+"Z"},diamond:function(b){b=Math.sqrt(b/(2*Fg));var d=b*Fg;return"M0,"+-b+"L"+d+",0 0,"+b+" "+-d+",0Z"},square:function(b){b=Math.sqrt(b)/2;return"M"+-b+","+-b+"L"+b+","+-b+" "+b+","+b+" "+-b+","+b+"Z"},"triangle-down":function(b){b=Math.sqrt(b/zd);var d=b*zd/2;return"M0,"+d+"L"+b+","+-d+" "+-b+","+-d+"Z"},"triangle-up":function(b){b=Math.sqrt(b/zd);var d=b*zd/2;return"M0,"+-d+"L"+b+","+d+" "+-b+","+d+"Z"}});v.svg.symbolTypes=Eg.keys();var zd=
Math.sqrt(3),Fg=Math.tan(30*da);va.transition=function(b){for(var d,a=ac||++Gg,c=se(b),e=[],f=Ad||{time:Date.now(),ease:nh,delay:0,duration:250},l=-1,h=this.length;++l<h;){e.push(b=[]);for(var g=this[l],n=-1,p=g.length;++n<p;)(d=g[n])&&jd(d,n,c,a,f),b.push(d)}return Fc(e,c,a)};va.interrupt=function(b){return this.each(null==b?md:qg(se(b)))};var ac,Ad,md=qg(se()),Sa=[],Gg=0;Sa.call=va.call;Sa.empty=va.empty;Sa.node=va.node;Sa.size=va.size;v.transition=function(b,d){return b&&b.transition?ac?b.transition(d):
b:v.selection().transition(b)};v.transition.prototype=Sa;Sa.select=function(b){var d,a,c,e=this.id,f=this.namespace,l=[];b=W(b);for(var h=-1,g=this.length;++h<g;){l.push(d=[]);for(var n=this[h],p=-1,r=n.length;++p<r;)(c=n[p])&&(a=b.call(c,c.__data__,p,h))?("__data__"in c&&(a.__data__=c.__data__),jd(a,p,f,e,c[f][e]),d.push(a)):d.push(null)}return Fc(l,f,e)};Sa.selectAll=function(b){var d,a,c,e,f=this.id,l=this.namespace,h=[];b=Q(b);for(var g=-1,n=this.length;++g<n;)for(var p=this[g],r=-1,A=p.length;++r<
A;)if(d=p[r]){e=d[l][f];a=b.call(d,d.__data__,r,g);h.push(d=[]);for(var t=-1,z=a.length;++t<z;)(c=a[t])&&jd(c,t,l,f,e),d.push(c)}return Fc(h,l,f)};Sa.filter=function(b){var d,a,c,e=[];"function"!=typeof b&&(b=ka(b));for(var f=0,l=this.length;l>f;f++){e.push(d=[]);a=this[f];for(var h=0,g=a.length;g>h;h++)(c=a[h])&&b.call(c,c.__data__,h,f)&&d.push(c)}return Fc(e,this.namespace,this.id)};Sa.tween=function(b,d){var a=this.id,c=this.namespace;return 2>arguments.length?this.node()[c][a].tween.get(b):ja(this,
null==d?function(d){d[c][a].tween.remove(b)}:function(e){e[c][a].tween.set(b,d)})};Sa.attr=function(b,d){function a(){this.removeAttribute(h)}function c(){this.removeAttributeNS(h.space,h.local)}function e(b){return null==b?a:(b+="",function(){var d,a=this.getAttribute(h);return a!==b&&(d=l(a,b),function(b){this.setAttribute(h,d(b))})})}function f(b){return null==b?c:(b+="",function(){var d,a=this.getAttributeNS(h.space,h.local);return a!==b&&(d=l(a,b),function(b){this.setAttributeNS(h.space,h.local,
d(b))})})}if(2>arguments.length){for(d in b)this.attr(d,b[d]);return this}var l="transform"==b?If:Zb,h=v.ns.qualify(b);return re(this,"attr."+b,d,h.local?f:e)};Sa.attrTween=function(b,d){function a(b,c){var k=d.call(this,b,c,this.getAttribute(e));return k&&function(b){this.setAttribute(e,k(b))}}function c(b,a){var k=d.call(this,b,a,this.getAttributeNS(e.space,e.local));return k&&function(b){this.setAttributeNS(e.space,e.local,k(b))}}var e=v.ns.qualify(b);return this.tween("attr."+b,e.local?c:a)};
Sa.style=function(b,d,c){function e(){this.style.removeProperty(b)}var f=arguments.length;if(3>f){if("string"!=typeof b){2>f&&(d="");for(c in b)this.style(c,b[c],d);return this}c=""}return re(this,"style."+b,d,function(d){return null==d?e:(d+="",function(){var e,f=a(this).getComputedStyle(this,null).getPropertyValue(b);return f!==d&&(e=Zb(f,d),function(d){this.style.setProperty(b,e(d),c)})})})};Sa.styleTween=function(b,d,c){return 3>arguments.length&&(c=""),this.tween("style."+b,function(e,f){var m=
d.call(this,e,f,a(this).getComputedStyle(this,null).getPropertyValue(b));return m&&function(d){this.style.setProperty(b,m(d),c)}})};Sa.text=function(b){return re(this,"text",b,hi)};Sa.remove=function(){var b=this.namespace;return this.each("end.transition",function(){var d;2>this[b].count&&(d=this.parentNode)&&d.removeChild(this)})};Sa.ease=function(b){var d=this.id,a=this.namespace;return 1>arguments.length?this.node()[a][d].ease:("function"!=typeof b&&(b=v.ease.apply(v,arguments)),ja(this,function(c){c[a][d].ease=
b}))};Sa.delay=function(b){var d=this.id,a=this.namespace;return 1>arguments.length?this.node()[a][d].delay:ja(this,"function"==typeof b?function(c,e,f){c[a][d].delay=+b.call(c,c.__data__,e,f)}:(b=+b,function(c){c[a][d].delay=b}))};Sa.duration=function(b){var d=this.id,a=this.namespace;return 1>arguments.length?this.node()[a][d].duration:ja(this,"function"==typeof b?function(c,e,f){c[a][d].duration=Math.max(1,b.call(c,c.__data__,e,f))}:(b=Math.max(1,b),function(c){c[a][d].duration=b}))};Sa.each=function(b,
d){var a=this.id,c=this.namespace;if(2>arguments.length){var e=Ad,f=ac;try{ac=a,ja(this,function(d,e,f){Ad=d[c][a];b.call(d,d.__data__,e,f)})}finally{Ad=e,ac=f}}else ja(this,function(e){e=e[c][a];(e.event||(e.event=v.dispatch("start","end","interrupt"))).on(b,d)});return this};Sa.transition=function(){for(var b,d,a,c,e=this.id,f=++Gg,l=this.namespace,h=[],g=0,n=this.length;n>g;g++){h.push(b=[]);d=this[g];for(var p=0,r=d.length;r>p;p++)(a=d[p])&&(c=a[l][e],jd(a,p,l,f,{time:c.time,ease:c.ease,delay:c.delay+
c.duration,duration:c.duration})),b.push(a)}return Fc(h,l,f)};v.svg.axis=function(){function b(b){b.each(function(){var b,n=v.select(this),p=this.__chart__||a,r=this.__chart__=a.copy(),A=null==g?r.ticks?r.ticks.apply(r,h):r.domain():g,t=null==d?r.tickFormat?r.tickFormat.apply(r,h):z:d,w=n.selectAll(".tick").data(A,r),A=w.enter().insert("g",".domain").attr("class","tick").style("opacity",P),L=v.transition(w.exit()).style("opacity",P).remove(),x=v.transition(w.order()).style("opacity",1),M=Math.max(e,
0)+l,B=cd(r),n=n.selectAll(".domain").data([0]),n=(n.enter().append("path").attr("class","domain"),v.transition(n));A.append("line");A.append("text");var O,U,C,E,I=A.select("line"),Q=x.select("line"),t=w.select("text").text(t),w=A.select("text"),Oa=x.select("text"),ra="top"===c||"left"===c?-1:1;if("bottom"===c||"top"===c?(b=ii,O="x",C="y",U="x2",E="y2",t.attr("dy",0>ra?"0em":".71em").style("text-anchor","middle"),n.attr("d","M"+B[0]+","+ra*f+"V0H"+B[1]+"V"+ra*f)):(b=ji,O="y",C="x",U="y2",E="x2",t.attr("dy",
".32em").style("text-anchor",0>ra?"end":"start"),n.attr("d","M"+ra*f+","+B[0]+"H0V"+B[1]+"H"+ra*f)),I.attr(E,ra*e),w.attr(C,ra*M),Q.attr(U,0).attr(E,ra*e),Oa.attr(O,0).attr(C,ra*M),r.rangeBand)var K=r,F=K.rangeBand()/2,p=r=function(b){return K(b)+F};else p.rangeBand?p=r:L.call(b,r,p);A.call(b,p,r);x.call(b,r,r)})}var d,a=v.scale.linear(),c=Hg,e=6,f=6,l=3,h=[10],g=null;return b.scale=function(d){return arguments.length?(a=d,b):a},b.orient=function(d){return arguments.length?(c=d in Gi?d+"":Hg,b):c},
b.ticks=function(){return arguments.length?(h=sb(arguments),b):h},b.tickValues=function(d){return arguments.length?(g=d,b):g},b.tickFormat=function(a){return arguments.length?(d=a,b):d},b.tickSize=function(d){var a=arguments.length;return a?(e=+d,f=+arguments[a-1],b):e},b.innerTickSize=function(d){return arguments.length?(e=+d,b):e},b.outerTickSize=function(d){return arguments.length?(f=+d,b):f},b.tickPadding=function(d){return arguments.length?(l=+d,b):l},b.tickSubdivide=function(){return arguments.length&&
b},b};var Hg="bottom",Gi={top:1,right:1,bottom:1,left:1};v.svg.brush=function(){function b(a){a.each(function(){var a=v.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",f).on("touchstart.brush",f),l=a.selectAll(".background").data([0]);l.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");a.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor",
"move");var m=a.selectAll(".resize").data(w,z);m.exit().remove();m.enter().append("g").attr("class",function(b){return"resize "+b}).style("cursor",function(b){return Hi[b]}).append("rect").attr("x",function(b){return/[ew]$/.test(b)?-3:null}).attr("y",function(b){return/^[ns]/.test(b)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");m.style("display",b.empty()?"none":null);var h,a=v.transition(a),l=v.transition(l);g&&(h=cd(g),l.attr("x",h[0]).attr("width",h[1]-h[0]),c(a));n&&
(h=cd(n),l.attr("y",h[0]).attr("height",h[1]-h[0]),e(a));d(a)})}function d(b){b.selectAll(".resize").attr("transform",function(b){return"translate("+p[+/e$/.test(b)]+","+r[+/^s/.test(b)]+")"})}function c(b){b.select(".extent").attr("x",p[0]);b.selectAll(".extent,.n>rect,.s>rect").attr("width",p[1]-p[0])}function e(b){b.select(".extent").attr("y",r[0]);b.selectAll(".extent,.e>rect,.w>rect").attr("height",r[1]-r[0])}function f(){function u(){var b=v.mouse(M),a=!1;x&&(b[0]+=x[0],b[1]+=x[1]);ra||(v.event.altKey?
(L||(L=[(p[0]+p[1])/2,(r[0]+r[1])/2]),F[0]=p[+(b[0]<L[0])],F[1]=r[+(b[1]<L[1])]):L=null);I&&z(b,g,0)&&(c(C),a=!0);Q&&z(b,n,1)&&(e(C),a=!0);a&&(d(C),O({type:"brush",mode:ra?"move":"resize"}))}function z(b,d,a){var c,e,f=cd(d);d=f[0];var f=f[1],k=F[a],h=a?r:p,g=h[1]-h[0];return ra&&(d-=k,f-=g+k),c=(a?t:A)?Math.max(d,Math.min(f,b[a])):b[a],ra?e=(c+=k)+g:(L&&(k=Math.max(d,Math.min(f,2*L[a]-c))),c>k?(e=c,c=k):e=k),h[0]!=c||h[1]!=e?(a?l=null:m=null,h[0]=c,h[1]=e,!0):void 0}function w(){u();C.style("pointer-events",
"all").selectAll(".resize").style("display",b.empty()?"none":null);v.select("body").style("cursor",null);J.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);Oa();O({type:"brushend"})}var L,x,M=this,B=v.select(v.event.target),O=h.of(M,arguments),C=v.select(M),E=B.datum(),I=!/^(n|s)$/.test(E)&&g,Q=!/^(e|w)$/.test(E)&&n,ra=B.classed("extent"),Oa=U(M),F=v.mouse(M),J=v.select(a(M)).on("keydown.brush",
function(){32==v.event.keyCode&&(ra||(L=null,F[0]-=p[1],F[1]-=r[1],ra=2),K())}).on("keyup.brush",function(){32==v.event.keyCode&&2==ra&&(F[0]+=p[1],F[1]+=r[1],ra=0,K())});if(v.event.changedTouches?J.on("touchmove.brush",u).on("touchend.brush",w):J.on("mousemove.brush",u).on("mouseup.brush",w),C.interrupt().selectAll("*").interrupt(),ra)F[0]=p[0]-F[0],F[1]=r[0]-F[1];else if(E){var G=+/w$/.test(E),E=+/^n/.test(E);x=[p[1-G]-F[0],r[1-E]-F[1]];F[0]=p[G];F[1]=r[E]}else v.event.altKey&&(L=F.slice());C.style("pointer-events",
"none").selectAll(".resize").style("display",null);v.select("body").style("cursor",B.style("cursor"));O({type:"brushstart"});u()}var m,l,h=V(b,"brushstart","brush","brushend"),g=null,n=null,p=[0,0],r=[0,0],A=!0,t=!0,w=De[0];return b.event=function(b){b.each(function(){var b=h.of(this,arguments),d={x:p,y:r,i:m,j:l},a=this.__chart__||d;this.__chart__=d;ac?v.select(this).transition().each("start.brush",function(){m=a.i;l=a.j;p=a.x;r=a.y;b({type:"brushstart"})}).tween("brush:brush",function(){var a=bd(p,
d.x),c=bd(r,d.y);return m=l=null,function(e){p=d.x=a(e);r=d.y=c(e);b({type:"brush",mode:"resize"})}}).each("end.brush",function(){m=d.i;l=d.j;b({type:"brush",mode:"resize"});b({type:"brushend"})}):(b({type:"brushstart"}),b({type:"brush",mode:"resize"}),b({type:"brushend"}))})},b.x=function(d){return arguments.length?(g=d,w=De[!g<<1|!n],b):g},b.y=function(d){return arguments.length?(n=d,w=De[!g<<1|!n],b):n},b.clamp=function(d){return arguments.length?(g&&n?(A=!!d[0],t=!!d[1]):g?A=!!d:n&&(t=!!d),b):
g&&n?[A,t]:g?A:n?t:null},b.extent=function(d){var a,c,e,f,k;return arguments.length?(g&&(a=d[0],c=d[1],n&&(a=a[0],c=c[0]),m=[a,c],g.invert&&(a=g(a),c=g(c)),a>c&&(k=a,a=c,c=k),a==p[0]&&c==p[1]||(p=[a,c])),n&&(e=d[0],f=d[1],g&&(e=e[1],f=f[1]),l=[e,f],n.invert&&(e=n(e),f=n(f)),e>f&&(k=e,e=f,f=k),e==r[0]&&f==r[1]||(r=[e,f])),b):(g&&(m?(a=m[0],c=m[1]):(a=p[0],c=p[1],g.invert&&(a=g.invert(a),c=g.invert(c)),a>c&&(k=a,a=c,c=k))),n&&(l?(e=l[0],f=l[1]):(e=r[0],f=r[1],n.invert&&(e=n.invert(e),f=n.invert(f)),
e>f&&(k=e,e=f,f=k))),g&&n?[[a,e],[c,f]]:g?[a,c]:n&&[e,f])},b.clear=function(){return b.empty()||(p=[0,0],r=[0,0],m=l=null),b},b.empty=function(){return!!g&&p[0]==p[1]||!!n&&r[0]==r[1]},v.rebind(b,h,"on")};var Hi={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},De=["n e s w nw ne se sw".split(" "),["e","w"],["n","s"],[]],Ee=R.format=vg.timeFormat,Ig=Ee.utc,Jg=Ig("%Y-%m-%dT%H:%M:%S.%LZ");Ee.iso=Date.prototype.toISOString&&
+new Date("2000-01-01T00:00:00.000Z")?te:Jg;te.parse=function(b){b=new Date(b);return isNaN(b)?null:b};te.toString=Jg.toString;R.second=Sb(function(b){return new Ya(1E3*Math.floor(b/1E3))},function(b,d){b.setTime(b.getTime()+1E3*Math.floor(d))},function(b){return b.getSeconds()});R.seconds=R.second.range;R.seconds.utc=R.second.utc.range;R.minute=Sb(function(b){return new Ya(6E4*Math.floor(b/6E4))},function(b,d){b.setTime(b.getTime()+6E4*Math.floor(d))},function(b){return b.getMinutes()});R.minutes=
R.minute.range;R.minutes.utc=R.minute.utc.range;R.hour=Sb(function(b){var d=b.getTimezoneOffset()/60;return new Ya(36E5*(Math.floor(b/36E5-d)+d))},function(b,d){b.setTime(b.getTime()+36E5*Math.floor(d))},function(b){return b.getHours()});R.hours=R.hour.range;R.hours.utc=R.hour.utc.range;R.month=Sb(function(b){return b=R.day(b),b.setDate(1),b},function(b,d){b.setMonth(b.getMonth()+d)},function(b){return b.getMonth()});R.months=R.month.range;R.months.utc=R.month.utc.range;var kd=[1E3,5E3,15E3,3E4,6E4,
3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],Fe=[[R.second,1],[R.second,5],[R.second,15],[R.second,30],[R.minute,1],[R.minute,5],[R.minute,15],[R.minute,30],[R.hour,1],[R.hour,3],[R.hour,6],[R.hour,12],[R.day,1],[R.day,2],[R.week,1],[R.month,1],[R.month,3],[R.year,1]],Ii=Ee.multi([[".%L",function(b){return b.getMilliseconds()}],[":%S",function(b){return b.getSeconds()}],["%I:%M",function(b){return b.getMinutes()}],["%I %p",function(b){return b.getHours()}],["%a %d",
function(b){return b.getDay()&&1!=b.getDate()}],["%b %d",function(b){return 1!=b.getDate()}],["%B",function(b){return b.getMonth()}],["%Y",wb]]),ki={range:function(b,d,a){return v.range(Math.ceil(b/a)*a,+d,a).map($b)},floor:z,ceil:z};Fe.year=R.year;R.scale=function(){return ue(v.scale.linear(),Fe,Ii)};var Kg=Fe.map(function(b){return[b[0].utc,b[1]]}),Ji=Ig.multi([[".%L",function(b){return b.getUTCMilliseconds()}],[":%S",function(b){return b.getUTCSeconds()}],["%I:%M",function(b){return b.getUTCMinutes()}],
["%I %p",function(b){return b.getUTCHours()}],["%a %d",function(b){return b.getUTCDay()&&1!=b.getUTCDate()}],["%b %d",function(b){return 1!=b.getUTCDate()}],["%B",function(b){return b.getUTCMonth()}],["%Y",wb]]);Kg.year=R.year.utc;R.scale.utc=function(){return ue(v.scale.linear(),Kg,Ji)};v.text=Jd(function(b){return b.responseText});v.json=function(b,d){return Kc(b,"application/json",li,d)};v.html=function(b,d){return Kc(b,"text/html",mi,d)};v.xml=Jd(function(b){return b.responseXML});"function"==
typeof define&&define.amd?(this.d3=v,define(v)):"object"==typeof module&&module.exports?module.exports=v:this.d3=v}();angular.module("xe-ui-components","badge button checkbox dropdown label radiobutton simpleTextbox statusLabel switch textarea textbox ui.select xeUISelect external-resouces utils columnFilter pagination search xebarmodule dataTableModule aboutModal pieChartModule popupModal tabnav timePicker xe-ui-components-tpls".split(" "));angular.module("xe-ui-components-tpls","templates/badge.html templates/button.html templates/checkbox.html templates/dropdown.html templates/label.html templates/radio-button.html templates/simple-textbox.html templates/statusLabel.html templates/switch.html templates/text-area-counter.html templates/text-area.html templates/text-box-char-limit.html templates/text-box-password.html templates/text-box.html templates/column-filter.html templates/pagination.html templates/search.html templates/dataTable.html templates/dialog.html templates/dialog_default.html templates/modal.html templates/tabNav.html templates/tabPanel.html templates/timePicker.html templates/timePicker_rtl.html".split(" "));
angular.module("templates/badge.html",[]).run(["$templateCache",function(a){a.put("templates/badge.html",'<span tabindex="0" class="xe-badge {{::xeType}}-badge" aria-label="{{xeLabel}}" ng-bind="xeLabel"></span>')}]);angular.module("templates/button.html",[]).run(["$templateCache",function(a){a.put("templates/button.html",'<button class="{{xeType +\' \'+ xeBtnClass}}" ng-disabled="xeDisabled" aria-label="{{xeAriaLabel}}" ng-click="xeBtnClick()" ng-bind="xeLabel"></button>')}]);
angular.module("templates/checkbox.html",[]).run(["$templateCache",function(a){a.put("templates/checkbox.html",'<div xe-section="{{::xeId}}"><label class="xe-container"><span data-ng-if="!xeLabelHidden">{{::xeLabel}}</span> <input id="{{::\'ckbox-\' + xeId}}" type="checkbox" aria-checked="{{xeModel}}" ng-click="cbClicked($event)" ng-checked="xeModel" aria-live="assertive" aria-disabled="{{xeDisabled? true:false}}" ng-disabled="xeDisabled == true" name="{{xeName}}" tabindex="{{!xeDisabled ? 0 : -1}}"> <span class="xe-checkmark" tabindex="-1"></span></label></div>')}]);
angular.module("templates/dropdown.html",[]).run(["$templateCache",function(a){a.put("templates/dropdown.html",'<div class="btn-group"><button type="button" ng-disabled="{{disabled}}" ng-class="{disabledDD:disabled}" data-toggle="dropdown" class="btn btn-default dropdown dropdown-toggle" role="listbox" aria-expanded="false" aria-haspopup="true"><span class="placeholder" ng-show="!ngModel">{{::xeLabel}}</span> <span class="placeholder">{{ dropDownLabel }}</span> <span class="glyphicon glyphicon-chevron-down"></span></button><ul class="dropdown-menu" role="listbox" aria-expanded="false" role="listbox"><li ng-hide="!ngModel" ng-click="updateModel(xeLabel)">{{::xeLabel}}</li><li ng-if="!isObject" role="option" ng-repeat="option in xeOptions track by $index" ng-click="updateModel(option)" ng-class="{\'selected\':option===ngModel}">{{::option}}</li><li ng-if="isObject" ng-repeat="option in xeOptions track by $index" ng-click="updateModel(option)">{{::option.label}}</li></ul></div>')}]);
angular.module("templates/label.html",[]).run(["$templateCache",function(a){a.put("templates/label.html",'<label class="xe-label" for="{{xeFor}}" ng-hide="{{xeHidden}}" ng-cloak><span class="xe-label" aria-label="{{xeValue}}" ng-bind="xeValue"></span> <span class="xe-required" ng-if="xeRequired==true" ng-bind="\'*\'"></span></label>')}]);angular.module("templates/radio-button.html",[]).run(["$templateCache",function(a){a.put("templates/radio-button.html",'<div class="radio-container" tabindex="{{!xeDisabled ? 0 : \'\'}}"><input ng-value="ngValue" ng-model="ngModel" ng-disabled="xeDisabled" ng-class="{disabledRadio:xeDisabled}" ng-click="xeOnClick" type="radio" id="{{xeId}}" name="{{xeName}}"><xe-label xe-value="{{xeLabel}}" xe-for="{{xeId}}" aria-checked="{{ngModel===ngValue}}" role="radio"></xe-label></div>')}]);
angular.module("templates/simple-textbox.html",[]).run(["$templateCache",function(a){a.put("templates/simple-textbox.html",'<input id="{{::inputField}}" xe-field="search" name="{{::inputField}}" placeholder="{{placeHolder}}" class="simple-input-field auto-width font-semibold {{xeClass}}" ng-model="value" ng-class="{readOnly: inputDisabled}" ng-disabled="{{disabled}}" ng-keyup="onChange({data: value, id: inputField, event: $event})" ng-keydown="onKeydown({data: value, id: inputField, event: $event})" ng-keypress="onKeypress({data: value, id: inputField, event: $event})" ng-paste="onKeypress({data: $event.originalEvent.clipboardData.getData(\'text/plain\'), id: inputField, event: $event})" ng-focus="onFocus({event: $event})" ng-blur="onBlur(({event: $event}))" autocomplete="off">')}]);
angular.module("templates/statusLabel.html",[]).run(["$templateCache",function(a){a.put("templates/statusLabel.html",'<span class="labels {{xeType}}" aria-label="{{::xeLabel}}">{{::xeLabel}}</span>')}]);angular.module("templates/switch.html",[]).run(["$templateCache",function(a){a.put("templates/switch.html",'<input id="{{id}}" ng-disabled="disabled" ng-class="{disabledSwitch:disabled}" ng-model="value" class="cmn-toggle cmn-toggle-round" type="checkbox"><label for="{{id}}"></label>')}]);
angular.module("templates/text-area-counter.html",[]).run(["$templateCache",function(a){a.put("templates/text-area-counter.html",'<div class="textarea-container"><xe-label xe-value="{{xeLabel}}" xe-for="{{xeId}}" xe-required="xeRequired"></xe-label><div class="xe-labeltext-margin"></div><textarea ng-model="ngModel" class="comments-field" ng-class="{readonly:xeReadonly}" id="{{xeId}}" placeholder="{{xePlaceholder}}" ng-required="xeRequired" aria-multiline="true" ng-readonly="xeReadonly" maxlength="{{xeCharCounter}}" ng-trim="false">\n\n    </textarea><div id="xe-id-characters-count"><span>{{::\'xe.text.chars.left\' | xei18n}} : {{ charRemaining }}</span></div></div>')}]);
angular.module("templates/text-area.html",[]).run(["$templateCache",function(a){a.put("templates/text-area.html",'<div class="textarea-container"><xe-label xe-value="{{xeLabel}}" xe-for="{{xeId}}" xe-required="xeRequired"></xe-label><div class="xe-labeltext-margin"></div><textarea ng-model="ngModel" class="comments-field" ng-class="{readonly:xeReadonly}" id="{{xeId}}" placeholder="{{xePlaceholder}}" ng-required="xeRequired" aria-multiline="true" ng-readonly="xeReadonly">\n    </textarea></div>')}]);
angular.module("templates/text-box-char-limit.html",[]).run(["$templateCache",function(a){a.put("templates/text-box-char-limit.html",'<div class="textbox-container" aria-live="assertive"><xe-label xe-value="{{xeLabel}}" xe-for="{{xeId}}" xe-required="xeRequired"></xe-label><span id="xe-id-max-characters">{{ xeMaxlength }} {{::\'xe.text.max.chars\' | xei18n}}</span><div class="xe-labeltext-margin"></div><input ng-class="{readonly:xeReadonly}" ng-model="ngModel" ng-form="ngForm" class="{{xeType}}-field" id="{{xeId}}" name="{{xeName}}" placeholder="{{xePlaceholder}}" ng-pattern="xePattern" ng-required="xeRequired" ng-maxlength="xeMaxlength" ng-minlength="xeMinlength" ng-readonly="xeReadonly" aria-labelledby="{{xeId}}" aria-describedby="xe-id-max-characters" aria-required="{{xeRequired? true : false}}"><br><div class="error-messages" id="{{xeId+\'label\'}}" ng-messages="" ng-show="{{!xeNotification}}"><div ng-message="required">{{::\'textbox.validation.required\' | xei18n}}</div><div ng-message="maxlength">{{::\'textbox.validation.maxlength\' | xei18n}} {{xeMaxlength}}</div></div></div>')}]);
angular.module("templates/text-box-password.html",[]).run(["$templateCache",function(a){a.put("templates/text-box-password.html",'<div class="textbox-container" aria-live="assertive"><xe-label xe-value="{{xeLabel}}" xe-for="{{xeId}}" xe-required="xeRequired"></xe-label><div class="xe-labeltext-margin"></div><input ng-class="{readonly:xeReadonly}" ng-model="ngModel" ng-form="ngForm" class="{{xeType}}-field" id="{{xeId}}" type="password" name="{{xeName}}" placeholder="{{xePlaceholder}}" ng-pattern="xePattern" ng-required="xeRequired" ng-maxlength="xeMaxlength" ng-minlength="xeMinlength" ng-readonly="xeReadonly" aria-describedby="{{xeId}}" aria-required="{{xeRequired? true : false}}"><br><div class="error-messages" id="{{xeId+\'label\'}}" ng-messages="" ng-show="{{!xeNotification}}"><div ng-message="required">{{::\'textbox.validation.required\' | xei18n}}</div><div ng-message="maxlength">{{::\'textbox.validation.maxlength\' | xei18n}} {{xeMaxlength}}</div></div></div>')}]);
angular.module("templates/text-box.html",[]).run(["$templateCache",function(a){a.put("templates/text-box.html",'<div class="textbox-container" aria-live="assertive"><xe-label xe-value="{{xeLabel}}" xe-for="{{xeId}}" xe-required="xeRequired"></xe-label><div class="xe-labeltext-margin"></div><input ng-class="{readonly:xeReadonly}" ng-model="ngModel" ng-form="ngForm" class="{{xeType}}-field" id="{{xeId}}" name="{{xeName}}" placeholder="{{xePlaceholder}}" ng-pattern="xePattern" ng-required="xeRequired" ng-maxlength="xeMaxlength" ng-minlength="xeMinlength" ng-readonly="xeReadonly" aria-describedby="{{xeId}}" aria-required="{{xeRequired ? true : false}}"><br><div class="error-messages" id="{{xeId+\'label\'}}" ng-messages="" ng-show="{{!xeNotification}}"><div ng-message="required">{{::\'textbox.validation.required\' | xei18n}}</div><div ng-message="maxlength">{{::\'textbox.validation.maxlength\' | xei18n}} {{xeMaxlength}}</div></div></div>')}]);
angular.module("templates/column-filter.html",[]).run(["$templateCache",function(a){a.put("templates/column-filter.html",'<span><div class="column-filter-container" ng-if="::!nocolumnFilterMenu"><button type="button" class="column-filter-button" ng-click="bindClickEvent($event)" aria-haspopup="true" aria-labelledby="columnFilter" xe-field="columnFilterMenu"><span id="columnFilter" class="placeholder" ng-bind="\'dataTable.columnFilter.label\' | xei18n"></span><div class="dropdown-icon">&nbsp;</div></button><ul class="column-setting-menu" ng-hide="hideColumnSettingMenu" role="list" aria-labelledby="columnFilter"><li role="presentation"><xe-checkbox xe-label="{{::\'dataTable.columnFilter.selectAll\' | xei18n}}" xe-model="selectAll.visible" xe-on-click="onSelectAll(header, event)" xe-id="0" data-name="all" aria-role="listitem" aria-live="assertive"></xe-checkbox></li><li ng-repeat="heading in header" ng-class="{\'disabled\': heading.options.disable}" ng-if="heading.options.columnShowHide !== false" data-name="{{heading.name}}" role="presentation"><xe-checkbox xe-id="{{heading.name}}" xe-value="{{$index+1}}" xe-label="{{heading.title}}" xe-model="heading.options.visible" xe-on-click="hideUnhideColumn(heading, event)" xe-disabled="heading.options.disable" aria-role="listitem" aria-live="assertive"></xe-checkbox></li></ul></div></span>')}]);
angular.module("templates/pagination.html",[]).run(["$templateCache",function(a){a.put("templates/pagination.html",'<div class="tfoot pagination-container visible-lg" role="navigation" ng-cloak><div id="resultsFound" class="results-container" ng-bind="(\'pagination.record.found\' | xei18n) + \': \' + resultsFound"></div><div class="pagination-controls"><xe-button xe-type="secondary" xe-btn-class="first" xe-aria-label="{{::\'pagination.first.label\' | xei18n}}" xe-btn-click="first()" xe-disabled="firstPrev" ng-cloak></xe-button><xe-button xe-type="secondary" xe-btn-class="previous" xe-aria-label="{{::\'pagination.previous.label\' | xei18n}}" xe-btn-click="prev()" xe-disabled="firstPrev" ng-cloak></xe-button><xe-label xe-value="{{::\'pagination.page.label\' | xei18n}}" role="presentation" aria-hidden="true"></xe-label><span title="{{::\'pagination.page.shortcut.label\' | xei18n}}" role="presentation"><input id="pageInput" type="number" ng-model="onPage" aria-valuenow="{{onPage}}" aria-valuemax="{{numberOfPages}}" aria-valuemin="{{!numberOfPages ? 0 : 1}}" max="{{numberOfPages}}" min="{{!numberOfPages ? 0 : 1}}" ng-model-options="{ debounce: {\'default\': 200, \'blur\': 0} }" ng-change="paggeNumberChange()" ng-blur="focusOut($event)" aria-label="{{::\'pagination.page.aria.label\' | xei18n}}. {{::\'pagination.page.label\' | xei18n}} {{onPage}} {{::\'pagination.page.of.label\' | xei18n}} {{numberOfPages}}" ng-cloak></span><xe-label xe-value="{{::\'pagination.page.of.label\' | xei18n}} {{numberOfPages}}" role="presentation"></xe-label><xe-button xe-type="secondary" xe-btn-class="next" xe-aria-label="{{::\'pagination.next.label\' | xei18n}}" xe-btn-click="next()" xe-disabled="nextLast" ng-cloak></xe-button><xe-button xe-type="secondary" xe-btn-class="last" xe-aria-label="{{::\'pagination.last.label\' | xei18n}}" xe-btn-click="last()" xe-disabled="nextLast" ng-cloak></xe-button><xe-label id="perPage" xe-value="{{::\'pagination.per.page.label\' | xei18n}}" role="presentation" aria-hidden="true"></xe-label><select class="per-page-select" aria-labelledby="perPage" ng-model="offset" ng-options="pageOffset for pageOffset in ::pageOffsets" ng-change="offsetChanged(true)" ng-disabled="resultsFound === 0"></select></div></div>')}]);
angular.module("templates/search.html",[]).run(["$templateCache",function(a){a.put("templates/search.html",'<form name="form" class="search-container"><xe-simple-text-box input-field="{{searchConfig.id}}" xe-class="search" value="value" place-holder="{{searchConfig.placeholder}}" on-keydown="searchKeydown(data, id, event)" on-keypress="searchKeypress(data, id, event)" on-focus="onFocus(event)" on-blur="onBlur(event)" aria-label="{{::ariaLabel}}"></xe-simple-text-box></form>')}]);
angular.module("templates/dataTable.html",[]).run(["$templateCache",function(a){a.put("templates/dataTable.html",'<div id="{{tableId}}" class="table-container" ng-class="{\'fixed-height\': !!height, \'noToolbar\': noCaptionAndToolbar, \'no-data\': !resultsFound, \'empty\': emptyTableMsg}" browser-detect role="grid" aria-labelledby="gridCaption" ng-cloak><div class="trMobile" ng-if="totalRow && isMobileView  "><div ng-repeat="heading in header" ng-if="heading.options.visible === true"><span class="total-row" total-label="{{heading.totalDisplayName}}" aria-hidden="false" ng-bind="getTotalValue(heading)"></span></div></div><div class="caption" ng-if="::!noCaptionBar" xe-section="{{xeSection + \'CaptionBar\'}}"><table class="data-table datatable_spacing" role="heading" aria-level="1"><caption ng-class="{\'search-opened\': hideContainer}"><span id="gridCaption" class="caption-container font-semibold" ng-if="::!nocaption" ng-bind="::caption" xe-field="caption"></span><div class="toolbar" ng-if="toolbar"><xe-toolbar></xe-toolbar><xe-column-filter header="header"></xe-column-filter><span role="search" title="{{\'search.title\' | xei18n}}" ng-if="::!nosearch"><xe-search value="searchConfig.searchString" place-holder="{{\'search.label\' | xei18n}}" on-change="fetchSpecial(query)" on-focus="onSearchFocus({event: event})" on-blur="onSearchBlur({event: event})" search-config="searchConfig" xe-focus loading-data="loadingData"></xe-search></span></div></caption></table></div><div class="hr-scrollable-content"><div class="thead"><table class="data-table" ng-style="headerPadding" role="presentaion"><thead role="rowgroup"><tr role="row"><th class="font-semibold width-animate {{::heading.name}}" ng-repeat="heading in header" ng-class="{\'sortable\': heading.options.sortable, \'ascending\': sortArray[heading.name].ascending, \'decending\': sortArray[heading.name].decending}" ng-if="heading.options.visible === true" ng-style="{\'width\': heading.dynamicWidth + \'px\'}" data-name="{{::heading.name}}" ng-click="onSort({heading: heading}); sortOnHeading(heading, $index);" role="columnheader" aria-sort="{{sortArray[heading.name].ascending ? (\'dataTable.sort.ascending.label\' | xei18n) : (sortArray[heading.name].decending ? (\'dataTable.sort.descending.label\' | xei18n) : \'none\')}}" aria-describedby="{{\'headingAria\' + $index}}" drag-drop="handleDrop" tabindex="0" xe-field="{{::heading.name}}" xe-heading-injector xe-focus xe-click-grid><div class="data" title="{{heading.label}}"><span ng-show="::heading.options.titleVisible !== false" aria-hidden="false" ng-bind="::heading.title"></span><label id="${{\'headingAria\' + $index}}" class="sr-only" ng-bind="heading.ariaLabel + (heading.options.sortable ? (\'dataTable.sortable.label\' | xei18n) : \'\')"></label></div></th></tr></thead></table></div><div class="tbody" ng-style="::{\'height\': height}" continuous-scroll="nextPage()" scroll-parent="{{::continuousScrollParent}}" aria-labelledby="msg" tabindex="{{(!resultsFound || emptyTableMsg) ? 0 : \'\'}}" resize><div id="msg" ng-bind="emptyTableMsg? emptyTableMsg : ((!resultsFound && !loadingData) ? noDataMsg : \'\')"></div><table class="data-table" ng-class="::mobileLayout ? \'mobileLayout\' : \'noMobileLayout\'" role="presentaion"><thead role="presentaion" aria-hidden="true"><tr><th class="font-semibold {{::heading.name}}" ng-repeat="heading in header" ng-class="{\'sortable\': heading.options.sortable, \'ascending\': sortArray[heading.name].ascending, \'decending\': sortArray[heading.name].decending}" ng-if="heading.options.visible === true" ng-style="{\'width\': heading.dynamicWidth + \'px\'}" data-name="{{::heading.name}}" xe-field="{{::heading.name}}" xe-heading-injector tabindex="0"><div class="data"><span ng-show="::heading.options.titleVisible !== false" ng-bind="::heading.title"></span></div></th></tr></thead><tbody role="rowgroup"><tr ng-repeat="row in content" ng-click="onRowClick({data:row,index:$index})" ng-dblclick="onRowDoubleClick({data:row,index:$index})" xe-row-injector tabindex="-1" role="row"><td class="width-animate" ng-repeat="heading in header" ng-class="{\'align-right\': heading.options.actionOrStatus, \'sortable\': heading.options.sortable}" ng-if="heading.options.visible === true" data-name="{{::heading.name}}" data-title="{{::(heading.title && heading.options.titleVisible !== false) ? heading.title + \':\' : \'\'}}" attain-mobile-layout="{{mobileLayout[heading.name]}}" xe-field="{{::heading.name}}" xe-cell-injector xe-focus xe-click-grid role="gridcell" ng-cloak><div ng-if="!isExtendedField(row, heading.name)"><span ng-bind="getObjectValue(row, heading.name)" tabindex="0"></span></div><div ng-if="isExtendedField(row, heading.name)"><div ng-if="isEditable"><div ng-if="dataType === \'DATE\'"><input date-picker="" value="{{::extensionValue}}" class="datePicker" aria-labelledby=""></div><div ng-if="dataType === \'VARCHAR2\'"><xe-simple-text-box value="::extensionValue"></xe-simple-text-box></div><div ng-if="dataType === \'NUMBER\'"><decimal-input ng-model="::extensionValue" decimals="0"></decimal-input></div></div><div ng-if="!isEditable"><span ng-bind="::extensionValue"></span></div></div></td></tr></tbody></table></div><div class="trDesktop" ng-if="totalRow && !isMobileView" xe-section="totalRow"><table class="data-table" ng-style="headerPadding"><thead><tr><th class="font-semibold width-animate {{::heading.name}}" ng-repeat="heading in header" ng-if="heading.options.visible === true" ng-style="{\'width\': heading.dynamicWidth + \'px\'}" data-name="{{::heading.name}}" drag-drop="handleDrop" tabindex="0" xe-field="{{::heading.name+\'Total\'}}" xe-focus xe-click-grid><div class="aggregateRow data" ng-class="{\'align-right\': heading.options.actionOrStatus}" title="{{heading.label}}"><label ng-if="heading.totalLabel" id="{{::heading.name+\'Total\'}}" for="{{::heading.name+\'Total\'}}">{{getTotalValue(heading)}}</label><span ng-if="!heading.totalLabel" class="total-display" ng-show="::heading.options.titleVisible !== false" aria-hidden="false" ng-bind="getTotalValue(heading)"></span></div></th></tr></thead></table></div></div><div class="tfoot" ng-transclude></div><xe-pagination model="content" results-found="resultsFound" ng-show="showPagination" xe-grid-pagination-control search-string="searchConfig.searchString"></xe-pagination><div ng-show="loadingData" class="load-indicator"><div class="spinner"><div class="bounce1"></div><div class="bounce2"></div><div class="bounce3"></div></div></div></div>')}]);
angular.module("templates/dialog.html",[]).run(["$templateCache",function(a){a.put("templates/dialog.html",'<div id="xeModalMask" class="xe-modal-mask" ng-show="show" tabindex="-1" aria-labelledby="xeModalLabel" role="dialog"><div class="xe-modal-wrapper" role="document"><div class="xe-modal-container"><span class="xe-modal-close" ng-click="hide()" tabindex="0" title="{{about[api.close]}"></span><h4 id="xeModalLabel" hidden>{{about[api.title]}}</h4><div class="xe-modal-header" tabindex="0"><h5 class="xe-app-title">{{about[api.name]}}</h5><h6 class="xe-app-version">{{about[api.version]}}</h6><h6 ng-if="!hidePlatformVersion" class="xe-platform-version">{{about[api.platformVersion]}}</h6></div><hr><div class="xe-modal-body" role="list" tabindex="0"><h6 id="xe-modal-gen-sec" class="xe-title">General</h6><ul role="list" aria-labelledby="xe-modal-gen-sec"><li role="listitem" aria-level="{{$index + 1}}" ng-repeat-start="(key, value) in about[api.general]" ng-repeat-end><strong>{{key}}</strong> : <span>{{value}}</span></li></ul></div><hr><div class="xe-modal-body" role="list" tabindex="0"><h6 id="xe-modal-plugin-info" class="xe-title">Plugin information</h6><ul role="list" aria-labelledby="xe-modal-plugin-info"><li role="listitem" aria-level="{{$index + 1}}" ng-repeat-start="(key, value) in about[api.plugin]" ng-repeat-end><strong>{{key}}</strong> : <span>{{value}}</span></li></ul></div><hr><div class="xe-modal-body" role="list" tabindex="0"><h6 id="xe-modal-other-plugin-info" class="xe-title">Other Plugin information</h6><ul role="list" aria-labelledby="xe-modal-other-plugin-info"><li role="listitem" aria-level="{{$index + 1}}" ng-repeat-start="(key, value) in about[api.otherPlugin]" ng-repeat-end><strong>{{key}}</strong> : <span>{{value}}</span></li></ul></div><div class="xe-modal-footer" tabindex="0">{{about[api.copyright]}}</div></div></div></div>')}]);
angular.module("templates/dialog_default.html",[]).run(["$templateCache",function(a){a.put("templates/dialog_default.html",'<div id="xeModalMask" class="xe-modal-mask" ng-show="show" tabindex="-1" aria-labelledby="xeModalMask" role="region"><div class="xe-modal-wrapper" role="dialog" title="{{about[api.title]}}"><div id="xeModalContainer" class="xe-modal-container"><span id="xeModalClose" class="xe-modal-close" ng-click="hide()" tabindex="0" role="button" alt="{{about[api.close]}}" title="{{about[api.close]}}"></span><h4 id="xeModalLabel" hidden>{{about[api.title]}}</h4><div id="xeModalHeader" class="xe-modal-header" tabindex="0"><h5 class="xe-app-title">{{about[api.name]}}</h5><h6 class="xe-app-version">{{about[api.version]}}</h6><h6 ng-if="!hidePlatformVersion" class="xe-platform-version">{{about[api.platformVersion]}}</h6></div><hr><div id="xeModalFooter" class="xe-modal-footer" tabindex="0" role="heading" aria-level="1"><span class="xe-modal-footer-copyright">&copy; {{about[api.copyright]}}</span><br><br><span class="xe-modal-footer-copyright-info">{{about[api.copyrightLegalNotice]}}</span></div></div></div></div>')}]);
angular.module("templates/modal.html",[]).run(["$templateCache",function(a){a.put("templates/modal.html",'<div id="xeModalMask" class="xe-popup-mask" ng-show="show" tabindex="-1" role="dialog" aria-labelledby="xePopTitle"><div class="xe-popup-wrapper"><div class="xe-popup-container"><div id="xeModalHeader" class="xe-popup-header"><h5 id="xePopTitle" class="xe-app-title" role="heading" data-ng-bind="popupTitle"></h5><span id="xePopupClose" class="xe-popup-close" ng-click="hide()" tabindex="0" role="button" aria-label="{{\'userpreference.popup.language.close\' | xei18n}}" alt="{{\'userpreference.popup.language.close\' | xei18n}}" title="{{\'userpreference.popup.language.close\' | xei18n}}"></span></div><div id="xePopupContent" class="xe-pop-content" ng-transclude="popupContent"></div><div id="buttonContainer" class="buttonContainer" ng-transclude="popupButtons"></div><div tabindex="0" id="tabOrdering"></div></div></div></div>')}]);
angular.module("templates/tabNav.html",[]).run(["$templateCache",function(a){a.put("templates/tabNav.html",'<div class="xe-tab-container" role="presentation"><ul class="xe-tab-nav" role="tablist"><li ng-repeat="tab in tabnav.tabs" ng-click="tabnav.activate(tab)" ng-class="{active: tab.active}" ng-repeat-complete role="tab" aria-controls="{{\'xe-tab-panel\'+ ($index+1)}}" aria-selected="{{tab.active}}"><a href="javascript:void(0);" tabindex="0" id="{{\'xe-tab\'+ ($index+1)}}" title="{{tab.heading}}" ng-if="tab.state">{{tab.heading}} <span></span> </a><a href="#" id="{{\'xe-tab\'+ ($index+1)}}" title="{{tab.heading}}" ng-if="!tab.state">{{tab.heading}} <span></span></a></li></ul><div class="xe-tab-content" role="presentation"><ng-transclude></ng-transclude></div></div>')}]);
angular.module("templates/tabPanel.html",[]).run(["$templateCache",function(a){a.put("templates/tabPanel.html",'<div class="xe-tab-container" role="presentation"><div id="{{ \'xe-tab-panel\'+ tabIndex}}" class="xe-tab-panel" ng-show="active" ng-class="{active: active }" role="tabpanel" aria-labelledby="{{\'xe-tab\'+ tabIndex}}" content="" aria-hidden="{{ !active }}"></div></div>')}]);
angular.module("templates/timePicker.html",[]).run(["$templateCache",function(a){a.put("templates/timePicker.html",'<div class="xe-time-container" role="presentation"><div class="input-outerContainer"><div class="input-container"><input class="input-field xeTimePickerTextField" name="{{xeName}}" ng-model="displayModel" placeholder="{{xeTimePlaceholder}}" id="{{xeId}}" title="{{\'js.input.timepicker.info\' | xei18n}}" aria-label="{{\'timepicker.textbox.aria.label\' | xei18n}} {{\'default.time.format\' | xei18n}}"> <button type="button" class="inputicon" tabindex="-1"></button></div><div class="timepickerContainer" ng-show="toggleContainer"><div id="article" class="mainContainer"><div class="wrappingDiv hrsContainer" ng-class="timeObject.is24Hrformat ? \'LTRpadding24hrs\' : \'LTRpadding12hrs\'"><div class="itemContainer previousDiv"></div><ul role="listbox" class="dropdown ulContainer hrsFocus"><li class="hrs_{{$index}}" role="option" data-ng-repeat="hr in timeObject.hours" value="{{hr}}" data-ng-bind="hr"></li></ul><div class="itemContainer nextDiv"></div></div><div class="wrappingDiv minContainer"><div class="itemContainer previousDiv"></div><ul class="dropdown ulContainer minFocus" role="listbox"><li role="option" class="mins_{{$index}}" tabindex="0" data-ng-repeat="mins in timeObject.minutes" value="{{mins}}" data-ng-bind="mins"></li></ul><div class="itemContainer nextDiv" data-ng-bind="timeObject.configstep"></div></div><div role="listbox" class="wrappingDiv meridianContainer" ng-if="!timeObject.is24Hrformat" aria-label="{{\'timepicker.am.pm.aria.label\' | xei18n}}"><div class="itemContainer"></div><div role="option" aria-live="assertive" class="tickerContainer pushmeBorder meridianFocus" tabindex="0" ng-bind="\'default.time.am\' | xei18n"></div><div aria-label="{{\'default.time.pm\' | xei18n}}" class="tickerContainer meridianPm" ng-bind="\'default.time.pm\' | xei18n"></div></div></div><footer class="timerFooter"><xe-button class="footerButton footercancelButton" xe-type="secondary" xe-label="{{\'js.timepicker.cancel\' | xei18n}}" aria-label="{{\'js.timepicker.cancel\' | xei18n}}"></xe-button><xe-button class="footerButton" xe-type="primary" xe-label="{{\'js.timepicker.set\' | xei18n}}" aria-label="{{\'js.timepicker.set\' | xei18n}}"></xe-button><div class="extraDiv" tabindex="0"></div></footer></div></div></div>')}]);
angular.module("templates/timePicker_rtl.html",[]).run(["$templateCache",function(a){a.put("templates/timePicker_rtl.html",'<div class="xe-time-container" role="presentation"><div class="input-outerContainer"><div class="input-container"><input class="input-field xeTimePickerTextField" name="{{xeName}}" ng-model="displayModel" placeholder="{{xeTimePlaceholder}}" id="{{xeId}}" title="{{\'js.input.timepicker.info\' | xei18n}}" aria-label="{{\'timepicker.textbox.aria.label\' | xei18n}} {{\'default.time.format\' | xei18n}}"> <button type="button" class="inputicon" tabindex="-1"></button></div><div class="timepickerContainer" ng-show="toggleContainer"><div id="article" class="mainContainer"><div role="listbox" class="wrappingDiv meridianContainer rtl12hrsPadding" ng-if="!timeObject.is24Hrformat" aria-label="{{\'timepicker.am.pm.aria.label\' | xei18n}}"><div id="prevampmDiv" class="itemContainer"></div><div role="option" aria-live="assertive" class="tickerContainer pushmeBorder meridianFocus" tabindex="0" ng-bind="\'default.time.am\' | xei18n"></div><div aria-label="{{\'default.time.pm\' | xei18n}}" class="tickerContainer meridianPm" ng-bind="\'default.time.pm\' | xei18n"></div></div><div class="wrappingDiv hrsContainer" ng-class="timeObject.is24Hrformat ? \'rtl24hrsPadding\' : \'rtlhrsPadding\'"><div id="prevHrDiv" class="itemContainer previousDiv"></div><ul id="nav" role="listbox" class="dropdown ulContainer hrsFocus"><li class="hrs_{{$index}}" role="option" data-ng-repeat="hr in timeObject.hours" value="{{hr}}" data-ng-bind="hr"></li></ul><div class="itemContainer nextDiv"></div></div><div class="wrappingDiv minContainer"><div class="itemContainer previousDiv"></div><ul class="dropdown ulContainer minFocus"><li class="mins_{{$index}}" tabindex="0" data-ng-repeat="mins in timeObject.minutes" value="{{mins}}" data-ng-bind="mins"></li></ul><div class="itemContainer nextDiv" data-ng-bind="timeObject.configstep"></div></div></div><footer class="timerFooter"><xe-button class="footerButton footercancelButton" xe-type="secondary" xe-label="{{\'js.timepicker.cancel\' | xei18n}}" aria-label="{{\'js.timepicker.cancel\' | xei18n}}"></xe-button><xe-button class="footerButton" xe-type="primary" xe-label="{{\'js.timepicker.set\' | xei18n}}" aria-label="{{\'js.timepicker.set\' | xei18n}}"></xe-button><div class="extraDiv" tabindex="0"></div></footer></div></div></div>')}]);
(function(){angular.module("badge",[]).directive("xeBadge",function(){return{restrict:"E",scope:{xeLabel:"@",xeType:"@"},templateUrl:"templates/badge.html"}})})();(function(){angular.module("button",[]).directive("xeButton",function(){return{restrict:"E",scope:{xeType:"@",xeDisabled:"=",xeLabel:"@",xeBtnClick:"&",xeBtnClass:"@",xeAriaLabel:"@"},templateUrl:"templates/button.html"}})})();
(function(){angular.module("checkbox",["label"]).directive("xeCheckbox",["keyCodes","$timeout",function(a,f){return{scope:{xeId:"@",xeValue:"@",xeLabel:"@",xeLabelHidden:"@",xeModel:"=",xeOnClick:"&",xeDisabled:"=",ariaRole:"@"},restrict:"E",replace:!0,templateUrl:"templates/checkbox.html",link:function(g,h,e){g.cbClicked=function(a){g.xeDisabled||(g.xeModel=!g.xeModel,f(function(){g.xeOnClick({checked:g.xeModel,event:a})}))};h.on("keydown",function(e){e.keyCode===a.ENTER&&(e.preventDefault(),e.stopPropagation(),
g.cbClicked(e),g.$apply())})}}}])})();
(function(){angular.module("dropdown",[]).directive("xeDropdown",function(){return{restrict:"E",scope:{xeOptions:"=",xeLabel:"=",disabled:"=",ngModel:"="},require:"ngModel",controller:["$scope",function(a){a.isObject=angular.isObject(a.xeOptions[0]);a.dropDownLabel="";a.updateModel=function(f){a.xeLabel!==f?angular.isObject(f)?(a.ngModel=f,a.dropDownLabel=f.label):(a.ngModel=f,a.dropDownLabel=f):(a.ngModel=null,a.dropDownLabel=null)}}],link:function(a){angular.isDefined(a.ngModel)&&a.updateModel(a.ngModel)},
templateUrl:"templates/dropdown.html"}})})();(function(){angular.module("label",[]).directive("xeLabel",function(){return{restrict:"E",scope:{xeValue:"@",xeHidden:"@?",xeRequired:"=?",xeFor:"@"},replace:!0,templateUrl:"templates/label.html"}})})();
(function(){angular.module("radiobutton",[]).directive("xeRadioButton",["$window",function(a){return{scope:{xeLabel:"@",ngValue:"=",ngModel:"=",xeOnClick:"&",xeName:"@",xeDisabled:"=",xeId:"@"},restrict:"E",require:"ngModel",templateUrl:"templates/radio-button.html",link:function(a,g){g.on("keydown",function(h){if(32===h.keyCode||13===h.keyCode)h.preventDefault(),a.ngModel=a.ngValue,a.$apply()})}}}])})();
(function(){angular.module("simpleTextbox",[]).directive("xeSimpleTextBox",function(){return{restrict:"E",scope:{inputField:"@",xeClass:"@",value:"=",placeHolder:"@",disabled:"=",onChange:"&",onKeydown:"&",onKeypress:"&",onFocus:"&",onBlur:"&",required:"="},templateUrl:"templates/simple-textbox.html"}})})();(function(){angular.module("statusLabel",[]).directive("xeStatusLabel",function(){return{restrict:"E",scope:{xeLabel:"@",xeType:"@"},templateUrl:"templates/statusLabel.html"}})})();
(function(){angular.module("switch",[]).directive("xeSwitch",function(){return{scope:{disabled:"=",label:"=",value:"=",id:"="},templateUrl:"templates/switch.html"}})})();
(function(){angular.module("textarea",[]).directive("xeTextArea",["$filter",function(a){return{restrict:"E",scope:{ngModel:"=",xeOnChange:"&",xePlaceholder:"@",xeLabel:"=",xeId:"=",xeRequired:"=",xeReadonly:"=",xeCharCounter:"@"},templateUrl:function(a,g){return g.xeCharCounter?"templates/text-area-counter.html":"templates/text-area.html"},controller:["$scope","$element","$attrs",function(f,g,h){var e,r;h.xeCharCounter&&(e=$(".textarea-char-accessible"),0===e.length&&(e=$("<span>",{role:"status",
"aria-live":"assertive","aria-atomic":"true","aria-hidden":"false"}).addClass("textarea-char-accessible screen-reader").appendTo(document.body)));r=a("xei18n")("xe.text.limit.over",h.xeCharCounter);h.xeCharCounter&&g.find("textarea").focus(function(){var l=a("xei18n")("xe.text.chars.remaining.aria",f.charRemaining);e.text(l)});f.$watch("ngModel",function(){h.xeCharCounter&&(f.charRemaining=0>=f.charRemaining?0:h.xeCharCounter,f.ngModel&&(f.charRemaining=h.xeCharCounter-f.ngModel.length,g.find("textarea").on("keyup change",
function(a){$(this).val().length===h.xeCharCounter&&e.text(r)})))})}]}}])})();
(function(){angular.module("textbox",["ngMessages"]).directive("xeTextBox",["$filter",function(a){return{restrict:"E",scope:{xePlaceholder:"@",xeId:"@",xeRequired:"=",xeType:"@",xeReadonly:"=",xeValidate:"=",xePattern:"@",xeErrorMessages:"=",xeNotification:"@",xeLabel:"@",xeName:"@",xeMaxlength:"@",xeMinlength:"@",xeFormName:"@",ngModel:"=",ngForm:"=",xeCharMax:"@"},require:["ngModel","?ngForm"],templateUrl:function(a,g){return"password"===g.xeType?"templates/text-box-password.html":g.hasOwnProperty("xeCharMax")?
"templates/text-box-char-limit.html":"templates/text-box.html"},controller:["$scope","$element","$attrs",function(f,g,h){var e,r;h.hasOwnProperty("xeCharMax")&&(e=$(".text-box-char-accessible"),r=a("xei18n")("xe.text.limit.over",h.xeMaxlength),0===e.length&&(e=$("<span>",{role:"status","aria-live":"assertive","aria-atomic":"true","aria-hidden":"false"}).addClass("text-box-char-accessible screen-reader").appendTo(document.body)),g.find("input").on("keyup change focusout",function(a){$(this).val().length>=
h.xeMaxlength&&e.text(r);1==$(this).prop("required")&&(0<$(this).val().length?$(this).attr("aria-invalid",!1):$(this).attr("aria-invalid",!0))}))}],compile:function(a,g){var h="ngForm."+g.xeName;a.find("div.error-messages").attr("ng-messages",h+".$error");a.find("div.error-messages").attr("ng-if",h+"."+g.xeName+".$touched")}}}])})();
(function(){var a={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,COMMAND:91,MAP:{91:"COMMAND",8:"BACKSPACE",9:"TAB",13:"ENTER",16:"SHIFT",17:"CTRL",18:"ALT",19:"PAUSEBREAK",20:"CAPSLOCK",27:"ESC",32:"SPACE",33:"PAGE_UP",34:"PAGE_DOWN",35:"END",36:"HOME",37:"LEFT",38:"UP",39:"RIGHT",40:"DOWN",43:"+",44:"PRINTSCREEN",45:"INSERT",46:"DELETE",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",
57:"9",59:";",61:"=",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NUMLOCK",145:"SCROLLLOCK",186:";",187:"=",188:",",189:"-",190:".",
191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},isControl:function(f){switch(f.which){case a.COMMAND:case a.SHIFT:case a.CTRL:case a.ALT:return!0}return f.metaKey?!0:!1},isFunctionKey:function(a){a=a.which?a.which:a;return 112<=a&&123>=a},isVerticalMovement:function(f){return~[a.UP,a.DOWN].indexOf(f)},isHorizontalMovement:function(f){return~[a.LEFT,a.RIGHT,a.BACKSPACE,a.DELETE].indexOf(f)},toSeparator:function(f){var e={ENTER:"\n",TAB:"\t",SPACE:" "}[f];return e?e:a[f]?void 0:f}};void 0===angular.element.prototype.querySelectorAll&&
(angular.element.prototype.querySelectorAll=function(a){return angular.element(this[0].querySelectorAll(a))});void 0===angular.element.prototype.closest&&(angular.element.prototype.closest=function(a){for(var e=this[0],f=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector;e;){if(f.bind(e)(a))return e;e=e.parentElement}return!1});var f=0,g=angular.module("ui.select",[]).constant("uiSelectConfig",{theme:"bootstrap",searchEnabled:!0,sortable:!1,placeholder:"",refreshDelay:0,
closeOnSelect:!0,skipFocusser:!1,dropdownPosition:"auto",generateId:function(){return f+=1},appendToBody:!1}).service("uiSelectMinErr",function(){var a=angular.$$minErr("ui.select");return function(){var e=a.apply(this,arguments).message.replace(/\nhttp:\/\/errors.angularjs.org\/.*/,"");return Error(e)}}).directive("uisTranscludeAppend",function(){return{link:function(a,e,f,l,g){g(a,function(a){e.append(a)})}}}).filter("highlight",function(){return function(a,e){return e&&a?(""+a).replace(new RegExp((""+
e).replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),"gi"),'<span class="ui-select-highlight">$&</span>'):a}}).factory("uisOffset",["$document","$window",function(a,e){return function(f){var l=f[0].getBoundingClientRect();return{width:l.width||f.prop("offsetWidth"),height:l.height||f.prop("offsetHeight"),top:l.top+(e.pageYOffset||a[0].documentElement.scrollTop),left:l.left+(e.pageXOffset||a[0].documentElement.scrollLeft)}}}]);g.directive("xeUiSelectChoices",["uiSelectConfig","uisRepeatParser","uiSelectMinErr",
"$compile","$window","$timeout",function(a,e,f,l,g,c){return{restrict:"EA",require:"^xeUiSelect",replace:!0,transclude:!0,templateUrl:function(c){c.addClass("ui-select-choices");return(c.parent().attr("theme")||a.theme)+"/choices.tpl.html"},compile:function(c,I){if(!I.repeat)throw f("repeat","Expected 'repeat' expression.");return function(c,n,w,C,B){var z=w.groupBy,I=w.groupFilter,p=n.querySelectorAll(".ui-select-choices-row"),H=n.querySelectorAll(".ui-select-choices-row-inner");C.parseRepeatAttr(w,
z,I,C);C.disableChoiceExpression=w.uiDisableChoice;C.onHighlightCallback=w.onHighlight;C.dropdownPosition=w.position?w.position.toLowerCase():a.dropdownPosition;if(z){I=n.querySelectorAll(".ui-select-choices-group");if(1!==I.length)throw f("rows","Expected 1 .ui-select-choices-group but got '{0}'.",I.length);I.attr("ng-repeat",e.getGroupNgRepeatExpression())}if(1!==p.length)throw f("rows","Expected 1 .ui-select-choices-row but got '{0}'.",p.length);p.attr("ng-repeat",C.parserResult.repeatExpression(z)).attr("ng-if",
"$select.open");g.document.addEventListener&&p.attr("ng-mouseenter","$select.setActiveItem("+C.parserResult.itemName+")").attr("ng-click","$select.select("+C.parserResult.itemName+",$select.skipFocusser,$event)");if(1!==H.length)throw f("rows","Expected 1 .ui-select-choices-row-inner but got '{0}'.",H.length);H.attr("uis-transclude-append","");g.document.addEventListener||H.attr("ng-mouseenter","$select.setActiveItem("+C.parserResult.itemName+")").attr("ng-click","$select.select("+C.parserResult.itemName+
",$select.skipFocusser,$event)");l(n,B)(c);c.$watch("$select.search",function(a){a&&!C.open&&C.multiple&&(C.activate(!1,!0),C.activeIndex=C.tagging.isActivated?-1:0);!w.minimumInputLength||C.search.length>=w.minimumInputLength?(C.refresh(w.refresh),C.showMinMsg=!1):(C.minimumInputLength=w.minimumInputLength,C.showMinMsg=!0,C.items=[])});w.$observe("refreshDelay",function(){var e=c.$eval(w.refreshDelay);C.refreshDelay=void 0!==e?e:a.refreshDelay});c.$watch("$select.items",function(a,c){C.showNoResultsMsg=
0==C.items.length?!0:!1})}}}}]);g.controller("uiSelectCtrl",["$scope","$element","$timeout","$filter","uisRepeatParser","uiSelectMinErr","uiSelectConfig","$parse","$injector","$window",function(f,e,g,l,t,c,n,I,x,F){function w(a,c,e){if(a.findIndex)return a.findIndex(c,e);a=Object(a);var f=a.length>>>0,l,h;for(h=0;h<f;h+=1)if(l=a[h],c.call(e,l,h,a))return h;return-1}function C(){if(p.resetSearchInput||void 0===p.resetSearchInput&&n.resetSearchInput)p.search="",p.selected&&p.items.length&&!p.multiple&&
(p.activeIndex=w(p.items,function(a){return angular.equals(this,a)},p.selected))}function B(a,c){var e,f,l=[];for(e=0;e<c.length;e+=1)for(f=0;f<a.length;f+=1)a[f].name==[c[e]]&&l.push(a[f]);return l}function z(c){var e=!0;switch(c){case a.DOWN:!p.open&&p.multiple?p.activate(!1,!0):p.activeIndex<p.items.length-1&&p.activeIndex++;break;case a.UP:!p.open&&p.multiple?p.activate(!1,!0):(0<p.activeIndex||0===p.search.length&&p.tagging.isActivated&&-1<p.activeIndex)&&p.activeIndex--;break;case a.TAB:p.multiple&&
!p.open||p.select(p.items[p.activeIndex],!0);break;case a.ENTER:1==p.items.length?p.select(p.items[0],p.skipFocusser):p.open&&(p.tagging.isActivated||0<=p.activeIndex)?p.select(p.items[p.activeIndex],p.skipFocusser):p.activate(!1,!0);break;case a.ESC:p.close();break;default:e=!1}return e}function J(){var a=e.querySelectorAll(".ui-select-choices-content"),f=a.querySelectorAll(".ui-select-choices-row");if(1>f.length)throw c("choices","Expected multiple .ui-select-choices-row but got '{0}'.",f.length);
if(!(0>p.activeIndex)){f=f[p.activeIndex];$(".uiselect-choice-status-hidden-accessible").text("");var h=$(f).find("div:last").text(),h=l("xei18n")("uiselect.option.selected",h);$(".uiselect-choice-status-hidden-accessible").text(h);$(".uiselect-choice-status-hidden-accessible").attr("aria-selected",!0);$(".uiselect-choice-status-hidden-accessible").innerText=h;var h=f.offsetTop+f.clientHeight-a[0].scrollTop,g=a[0].offsetHeight;h>g?a[0].scrollTop+=h-g:h<f.clientHeight&&(a[0].scrollTop=p.isGrouped&&
0===p.activeIndex?0:a[0].scrollTop-(f.clientHeight-h))}}var p=this;p.placeholder=n.placeholder;p.searchEnabled=n.searchEnabled;p.sortable=n.sortable;p.refreshDelay=n.refreshDelay;p.paste=n.paste;p.removeSelected=!1;p.closeOnSelect=!0;p.skipFocusser=!1;p.search="";p.activeIndex=0;p.items=[];p.open=!1;p.focus=!1;p.disabled=!1;p.selected=void 0;p.dropdownPosition="auto";p.focusser=void 0;p.resetSearchInput=!0;p.multiple=void 0;p.disableChoiceExpression=void 0;p.tagging={isActivated:!1,fct:void 0};p.taggingTokens=
{isActivated:!1,tokens:void 0};p.lockChoiceExpression=void 0;p.clickTriggeredSelect=!1;p.$filter=l;p.minimumInputLength;var H;try{H=x.get("$animate")}catch(K){H=null}p.$animate=H;p.searchInput=e.querySelectorAll("input.ui-select-search");if(1!==p.searchInput.length)throw c("searchInput","Expected 1 input.ui-select-search but got '{0}'.",p.searchInput.length);p.isEmpty=function(){return angular.isUndefined(p.selected)||null===p.selected||""===p.selected||p.multiple&&0===p.selected.length};p.activate=
function(a,c){if(p.disabled||p.open)p.open&&p.multiple&&(p.open=!1);else if(c||C(),f.$broadcast("uis:activate"),p.open=!0,p.liveRegion=$(".uiselect-hidden-accessible"),p.liveChoicestStusRegion=$(".uiselect-choice-status-hidden-accessible"),0==p.liveRegion.length&&(c=angular.element("<span></span>"),c.attr("role","status"),c.attr("aria-live","assertive"),c.attr("class","uiselect-hidden-accessible"),angular.element(document.body).append(c)),0==p.liveChoicestStusRegion.length&&(c=angular.element("<span></span>"),
c.attr("role","status"),c.attr("aria-live","assertive"),c.attr("aria-atomic","true"),c.attr("class","uiselect-choice-status-hidden-accessible"),angular.element(document.body).append(c)),p.activeIndex=p.activeIndex>=p.items.length?0:p.activeIndex,-1===p.activeIndex&&!1!==p.taggingLabel&&(p.activeIndex=0),c=e.querySelectorAll(".ui-select-choices-content"),p.$animate&&p.$animate.on&&p.$animate.enabled(c[0]))p.$animate.on("enter",c[0],function(c,e){"close"===e&&g(function(){p.focusSearchInput(a)})});
else g(function(){p.focusSearchInput(a);if(!p.tagging.isActivated&&1<p.items.length){var c;$(".uiselect-hidden-accessible").text("");c=p.searchEnabled?l("xei18n")("uiselect.search.results",p.items.length):l("xei18n")("uiselect.search.disabled.results");$(".uiselect-hidden-accessible").text(c);$(".uiselect-hidden-accessible").innerText=c}else 0===p.items.length&&"undefined"!=p.minimumInputLength&&(c=l("xei18n")("uiselect.minimum.input.text",p.minimumInputLength),$(".uiselect-hidden-accessible").text(""),
$(".uiselect-hidden-accessible").text(c),$(".uiselect-hidden-accessible").innerText=c)})};p.focusSearchInput=function(a){p.search=a||p.search;setTimeout(function(){p.searchInput[0].focus()},10)};p.findGroupByName=function(a){return p.groups&&p.groups.filter(function(c){return c.name===a})[0]};p.parseRepeatAttr=function(a,e,g,n){function r(a){var c=f.$eval(e);p.groups=[];angular.forEach(a,function(a){var e=angular.isFunction(c)?c(a):a[c],f=p.findGroupByName(e);f?f.items.push(a):p.groups.push({name:e,
items:[a]})});g&&(a=f.$eval(g),angular.isFunction(a)?p.groups=a(p.groups):angular.isArray(a)&&(p.groups=B(p.groups,a)));p.items=[];p.groups.forEach(function(a){p.items=p.items.concat(a.items)})}function z(a){p.items=a}p.setItemsFn=e?r:z;p.parserResult=t.parse(a.repeat);p.isGrouped=!!e;p.itemProperty=p.parserResult.itemName;var w=p.parserResult.source,x=function(){var a=w(f);f.$uisSource=Object.keys(a).map(function(c){var e={};e[p.parserResult.keyName]=c;e.value=a[c];return e})};p.parserResult.keyName&&
(x(),p.parserResult.source=I("$uisSource"+p.parserResult.filters),f.$watch(w,function(a,c){a!==c&&x()},!0));p.refreshItems=function(a){a=a||p.parserResult.source(f);var c=p.selected;p.isEmpty()||angular.isArray(c)&&!c.length||!p.removeSelected?p.setItemsFn(a):void 0!==a&&(a=a.filter(function(a){return c.every(function(c){return!angular.equals(a,c)})}),p.setItemsFn(a));null!==p.items&&void 0!==p.items&&void 0!==p.items.length&&0<p.items.length?""!=p.search&&(a=l("xei18n")("uiselect.search.results",
p.items.length),$(".uiselect-hidden-accessible").text(""),$(".uiselect-hidden-accessible").text(a),$(".uiselect-hidden-accessible").innerText=a):null!==p.items&&void 0!==p.items&&void 0!==p.items.length&&0===p.items.length&&(a=l("xei18n")("uiselect.no.results.found.text"),$(".uiselect-hidden-accessible").text(""),$(".uiselect-hidden-accessible").text(a),$(".uiselect-hidden-accessible").innerText=a);"auto"!==p.dropdownPosition&&"up"!==p.dropdownPosition||f.calculateDropdownPos()};f.$watchCollection(p.parserResult.source,
function(e){if(void 0===e||null===e)p.items=[];else if(angular.isArray(e))!a.minimumInputLength||n.search.length>=a.minimumInputLength?p.refreshItems(e):(p.groups=[],p.items=[]),p.ngModel.$modelValue=null;else throw c("items","Expected an array but got '{0}'.",e);})};var G;p.refresh=function(a){void 0!==a&&(G&&g.cancel(G),G=g(function(){f.$eval(a)},p.refreshDelay))};p.isActive=function(a){if(!p.open)return!1;var c=p.items.indexOf(a[p.itemProperty]),e=c==p.activeIndex;if(!e||0>c&&!1!==p.taggingLabel||
0>c&&!1===p.taggingLabel)return!1;e&&!angular.isUndefined(p.onHighlightCallback)&&a.$eval(p.onHighlightCallback);return e};p.isDisabled=function(a){if(p.open){var c=p.items.indexOf(a[p.itemProperty]),e=!1;0<=c&&!angular.isUndefined(p.disableChoiceExpression)&&(c=p.items[c],e=!!a.$eval(p.disableChoiceExpression),c._uiSelectChoiceDisabled=e);return e}};p.select=function(a,c,e){if(!(void 0!==a&&a._uiSelectChoiceDisabled||!(p.items||p.search||p.tagging.isActivated)||a&&a._uiSelectChoiceDisabled)){if(p.tagging.isActivated){if(!1===
p.taggingLabel)if(0>p.activeIndex){if(a=void 0!==p.tagging.fct?p.tagging.fct(p.search):p.search,!a||angular.equals(p.items[0],a))return}else a=p.items[p.activeIndex];else if(0===p.activeIndex){if(void 0===a)return;if(void 0!==p.tagging.fct&&"string"===typeof a){if(a=p.tagging.fct(a),!a)return}else"string"===typeof a&&(a=a.replace(p.taggingLabel,"").trim())}if(p.selected&&angular.isArray(p.selected)&&0<p.selected.filter(function(c){return angular.equals(c,a)}).length){p.close(c);return}}p.search="";
var n;$(".uiselect-choice-status-hidden-accessible").text("");n=void 0!=p.selectedValue?l("xei18n")("uiselect.option.selected",a[p.selectedValue]):l("xei18n")("uiselect.option.selected",a.name);$(".uiselect-choice-status-hidden-accessible").text(n);$(".uiselect-choice-status-hidden-accessible").innerText=n;f.$broadcast("uis:select",a);var t={};t[p.parserResult.itemName]=a;g(function(){p.onSelectCallback(f,{$item:a,$model:p.parserResult.modelMapper(f,t)})});p.focusSearchInput("");p.closeOnSelect&&
p.close(c);e&&"click"===e.type&&(p.clickTriggeredSelect=!0)}};p.close=function(a){p.open&&(p.ngModel&&p.ngModel.$setTouched&&p.ngModel.$setTouched(),C(),p.open=!1,f.$broadcast("uis:close",a))};p.setFocus=function(){p.focus||p.focusInput[0].focus()};p.clear=function(a){p.select(void 0);a.stopPropagation();g(function(){p.focusser[0].focus()},0,!1)};p.toggle=function(a){p.open?(p.close(),a.preventDefault(),a.stopPropagation()):p.activate()};p.toggleMultiDropdown=function(a){};p.isLocked=function(a,c){var e;
(c=p.selected[c])&&!angular.isUndefined(p.lockChoiceExpression)&&(e=!!a.$eval(p.lockChoiceExpression),c._uiSelectChoiceLocked=e);return e};var T=null;p.sizeSearchInput=function(){var a=p.searchInput[0],c=p.searchInput.parent().parent()[0],e=function(){return c.clientWidth*!!a.offsetParent},l=function(c){if(0===c)return!1;var e=c-a.offsetLeft-10;50>e&&(e=c);p.searchInput.css("width",e+"px");return!0};p.searchInput.css("width","10px");g(function(){null!==T||l(e())||(T=f.$watch(e,function(a){l(a)&&(T(),
T=null)}))})};p.searchInput.on("keydown",function(c){var e=c.which;~[a.ENTER,a.ESC].indexOf(e)&&(c.preventDefault(),c.stopPropagation());~[a.ESC,a.TAB].indexOf(e)&&p.close();if(!~[a.ENTER,a.ESC].indexOf(e)&&!a.isVerticalMovement(e)&&!1===p.searchEnabled)return c.preventDefault(),c.stopPropagation(),!1;f.$apply(function(){var f=!1;if(0<p.items.length||p.tagging.isActivated){if(z(e),p.taggingTokens.isActivated){for(var l=0;l<p.taggingTokens.tokens.length;l++)p.taggingTokens.tokens[l]===a.MAP[c.keyCode]&&
0<p.search.length&&(f=!0);f&&g(function(){p.searchInput.triggerHandler("tagged");var e=p.search.replace(a.MAP[c.keyCode],"").trim();p.tagging.fct&&(e=p.tagging.fct(e));e&&p.select(e,!0)})}}else!p.open&&p.multiple&&z(e)});a.isVerticalMovement(e)&&0<p.items.length&&J();0==f.$select.search.length&&e===a.SPACE&&(c.preventDefault(),c.stopPropagation());if(e===a.ENTER||e===a.ESC||e===a.UP||a===a.DOWN)c.preventDefault(),c.stopPropagation();if(-1===p.activeIndex||!1!==p.taggingLabel&&!a.isVerticalMovement(e))p.activeIndex=
0});p.searchInput.on("paste",function(c){var e;e=window.clipboardData&&window.clipboardData.getData?window.clipboardData.getData("Text"):(c.originalEvent||c).clipboardData.getData("text/plain");if((e=p.search+e)&&0<e.length)if(p.taggingTokens.isActivated){var f=a.toSeparator(p.taggingTokens.tokens[0]);(e=e.split(f||p.taggingTokens.tokens[0]))&&0<e.length&&(f=p.search,angular.forEach(e,function(a){(a=p.tagging.fct?p.tagging.fct(a):a)&&p.select(a,!0)}),p.search=f||"",c.preventDefault(),c.stopPropagation())}else p.paste&&
(p.paste(e),p.search="",c.preventDefault(),c.stopPropagation())});p.searchInput.on("tagged",function(){g(function(){C()})});f.$on("$destroy",function(){p.searchInput.off("keyup keydown tagged blur paste")});angular.element(F).bind("resize",function(){p.sizeSearchInput()})}]);g.directive("xeUiSelect",["$document","uiSelectConfig","uiSelectMinErr","uisOffset","$compile","$parse","$timeout",function(a,e,f,l,g,c,n){return{restrict:"EA",templateUrl:function(a,c){return(c.theme||e.theme)+(angular.isDefined(c.multiple)?
"/select-multiple.tpl.html":"/select.tpl.html")},replace:!0,transclude:!0,require:["xeUiSelect","^ngModel"],scope:!0,controller:"uiSelectCtrl",controllerAs:"$select",compile:function(g,t){var F=/{(.*)}\s*{(.*)}/.exec(t.ngClass);F&&(F="{"+F[1]+", "+F[2]+"}",t.ngClass=F,g.attr("ng-class",F));angular.isDefined(t.multiple)?g.append("<ui-select-multiple/>").removeAttr("multiple"):g.append("<ui-select-single/>");t.inputId&&(g.querySelectorAll("input.ui-select-search")[0].id=t.inputId);return function(g,
t,x,z,I){function p(a){if(G.open){if((window.jQuery?!window.jQuery.contains(t[0],a.target):!t[0].contains(a.target))&&!G.clickTriggeredSelect){var c;if(G.skipFocusser)c=!0;else{var e=["input","button","textarea","select"];(c=(c=angular.element(a.target).controller("xeUiSelect"))&&c!==G)||(c=~e.indexOf(a.target.tagName.toLowerCase()))}G.close(c);g.$digest()}G.clickTriggeredSelect=!1}}function F(){null!==K&&(K.replaceWith(t),K=null,t[0].style.position="",t[0].style.left="",t[0].style.top="",t[0].style.width=
ba,G.setFocus())}var G=z[0];z=z[1];G.selectedValue=x.textSelected;G.generatedId=e.generateId();G.baseTitle=x.title||"Select box";G.focusserId="focusser-"+G.generatedId;G.focusserTitle="false"==x.searchEnabled?G.baseTitle+" focus, Single Select Search Unavailable.":G.baseTitle+" focus";var T;T=angular.isDefined(x.closeOnSelect)?c(x.closeOnSelect)():e.closeOnSelect;G.closeOnSelect=T;g.$watch("skipFocusser",function(){var a=g.$eval(x.skipFocusser);G.skipFocusser=void 0!==a?a:e.skipFocusser});G.onSelectCallback=
c(x.onSelect);G.onRemoveCallback=c(x.onRemove);G.limit=angular.isDefined(x.limit)?parseInt(x.limit,10):void 0;G.ngModel=z;G.choiceGrouped=function(a){return G.isGrouped&&a&&a.name};x.tabindex&&x.$observe("tabindex",function(a){G.focusInput.attr("tabindex",a);t.removeAttr("tabindex")});g.$watch("searchEnabled",function(){var a=g.$eval(x.searchEnabled);G.searchEnabled=void 0!==a?a:e.searchEnabled});g.$watch("sortable",function(){var a=g.$eval(x.sortable);G.sortable=void 0!==a?a:e.sortable});x.$observe("disabled",
function(){G.disabled=void 0!==x.disabled?x.disabled:!1});x.$observe("resetSearchInput",function(){var a=g.$eval(x.resetSearchInput);G.resetSearchInput=void 0!==a?a:!0});x.$observe("paste",function(){G.paste=g.$eval(x.paste)});x.$observe("tagging",function(){if(void 0!==x.tagging){var a=g.$eval(x.tagging);G.tagging={isActivated:!0,fct:!0!==a?a:void 0}}else G.tagging={isActivated:!1,fct:void 0}});x.$observe("taggingLabel",function(){void 0!==x.tagging&&(G.taggingLabel="false"===x.taggingLabel?!1:void 0!==
x.taggingLabel?x.taggingLabel:"(new)")});x.$observe("taggingTokens",function(){if(void 0!==x.tagging){var a=void 0!==x.taggingTokens?x.taggingTokens.split("|"):[",","ENTER"];G.taggingTokens={isActivated:!0,tokens:a}}});angular.isDefined(x.autofocus)&&n(function(){G.setFocus()});angular.isDefined(x.focusOn)&&g.$on(x.focusOn,function(){n(function(){G.setFocus()})});a.on("click",p);g.$on("$destroy",function(){a.off("click",p)});I(g,function(a){a=angular.element("<div>").append(a);var c=a.querySelectorAll(".ui-select-match");
c.removeAttr("ui-select-match");c.removeAttr("data-ui-select-match");if(1!==c.length)throw f("transcluded","Expected 1 .ui-select-match but got '{0}'.",c.length);t.querySelectorAll(".ui-select-match").replaceWith(c);a=a.querySelectorAll(".ui-select-choices");a.removeAttr("ui-select-choices");a.removeAttr("data-ui-select-choices");if(1!==a.length)throw f("transcluded","Expected 1 .ui-select-choices but got '{0}'.",a.length);t.querySelectorAll(".ui-select-choices").replaceWith(a)});I=g.$eval(x.appendToBody);
if(void 0!==I?I:e.appendToBody)g.$watch("$select.open",function(c){c?(c=l(t),K=angular.element('<div class="ui-select-placeholder"></div>'),K[0].style.width=c.width+"px",K[0].style.height=c.height+"px",t.after(K),ba=t[0].style.width,a.find("body").append(t),t[0].style.position="absolute",t[0].style.left=c.left+"px",t[0].style.top=c.top+"px",t[0].style.width=c.width+"px"):F()}),g.$on("$destroy",function(){F()});var K=null,ba="",V=null;g.$watch("$select.open",function(){"auto"!==G.dropdownPosition&&
"up"!==G.dropdownPosition||g.calculateDropdownPos()});var ha=function(a,c){a||l(t);c=c||l(V);V[0].style.position="absolute";V[0].style.top=-1*c.height+"px";t.addClass("direction-up")};g.calculateDropdownPos=function(){G.open?(V=angular.element(t).querySelectorAll(".ui-select-dropdown"),0!==V.length&&(V[0].style.opacity=0,n(function(){if("up"===G.dropdownPosition)ha();else{t.removeClass("direction-up");var c=l(t),e=l(V);c.top+c.height+e.height>(a[0].documentElement.scrollTop||a[0].body.scrollTop)+
a[0].documentElement.clientHeight?ha(c,e):(t.removeClass("direction-up"),c||l(t),e||l(V),V[0].style.position="",V[0].style.top="")}V[0].style.opacity=1}))):null!==V&&0!==V.length&&(V[0].style.position="",V[0].style.top="",t.removeClass("direction-up"))}}}}}]);g.directive("xeUiSelectMatch",["uiSelectConfig",function(a){return{restrict:"EA",require:"^xeUiSelect",replace:!0,transclude:!0,templateUrl:function(e){e.addClass("ui-select-match");var f=e.parent().attr("theme")||a.theme;e=e.parent().attr("multiple");
return f+(e?"/match-multiple.tpl.html":"/match.tpl.html")},link:function(e,f,l,g){function c(a){g.allowClear=angular.isDefined(a)?""===a?!0:"true"===a.toLowerCase():!1}g.lockChoiceExpression=l.uiLockChoice;l.$observe("placeholder",function(c){g.placeholder=void 0!==c?c:a.placeholder});l.$observe("allowClear",c);c(l.allowClear);g.multiple&&g.sizeSearchInput()}}}]);g.directive("uiSelectMultiple",["uiSelectMinErr","$timeout",function(f,e){return{restrict:"EA",require:["^xeUiSelect","^ngModel"],controller:["$scope",
"$timeout",function(a,e){var f=this,c=a.$select,g;angular.isUndefined(c.selected)&&(c.selected=[]);a.$evalAsync(function(){g=a.ngModel});f.activeMatchIndex=-1;f.updateModel=function(){g.$setViewValue(Date.now());f.refreshComponent()};f.refreshComponent=function(){c.refreshItems();c.sizeSearchInput()};f.removeChoice=function(g){var h=c.selected[g];if(!h._uiSelectChoiceLocked){var n={};n[c.parserResult.itemName]=h;c.selected.splice(g,1);f.activeMatchIndex=-1;c.sizeSearchInput();e(function(){c.onRemoveCallback(a,
{$item:h,$model:c.parserResult.modelMapper(a,n)})});f.updateModel();c.setFocus()}};f.getPlaceholder=function(){if(!c.selected||!c.selected.length)return c.placeholder}}],controllerAs:"$selectMultiple",link:function(g,l,t,c){function n(a){return angular.isNumber(a.selectionStart)?a.selectionStart:a.value.length}function I(c){var e=n(w.searchInput[0]),f=w.selected.length-1,l=B.activeMatchIndex,g=B.activeMatchIndex+1,h=B.activeMatchIndex-1,r=l;if(0<e||w.search.length&&c==a.RIGHT)return!1;w.close();r=
function(){switch(c){case a.LEFT:if(~B.activeMatchIndex){var e=w.selected[h].name;$(".uiselect-choice-status-hidden-accessible").text(e);return h}e=w.selected[f].name;$(".uiselect-choice-status-hidden-accessible").text(e);return f;case a.RIGHT:if(~B.activeMatchIndex&&l!==f)return e=w.selected[g].name,$(".uiselect-choice-status-hidden-accessible").text(e),g;w.activate();return!1;case a.BACKSPACE:return~B.activeMatchIndex?(B.removeChoice(l),h):f;case a.DELETE:return~B.activeMatchIndex?(B.removeChoice(B.activeMatchIndex),
l):!1}}();B.activeMatchIndex=w.selected.length&&!1!==r?Math.min(f,Math.max(0,r)):-1;return!0}function x(a){return void 0===a||void 0===w.search?!1:0<a.filter(function(a){return void 0===w.search.toUpperCase()||void 0===a?!1:a.toUpperCase()===w.search.toUpperCase()}).length}function F(a,c){var e=-1;if(angular.isArray(a)){a=angular.copy(a);for(var f=0;f<a.length;f++)if(void 0===w.tagging.fct)a[f]+" "+w.taggingLabel===c&&(e=f);else{var l=a[f];angular.isObject(l)&&(l.isTag=!0);angular.equals(l,c)&&(e=
f)}}return e}var w=c[0],C=g.ngModel=c[1],B=g.$selectMultiple;w.multiple=!0;w.removeSelected=!0;w.focusInput=w.searchInput;C.$isEmpty=function(a){return!a||0===a.length};C.$parsers.unshift(function(){for(var a,c=[],e=w.selected.length-1;0<=e;e--)a={},a[w.parserResult.itemName]=w.selected[e],a=w.parserResult.modelMapper(g,a),c.unshift(a);return c});C.$formatters.unshift(function(a){var c=w.parserResult.source(g,{$select:{search:""}}),e={},f;if(!c)return a;var l=[],h=function(a,c){if(a&&a.length){for(var h=
a.length-1;0<=h;h--){e[w.parserResult.itemName]=a[h];f=w.parserResult.modelMapper(g,e);if(w.parserResult.trackByExp){var n=/(\w*)\./.exec(w.parserResult.trackByExp),t=/\.([^\s]+)/.exec(w.parserResult.trackByExp);if(n&&0<n.length&&n[1]==w.parserResult.itemName&&t&&0<t.length&&f[t[1]]==c[t[1]])return l.unshift(a[h]),!0}if(angular.equals(f,c))return l.unshift(a[h]),!0}return!1}};if(!a)return l;for(var n=a.length-1;0<=n;n--)h(w.selected,a[n])||h(c,a[n])||l.unshift(a[n]);return l});g.$watchCollection(function(){return C.$modelValue},
function(a,c){c!=a&&(C.$modelValue=null,B.refreshComponent())});C.$render=function(){if(!angular.isArray(C.$viewValue))if(angular.isUndefined(C.$viewValue)||null===C.$viewValue)w.selected=[];else throw f("multiarr","Expected model value to be array but got '{0}'",C.$viewValue);w.selected=C.$viewValue;B.refreshComponent();g.$evalAsync()};g.$on("uis:select",function(a,c){w.selected.length>=w.limit||(w.selected.push(c),B.updateModel())});g.$on("uis:activate",function(){B.activeMatchIndex=-1});g.$watch("$select.disabled",
function(a,c){c&&!a&&w.sizeSearchInput()});w.searchInput.on("keydown",function(c){var e=c.which;g.$apply(function(){var f=!1;a.isHorizontalMovement(e)&&(f=I(e));f&&e!=a.TAB&&(c.preventDefault(),c.stopPropagation())})});w.searchInput.on("keyup",function(c){a.isVerticalMovement(c.which)||g.$evalAsync(function(){w.activeIndex=!1===w.taggingLabel?-1:0});if(w.tagging.isActivated&&0<w.search.length&&!(c.which===a.TAB||a.isControl(c)||a.isFunctionKey(c)||c.which===a.ESC||a.isVerticalMovement(c.which))&&
(w.activeIndex=!1===w.taggingLabel?-1:0,!1!==w.taggingLabel)){var e=angular.copy(w.items);c=angular.copy(w.items);var f,l,h=!1,n=-1,t;if(void 0!==w.tagging.fct){l=w.$filter("filter")(e,{isTag:!0});0<l.length&&(t=l[0]);0<e.length&&t&&(h=!0,e=e.slice(1,e.length),c=c.slice(1,c.length));f=w.tagging.fct(w.search);if(c.some(function(a){return angular.equals(a,w.tagging.fct(w.search))})||w.selected.some(function(a){return angular.equals(a,f)})){g.$evalAsync(function(){w.activeIndex=0;w.items=e});return}f.isTag=
!0}else{l=w.$filter("filter")(e,function(a){return a.match(w.taggingLabel)});0<l.length&&(t=l[0]);l=e[0];void 0!==l&&0<e.length&&t&&(h=!0,e=e.slice(1,e.length),c=c.slice(1,c.length));f=w.search+" "+w.taggingLabel;if(-1<F(w.selected,w.search))return;if(x(c.concat(w.selected))){h&&(e=c,g.$evalAsync(function(){w.activeIndex=0;w.items=e}));return}if(x(c)){h&&(w.items=c.slice(1,c.length));return}}h&&(n=F(w.selected,f));-1<n?e=e.slice(n+1,e.length-1):(e=[],e.push(f),e=e.concat(c));g.$evalAsync(function(){w.activeIndex=
0;w.items=e})}});w.searchInput.on("blur",function(){e(function(){B.activeMatchIndex=-1})})}}}]);g.directive("uiSelectSingle",["$timeout","$compile",function(f,e){return{restrict:"EA",require:["^xeUiSelect","^ngModel"],link:function(g,l,t,c){var n=c[0],I=c[1];I.$parsers.unshift(function(a){var c={};c[n.parserResult.itemName]=a;return n.parserResult.modelMapper(g,c)});I.$formatters.unshift(function(a){var c=n.parserResult.source(g,{$select:{search:""}}),e={},f;if(c){var l=function(c){e[n.parserResult.itemName]=
c;f=n.parserResult.modelMapper(g,e);return f==a};if(n.selected&&l(n.selected))return n.selected;for(var h=c.length-1;0<=h;h--)if(l(c[h]))return c[h]}return a});g.$watch("$select.selected",function(a){I.$viewValue!==a&&I.$setViewValue(a)});I.$render=function(){n.selected=I.$viewValue};g.$on("uis:select",function(a,c){n.selected=c});g.$on("uis:close",function(a,c){f(function(){n.focusser.prop("disabled",!1);c||n.focusser[0].focus()},0,!1)});g.$on("uis:activate",function(){x.prop("disabled",!0)});var x=
angular.element("<input ng-disabled='$select.disabled' class='ui-select-focusser ui-select-offscreen' type='text' id='{{ $select.focusserId }}' aria-label='{{ $select.focusserTitle }}' aria-haspopup='true' role='button'/>");e(x)(g);n.focusser=x;n.focusInput=x;l.parent().append(x);x.bind("focus",function(){g.$evalAsync(function(){n.focus=!0})});x.bind("blur",function(){g.$evalAsync(function(){n.focus=!1})});x.bind("keydown",function(c){if(c.which===a.BACKSPACE)c.preventDefault(),c.stopPropagation(),
n.select(void 0),g.$apply();else if(c.which!==a.TAB&&!a.isControl(c)&&!a.isFunctionKey(c)&&c.which!==a.ESC){if(c.which==a.DOWN||c.which==a.UP||c.which==a.ENTER||c.which==a.SPACE)return c.preventDefault(),c.stopPropagation(),n.activate(),!1;g.$digest()}});x.bind("keyup input",function(c){c.which===a.TAB||a.isControl(c)||a.isFunctionKey(c)||c.which===a.ESC||c.which==a.ENTER||c.which===a.BACKSPACE||(n.activate(x.val()),x.val(""),g.$digest())})}}}]);g.directive("uiSelectSort",["$timeout","uiSelectConfig",
"uiSelectMinErr",function(a,e,f){return{require:"^xeUiSelect",link:function(e,g,c,n){if(null===e[c.uiSelectSort])throw f("sort","Expected a list to sort");var I=angular.extend({axis:"horizontal"},e.$eval(c.uiSelectSortOptions)).axis;e.$watch(function(){return n.sortable},function(a){a?g.attr("draggable",!0):g.removeAttr("draggable")});g.on("dragstart",function(a){g.addClass("dragging");(a.dataTransfer||a.originalEvent.dataTransfer).setData("text",e.$index.toString())});g.on("dragend",function(){g.removeClass("dragging")});
var x=function(a,c){this.splice(c,0,this.splice(a,1)[0])},F=function(a){a.preventDefault();("vertical"===I?a.offsetY||a.layerY||(a.originalEvent?a.originalEvent.offsetY:0):a.offsetX||a.layerX||(a.originalEvent?a.originalEvent.offsetX:0))<this["vertical"===I?"offsetHeight":"offsetWidth"]/2?(g.removeClass("dropping-after"),g.addClass("dropping-before")):(g.removeClass("dropping-before"),g.addClass("dropping-after"))},w,C=function(c){c.preventDefault();var e=parseInt((c.dataTransfer||c.originalEvent.dataTransfer).getData("text"),
10);a.cancel(w);w=a(function(){B(e)},20)},B=function(a){var f=e.$eval(c.uiSelectSort),h=f[a],n=null,n=g.hasClass("dropping-before")?a<e.$index?e.$index-1:e.$index:a<e.$index?e.$index:e.$index+1;x.apply(f,[a,n]);e.$apply(function(){e.$emit("uiSelectSort:change",{array:f,item:h,from:a,to:n})});g.removeClass("dropping");g.removeClass("dropping-before");g.removeClass("dropping-after");g.off("drop",C)};g.on("dragenter",function(){g.hasClass("dragging")||(g.addClass("dropping"),g.on("dragover",F),g.on("drop",
C))});g.on("dragleave",function(a){a.target==g&&(g.removeClass("dropping"),g.removeClass("dropping-before"),g.removeClass("dropping-after"),g.off("dragover",F),g.off("drop",C))})}}}]);g.service("uisRepeatParser",["uiSelectMinErr","$parse",function(a,e){this.parse=function(f){var l;l=f.match(/^\s*(?:([\s\S]+?)\s+as\s+)?(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+(\s*[\s\S]+?)?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!l)throw a("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",
f);f=l[5];var g="";if(l[3]){f=l[5].replace(/(^\()|(\)$)/g,"");var c=l[5].match(/^\s*(?:[\s\S]+?)(?:[^\|]|\|\|)+([\s\S]*)\s*$/);c&&c[1].trim()&&(g=c[1],f=f.replace(g,""))}return{itemName:l[4]||l[2],keyName:l[3],source:e(f),filters:g,trackByExp:l[6],modelMapper:e(l[1]||l[4]||l[2]),repeatExpression:function(a){a=this.itemName+" in "+(a?"$group.items":"$select.items");this.trackByExp&&(a+=" track by "+this.trackByExp);return a}}};this.getGroupNgRepeatExpression=function(){return"$group in $select.groups"}}])})();
angular.module("ui.select").run(["$templateCache",function(a){a.put("bootstrap/choices.tpl.html",'<ul class="ui-select-choices ui-select-choices-content ui-select-dropdown dropdown-menu" role="listbox" ng-show="$select.open"><li class="ui-select-choices-group" id="ui-select-choices-{{ $select.generatedId }}"><div class="divider" ng-show="$select.isGrouped && $index > 0"></div><div ng-show="$select.isGrouped" class="ui-select-choices-group-label dropdown-header" ng-bind="$group.name"></div><div id="ui-select-choices-row-{{ $select.generatedId }}-{{$index}}" class="ui-select-choices-row" ng-class="{active: $select.isActive(this), disabled: $select.isDisabled(this)}" role="option"><a href="" class="ui-select-choices-row-inner"></a></div></li></ul>');
a.put("bootstrap/match-multiple.tpl.html",'<span class="ui-select-match"><span ng-repeat="$item in $select.selected"><span class="ui-select-match-item btn btn-default btn-xs" tabindex="-1" type="button" ng-disabled="$select.disabled" ng-click="$selectMultiple.activeMatchIndex = $index;" ng-class="{\'btn-primary\':$selectMultiple.activeMatchIndex === $index, \'select-locked\':$select.isLocked(this, $index)}" ui-select-sort="$select.selected"><span class="close ui-select-match-close" ng-hide="$select.disabled" ng-click="$selectMultiple.removeChoice($index)">&nbsp;&times;</span> <span uis-transclude-append=""></span></span></span></span>');
a.put("bootstrap/match.tpl.html",'<div class="ui-select-match" ng-hide="$select.open" ng-disabled="$select.disabled" ng-class="{\'btn-default-focus\':$select.focus}"><span tabindex="-1" class="btn btn-default form-control ui-select-toggle" aria-label="{{ $select.baseTitle }} activate" ng-disabled="$select.disabled" ng-click="$select.activate()" style="outline: 0;"><span ng-show="$select.isEmpty()" class="ui-select-placeholder text-muted">{{$select.placeholder}}</span> <span ng-hide="$select.isEmpty()" class="ui-select-match-text pull-left" ng-class="{\'ui-select-allow-clear\': $select.allowClear && !$select.isEmpty()}" ng-transclude=""></span> <i class="caret pull-right" ng-click="$select.toggle($event)"></i> <a ng-show="$select.allowClear && !$select.isEmpty()" aria-label="{{ $select.baseTitle }} clear" style="margin-right: 10px" ng-click="$select.clear($event)" class="btn btn-xs btn-link pull-right"><i class="glyphicon glyphicon-remove" aria-hidden="true"></i></a></span></div>');
a.put("bootstrap/select-multiple.tpl.html",'<div class="ui-select-container ui-select-multiple ui-select-bootstrap dropdown form-control" ng-class="{open: $select.open}"><div><div class="ui-select-match"></div><input type="text" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="ui-select-search input-xs" placeholder="{{$selectMultiple.getPlaceholder()}}" ng-disabled="$select.disabled" ng-hide="$select.disabled" ng-click="$select.activate()" ng-model="$select.search" role="application" aria-label="{{ $select.baseTitle }}" ondrop="return false;"></div><div class="ui-select-choices"></div></div>');
a.put("bootstrap/select.tpl.html",'<div class="ui-select-container ui-select-bootstrap dropdown" ng-class="{open: $select.open}"><div class="ui-select-match"></div><input type="text" autocomplete="off" tabindex="-1" aria-expanded="true" aria-label="{{ $select.baseTitle }}" aria-owns="ui-select-choices-{{ $select.generatedId }}" aria-activedescendant="ui-select-choices-row-{{ $select.generatedId }}-{{ $select.activeIndex }}" class="form-control ui-select-search" placeholder="{{$select.placeholder}}" ng-model="$select.search" ng-show="$select.searchEnabled && $select.open"><div class="ui-select-choices"></div></div>');
a.put("select2/choices.tpl.html",'<ul class="ui-select-choices ui-select-choices-content select2-results" ><li ng-show="$select.showMinMsg" class="select2-no-results" role="listbox" ng-bind="\'uiselect.minimum.input.text\' | xei18n: $select.minimumInputLength" aria-live="polite" ></li><li ng-show="$select.showNoResultsMsg && !$select.showMinMsg" role="listbox"  class="select2-no-results "  ng-bind="\'uiselect.no.results.found.text\' | xei18n" > <li class="ui-select-choices-group" ng-class="{\'select2-result-with-children\': $select.choiceGrouped($group) }" role="listbox"  ><div ng-show="$select.choiceGrouped($group) && !$select.showNoResultsMsg && !$select.showMinMsg" class="ui-select-choices-group-label select2-result-label" ng-bind="$group.name"></div><ul ng-show="!$select.showNoResultsMsg && !$select.showMinMsg" role="listbox" id="ui-select-choices-{{ $select.generatedId }}" ng-class="{\'select2-result-sub\': $select.choiceGrouped($group), \'select2-result-single\': !$select.choiceGrouped($group) }"><li role="listbox" id="ui-select-choices-row-{{ $select.generatedId }}-{{$index}}" class="ui-select-choices-row"  ng-class="{\'select2-highlighted\': $select.isActive(this), \'select2-disabled\': $select.isDisabled(this)}" ><div class="select2-result-label ui-select-choices-row-inner"></div></li></ul></li></ul>');
a.put("select2/match-multiple.tpl.html",'<span class="ui-select-match"><li class="ui-select-match-item select2-search-choice" ng-repeat="$item in $select.selected" ng-class="{\'select2-search-choice-focus\':$selectMultiple.activeMatchIndex === $index, \'select2-locked\':$select.isLocked(this, $index)}" ui-select-sort="$select.selected"><span uis-transclude-append=""></span> <a class="ui-select-match-close select2-search-choice-close" ng-click="$selectMultiple.removeChoice($index)" tabindex="-1"></a></li></span>');
a.put("select2/match.tpl.html",'<a class="select2-choice ui-select-match" ng-class="{\'select2-default\': $select.isEmpty()}" ng-click="$select.toggle($event)" aria-label="{{ $select.baseTitle }} select"><span ng-show="$select.isEmpty()" class="select2-chosen">{{$select.placeholder}}</span> <span ng-hide="$select.isEmpty()" class="select2-chosen" ng-transclude=""></span> <abbr ng-if="$select.allowClear && !$select.isEmpty()" class="select2-search-choice-close" ng-click="$select.clear($event)"></abbr> <span class="select2-arrow ui-select-toggle"><b></b></span></a>');
a.put("select2/select-multiple.tpl.html",'<div class="ui-select-container ui-select-multiple select2 select2-container select2-container-multi" ng-class="{\'select2-container-active select2-dropdown-open open\': $select.open, \'select2-container-disabled\': $select.disabled}"><ul class="select2-choices" ng-click="$select.activate()"><span class="ui-select-match"></span><li class="select2-search-field"><input type="text" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="application" aria-expanded="true" aria-owns="ui-select-choices-{{ $select.generatedId }}" aria-label="{{ $select.baseTitle }}" aria-activedescendant="ui-select-choices-row-{{ $select.generatedId }}-{{ $select.activeIndex }}" class="select2-input ui-select-search" placeholder="{{$selectMultiple.getPlaceholder()}}" ng-disabled="$select.disabled" ng-hide="$select.disabled" ng-model="$select.search"  style="width: 34px;" ondrop="return false;"/></li></ul><div class="ui-select-dropdown select2-drop select2-with-searchbox select2-drop-active" ng-class="{\'select2-display-none\': !$select.open}"><div class="ui-select-choices"></div></div></div>');
a.put("select2/select.tpl.html",'<div class="ui-select-container select2 select2-container" ng-class="{\'select2-container-active select2-dropdown-open open\': $select.open, \'select2-container-disabled\': $select.disabled, \'select2-container-active\': $select.focus, \'select2-allowclear\': $select.allowClear && !$select.isEmpty()}"><div class="ui-select-match"></div><div class="ui-select-dropdown select2-drop select2-with-searchbox select2-drop-active" ng-class="{\'select2-display-none\': !$select.open}"><div ng-class=" {\'ui-select-search-hidden\' : !$select.searchEnabled , \'select2-search\' : $select.searchEnabled , \'search-container\' : $select.searchEnabled }"><input type="text" autocomplete="off" aria-autocomplete="list" autocorrect="false" autocapitalize="off" spellcheck="false" role="application" aria-expanded="true" aria-owns="ui-select-choices-{{ $select.generatedId }}" aria-label="{{ $select.baseTitle }}" aria-activedescendant="ui-select-choices-row-{{ $select.generatedId }}-{{ $select.activeIndex }}" class="ui-select-search select2-input" ng-model="$select.search"></div><div class="ui-select-choices"></div></div></div>');
a.put("selectize/choices.tpl.html",'<div ng-show="$select.open" class="ui-select-choices ui-select-dropdown selectize-dropdown single"><div class="ui-select-choices-content selectize-dropdown-content"><div class="ui-select-choices-group optgroup" role="listbox"><div ng-show="$select.isGrouped" class="ui-select-choices-group-label optgroup-header" ng-bind="$group.name"></div><div role="option" class="ui-select-choices-row" ng-class="{active: $select.isActive(this), disabled: $select.isDisabled(this)}"><div class="option ui-select-choices-row-inner" data-selectable=""></div></div></div></div></div>');
a.put("selectize/match.tpl.html",'<div ng-hide="($select.open || $select.isEmpty())" class="ui-select-match" ng-transclude=""></div>');a.put("selectize/select.tpl.html",'<div class="ui-select-container selectize-control single" ng-class="{\'open\': $select.open}"><div class="selectize-input" ng-class="{\'focus\': $select.open, \'disabled\': $select.disabled, \'selectize-focus\' : $select.focus}" ng-click="$select.open && !$select.searchEnabled ? $select.toggle($event) : $select.activate()"><div class="ui-select-match"></div><input type="text" autocomplete="off" tabindex="-1" class="ui-select-search ui-select-toggle" ng-click="$select.toggle($event)" placeholder="{{$select.placeholder}}" ng-model="$select.search" ng-hide="!$select.searchEnabled || ($select.selected && !$select.open)" ng-disabled="$select.disabled" aria-label="{{ $select.baseTitle }}"></div><div class="ui-select-choices"></div></div>')}]);
(function(){angular.module("xeUISelect",["ui.select","ngSanitize"]).filter("propsFilter",function(){return function(a,f){var g=[];angular.isArray(a)?a.forEach(function(a){for(var e=!1,r=Object.keys(f),l=0;l<r.length;l++){var t=r[l],c=f[t].toLowerCase();if(-1!==a[t].toString().toLowerCase().indexOf(c)){e=!0;break}}e&&g.push(a)}):g=a;return g}}).directive("reachInfinity",["$parse","$timeout","$q",function(a,f,g){function h(a){a=a[0]||a;return isNaN(a.offsetHeight)?a.document.documentElement.clientHeight:
a.offsetHeight}function e(a){if(a[0].getBoundingClientRect&&!a.css("none")){var e=a[0].getBoundingClientRect().top;a=a[0]||a;a=isNaN(window.pageYOffset)?a.document.documentElement.scrollTop:a.ownerDocument.defaultView.pageYOffset;return e+a}}function r(a,e,c){var f=!1;c=c||window;var g=function(){f||(f=!0,requestAnimationFrame(function(){c.dispatchEvent(new CustomEvent(e));f=!1}))};c.addEventListener(a,g);return function(){c.removeEventListener(a,g)}}return{link:function(l,t,c){function n(){var f=
t.querySelectorAll(".ui-select-choices-row");if(0===f.length)return!1;var n=angular.element(f[f.length-1]);I=angular.element(t.querySelectorAll(".ui-select-choices-content"));var w=function(){var r=h(I),p=0;void 0!==e(I)&&(p=e(I));e(n)-p+h(n)-r<=h(I)*(x+1)&&g.when(a(c.reachInfinity)(l)).then(function(){setTimeout(function(){f=t.querySelectorAll(".ui-select-choices-row");n=angular.element(f[f.length-1])},0)})};F=r("scroll","optimizedScroll",I[0]);I.on("optimizedScroll",w);l.$on("$destroy",function(){F();
I.off("optimizedScroll",w)});return!0}var I=t,x=angular.isDefined(c.scrollDistance)?parseInt(c.scrollDistance):.3,F,w=l.$watch("$select.open",function(a){a&&f(function(){n()&&w()})})}}}])})();angular.module("external-resouces",["pascalprecht.translate","ngSanitize"]);
(function(){angular.module("xe-ui-components").constant("keyCodes",{A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_ADD:107,NUMPAD_ENTER:108,NUMPAD_SUBTRACT:109,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,
F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,COLON:186,EQUALS:187,UNDERSCORE:189,QUESTION_MARK:191,TILDE:192,OPEN_BRACKET:219,BACKWARD_SLASH:220,CLOSED_BRACKET:221,QUOTES:222,BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,RETURN:13,SHIFT:16,CONTROL:17,ALT:18,CAPS_LOCK:20,ESC:27,SPACEBAR:32,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,HELP:47,NUM_LOCK:144}).run(["$rootScope","$window","getlocale",
"Language","$translate",function(a,f,g,h,e){a.isMAC=-1!==f.navigator.userAgent.indexOf("Mac");a.isRtl=h.isRtl();e.use(g.getUserLocale())}])})();
(function(){angular.module("utils",["ngResource"]).directive("numbersOnly",function(){return{require:"ngModel",link:function(a,f,g,h){h.$parsers.push(function(a){if(void 0===a)return"";var f=a.replace(/[^0-9]/g,"");f!==a&&(h.$setViewValue(f),h.$render());return f})}}}).directive("browserDetect",function(){return{link:function(a,f){a=angular||{};var g=navigator.userAgent;a.ISFF=-1!==g.indexOf("Firefox");a.ISOPERA=-1!==g.indexOf("Opera");a.ISCHROME=-1!==g.indexOf("Chrome");a.ISSAFARI=-1!==g.indexOf("Safari")&&
!a.ISCHROME;a.ISWEBKIT=-1!==g.indexOf("WebKit");a.ISIE=0<g.indexOf("Trident")||0<navigator.userAgent.indexOf("MSIE");a.ISIE9=0<g.indexOf("MSIE 9");a.ISIE10=0<g.indexOf("MSIE 10");a.ISIE11UP=-1===g.indexOf("MSIE")&&0<g.indexOf("Trident");a.ISIE10UP=a.ISIE10||a.ISIE11UP;a.ISIE9UP=a.ISIE9||a.ISIE10UP;a.ISIE9?f.addClass("ie ie9"):a.ISCHROME?f.addClass("modern chrome"):f.addClass("modern")}}}).directive("continuousScroll",["$window",function(a){return{restrict:"A",scope:{continuousScroll:"&",scrollParent:"@"},
link:function(f,g){var h;h="body"===f.scrollParent?angular.element(a):""!==f.scrollParent?angular.element("#"+f.scrollParent):g;var e=_.throttle(function(a){500>=("body"===f.scrollParent?angular.element(document).height():a[0].scrollHeight)-a.scrollTop()-a.height()&&f.continuousScroll()},500);h.bind("scroll",function(){e(h)});f.$on("$destroy",function(){h.off("scroll")})}}}]).directive("xeKeypress",["keyCodes",function(a){var f=function(f,h){h=h.split(",");var e;for(e=0;e<h.length;e+=1)if(f===a[h[e]])return!0;
return!1};return{restrict:"A",link:function(a,h,e){h.bind("keypress",function(h){f(h.which||h.keyCode,e.codes)&&a.$apply(function(){a.$eval(e.xeKeypress,{$event:h})})})}}}]).factory("accessibility",["$rootScope","keyCodes","$document",function(a,f,g){function h(a,h){g.off("keydown",l).on("keydown",{table:a,parent:h},l);a.on("keydown",function(g){var l,F,w=angular.element(g.target);w.closest(".column-filter-container");var C=w.is("input.search"),B=!!w.closest(".thead").length,z=!!w.closest(".tbody").length;
a.find(".tbody tbody").is(":empty");w.closest(".tfoot");if(!w.is("[xe-keypress]")){switch(g.which){case f.ENTER:if(C)l=a.find(".tbody tbody tr:first-child"),a.find(".active-row").removeClass("active-row"),a.find(".active").removeClass("active");else if(z||B)F=w;break;case f.SPACEBAR:if(B)F=w;else return!0;break;default:l=r(g,a.find(":not([global-key])[shortcut-key]")),t(l,h)}l&&l.length?(l.select().focus(),l.is("tr")&&l.addClass("active-row"),l=l.find("a, :input, [tabindex=0], .xe-checkbox").first().not(":hidden, .disabled, :disabled, [readonly]"),
l.length&&e(l),g.preventDefault()):F&&F.length&&(F.is("a")?(F=F.get(0),F.click()):F.select().focus().click(),g.preventDefault())}})}function e(a){a.select().focus().on("focusout",function(a){a=angular.element(a.target);a.closest("th").removeClass("focus-ring");a.closest("td").removeClass("active focus-ring");a.off("focusout")});a.closest("tr th").addClass("focus-ring");a.closest("tr td").addClass("active focus-ring")}function r(a,e){if(!angular.isUndefined(e)&&e.length){for(var g,l=0;l<e.length;l++){var h=
["ctrl","alt","shift","meta"],r=e.eq(l).attr("shortcut-key").split("+");if(1===r.length){if(f[r[0]]===a.which){g=e.eq(l);break}}else if(2===r.length&&-1!==h.indexOf(r[0].toLowerCase())){if(a[r[0].toLowerCase()+"Key"]&&f[r[1]]===a.which){g=e.eq(l);break}}else if(3===r.length&&-1!==h.indexOf(r[0].toLowerCase())&&-1!==h.indexOf(r[1].toLowerCase())&&a[r[0].toLowerCase()+"Key"]&&a[r[1].toLowerCase()+"Key"]&&f[r[2]]===a.which){g=e.eq(l);break}}return g}}var l=function(a){var e=r(a,a.data.table.find("[global-key][shortcut-key]"));
e&&e.length&&(t(e,a.data.parent),e.select().focus().click(),a.preventDefault())},t=function(a,e){e.prop("nodeName")||(e=angular.element("#content"));e.length&&a&&e.animate({scrollTop:a.offset().top-e.offset().top+e.scrollTop()})};return{provideAccessibilityForTable:function(c,e){var f;f=a.isMAC?"CTRL+META+Y":"ALT+Y";c.find("input.search:first").attr("shortcut-key",f).attr("global-key",!0);h(c,e)}}}]).factory("getlocale",["$translate",function(a){return{getUserLocale:function(){var f=jQuery("meta[name=userLocale]").attr("content");
f||(f=a.use());return f}}}]).factory("Language",["$translate",function(a){return{isRtl:function(){var f=jQuery("meta[name=dir]").attr("content");if(!f)for(var f=["ar"],g=a.proposedLanguage()||a.use(),h=0;h<f.length;h+=1){if(-1<g.indexOf(f[h]))return!0}else if("rtl"===f)return!0;return!1}}}]).filter("xei18n",["$filter",function(a){return function(f,g){var h="";angular.isDefined(f)&&angular.isDefined(jQuery.i18n)&&(h=jQuery.i18n.prop(f,[g]));if(!h||0<=h.indexOf(f))h=a("translate")(f,{arg1:g});return h}}])})();
(function(){angular.module("columnFilter",[]).directive("xeColumnFilter",["$document","$timeout","keyCodes",function(a,f,g){return{restrict:"E",scope:{header:"="},replace:!0,templateUrl:"templates/column-filter.html",controller:["$scope",function(a){a.selectAll={visible:!0};a.hideColumnSettingMenu=!0;a.hideUnhideColumn=function(e,f){e.options.visible?a.header.filter(function(a){return!1===a.options.visible&&!1!==a.options.columnShowHide}).length||(a.selectAll.visible=!0):a.selectAll.visible=!1};a.onSelectAll=
function(e,f){a.selectAll.visible=!0;angular.forEach(e,function(a){!1===a.options.visible&&!1!==a.options.columnShowHide&&(a.options.visible=!0)})}}],link:function(h,e,r){var l=function(){a.off("click");f(function(){e.find("button").attr("tabindex",0)},10)};e.on("close",function(a,c){0<e.find(c).length||(h.hideColumnSettingMenu=!0,l(),(angular.isUndefined(c)||angular.element(c).is(":not(:focus)"))&&e.find(".column-filter-button").focus(),h.$apply())});h.bindClickEvent=function(g){h.hideColumnSettingMenu=
!h.hideColumnSettingMenu;h.hideColumnSettingMenu?l():(e.find("button").attr("tabindex",-1),a.on("click",function(a){e.trigger("close",a.target)}),f(function(){e.find("ul.column-setting-menu li:first input").focus()},10))};f(function(){e.find("ul.column-setting-menu li").bind("keydown",function(a){a.keyCode===g.ESC&&(h.hideColumnSettingMenu=!0,l(),e.find(".column-filter-button").focus(),a.preventDefault(),a.stopPropagation());if(a.keyCode===g.DOWN||a.keyCode===g.TAB){if(0<$(a.currentTarget).next().length){var c=
$(a.currentTarget).next();$(c).find("input").focus()}else e.find("ul.column-setting-menu li:first input").focus();a.preventDefault();a.stopPropagation()}if(a.keyCode===g.UP||a.shiftKey&&a.keyCode===g.TAB)0<$(a.currentTarget).prev().length?(c=$(a.currentTarget).prev(),$(c).find("input").focus()):e.find("ul.column-setting-menu li:last input").focus(),a.preventDefault(),a.stopPropagation()})},10)}}}])})();
angular.module("pagination",[]).directive("xePagination",["$http","$q",function(a,f){var g=function(e){var g=f.defer();url=e.endPoint+"?searchString="+(e.searchString?e.searchString:"")+"&sortColumnName="+(e.sortColumnName?e.sortColumnName:"")+"&ascending="+e.ascending+"&offset="+(e.offset?e.offset:"")+"&max="+(e.max?e.max:"");a.get(url).then(function(a){g.resolve(a)}).catch(function(){g.reject(data)});return g.promise},h=function(a,f){a*=f;return{max:a,offset:0===a?0:a-f}};return{restrict:"EA",replace:!0,
require:"?^xeTableGrid",scope:{model:"=",endPoint:"=?",paginationConfig:"=?",resultsFound:"=",searchString:"=",fetch:"&?",postFetch:"&",totalValue:"=?"},templateUrl:"templates/pagination.html",controller:["$scope","$attrs","$timeout",function(a,f,l){var t=1;a.firstPrev=!1;a.nextLast=!1;a.onPage=1;angular.isObject(a.paginationConfig)&&!a.paginationConfig.pageLengths?a.pageOffsets=[10,20,50,100]:a.pageOffsets=a.paginationConfig.pageLengths;angular.isObject(a.paginationConfig)&&a.paginationConfig.offset?
a.offset=a.paginationConfig.offset:a.offset=a.pageOffsets[0];0>a.pageOffsets.indexOf(a.offset)&&(a.pageOffsets.push(a.offset),a.pageOffsets.sort(function(a,c){return a-c}));a.offsetChanged=function(c){I();x(a.onPage,a.numberOfPages);c&&a.fetchData(a.onPage,a.offset)};a.first=function(){a.firstPrev||(c(1),a.fetchData(a.onPage,a.offset),x(a.onPage,a.numberOfPages),n())};a.prev=function(f){if(!a.firstPrev){var g=parseInt(a.onPage);g--;c(g);a.fetchData(a.onPage,a.offset,f);x(a.onPage,a.numberOfPages);
a.firstPrev&&n()}};a.next=function(f){if(!a.nextLast){var g=parseInt(a.onPage);g++;c(g);a.fetchData(a.onPage,a.offset,f);x(a.onPage,a.numberOfPages);a.nextLast&&n()}};a.last=function(){a.nextLast||(c(a.numberOfPages),a.fetchData(a.onPage,a.offset),x(a.onPage,a.numberOfPages),n())};a.paggeNumberChange=function(){a.onPage&&n();null!==a.onPage&&t!=a.onPage&&(angular.isUndefined(a.onPage)||0>=a.onPage||a.onPage>a.numberOfPages?a.onPage=t:(c(a.onPage),a.fetchData(a.onPage,a.offset),x(a.onPage,a.numberOfPages)))};
a.focusOut=function(a){angular.element(a.target).val(t)};a.$watch("resultsFound",function(f,g){l(function(){0===f?c(0):0===a.onPage&&c(1);I();x(a.onPage,a.numberOfPages)})});var c=function(c){t=a.onPage=c;I();x(a.onPage,a.numberOfPages)},n=function(){l(function(){angular.element("#pageInput").select().focus()},50)},I=function(){a.numberOfPages=Math.ceil(a.resultsFound/a.offset);a.numberOfPages=1>a.numberOfPages?0:a.numberOfPages;a.onPage>a.numberOfPages&&c(a.numberOfPages)},x=function(c,f){c=parseInt(c);
f=parseInt(f);var g=f/c;1===f?(a.firstPrev=!0,a.nextLast=!0):1===g?(a.nextLast=!0,a.firstPrev=!1):g===f?(a.firstPrev=!0,a.nextLast=!1):0>=c||c>f?(a.firstPrev=!0,a.nextLast=!0):(a.nextLast=!1,a.firstPrev=!1)};a.fetchData=function(l,n,t){angular.isNumber(l)||(l=parseInt(l));c(l);var x=h(l,n);l={searchString:a.searchString,sortColumnName:a.sortColumnName,ascending:a.ascending,offset:x.offset,max:x.max,endPoint:a.endPoint,onPage:l,pageSize:n};a.loading(!0);angular.isDefined(f.fetch)?a.fetch({query:l}).then(function(c){a.postFetch({response:c,
oldResult:a.model});a.model=t?a.model.concat(c.result):c.result;a.resultsFound=c.length;angular.isDefined(c.totals)&&0!==Object.keys(c.totals).length&&(a.totalValue=c.totals);a.loading(!1);a.addExtensionColumns(a.header,c)}).catch(function(c){c&&console.error(c);a.postFetch({response:c,oldResult:a.model});a.loading(!1)}):g(l).then(function(c){a.postFetch({response:c,oldResult:a.model});a.model=t?a.model.concat(c.result):c.result;a.resultsFound=c.length;angular.isDefined(c.totals)&&0!==Object.keys(c.totals).length&&
(a.totalValue=c.totals);a.loading(!1);a.addExtensionColumns(a.header,c)}).catch(function(c){c&&console.error(c);a.postFetch({response:c,oldResult:a.model});a.loading(!1)})};a.offsetChanged(!1)}],link:function(a,f,g,h){a.loading=h.loadingDataIndicator;a.emptyTableMsg=h.emptyTableMsg;a.sortColumnName=h.sortColumnName;a.ascending=h.ascending;a.header=h.header;a.addExtensionColumns=h.addExtensionColumns;a.emptyTableMsg||a.fetchData(1,a.offset);h.hidePaginationIfContinuousScroll&&h.hidePaginationIfContinuousScroll();
h.next=function(c){a.next(c)};h.previous=function(c){a.prev(c)};h.fetchData=function(c,f){c=angular.isDefined(c)?c:a.onPage;f=angular.isDefined(f)?f:a.offset;a.fetchData(c,f)};h.sort=function(c,f){a.sortColumnName=c;a.ascending=f;a.fetchData(a.onPage,a.offset)}}}}]);
(function(){angular.module("search",[]).directive("xeSearch",["keyCodes","$filter",function(a,f){return{restrict:"E",scope:{value:"=",placeholder:"@",onChange:"&",onFocus:"&",onBlur:"&",onKeydown:"&",searchConfig:"=",loadingData:"="},replace:!0,templateUrl:"templates/search.html",link:function(g,h,e){var r=0,l=Infinity,t,c;angular.isObject(g.searchConfig)&&(angular.isDefined(g.searchConfig.minimumCharacters)&&(r=g.searchConfig.minimumCharacters),angular.isDefined(g.searchConfig.maxlength)&&(l=g.searchConfig.maxlength),
angular.isUndefined(g.searchConfig.searchString)&&(g.searchConfig.searchString=""),angular.isUndefined(g.searchConfig.id)&&(g.searchConfig.id="search"),r>=l&&console.error("Wrong searchConfig: maxlength value should be more than the minimumCharacters value inside searchConfig to enable searching."),g.ariaLabel=f("xei18n")("search.aria.label"),angular.isDefined(g.searchConfig.ariaLabel)&&(g.ariaLabel=g.ariaLabel+" "+g.searchConfig.ariaLabel));t=_.debounce(function(a){if(!angular.isUndefined(a))g.onChange({query:a})},
g.searchConfig.delay||0);g.$watch("searchConfig.searchString",function(a,c){angular.isDefined(a)&&(a=a.toString(),a.length>l&&(a=a.substring(0,l),g.searchConfig.searchString=a),c=angular.isDefined(c)?c.toString():"",a!==c&&(a.length>l&&(a=a.substring(0,l),g.searchConfig.searchString=a),a.length>=r?t(a):a.length<c.length&&c.length>=r&&a.length<r?t(""):""===a&&0===a.length&&1===c.length&&t("")))});g.searchKeypress=function(a,e,f){l?angular.isDefined(a)&&a.length>=l&&(f.preventDefault(),c=a.substring(0,
l),g.form[e].$setViewValue(c),g.form[e].$render()):f.preventDefault()};g.searchKeydown=function(c,e,f){f&&f.which===a.ESC?(f.preventDefault(),g.form[e].$rollbackViewValue(),g.form[e].$render(),g.value=""):f&&f.which===a.ENTER&&(g.loadingData||!g.searchConfig.searchString.length||g.searchConfig.searchString.length<r)&&(f.preventDefault(),f.stopPropagation());g.onKeydown({$event:f})}}}}])})();
(function(){angular.module("xebarmodule",[]).factory("d3",["$window","$log",function(a,f){a.d3||f.error("D3 must be present");return a.d3}]).directive("xeBarModule",["d3","Language","$filter","getlocale",function(a,f,g,h){return{restrict:"E",scope:{data:"=xebardata",ngclickfunction:"&",barChartWidth:"@xeChartWidth",barChartHeight:"@xeChartHeight",barWidth:"@xeBarWidth",gapWidth:"@xeGapWidth",xTitleValue:"@xeXaxisTitle",yTitleValue:"@xeYaxisTitle",yAxisFormat:"@xeYaxisFormat"},template:'<div><div class="xe-bar-tooltip"></div></div>',
link:function(e,r){function l(){ua=window.navigator.userAgent;msie=ua.indexOf("MSIE ");trident=ua.indexOf("Trident/");return 0<msie||0<trident?!0:!1}function t(a){return f.isRtl()?a:a.toLocaleString(h.getUserLocale().replace("_","-"))}function c(c,e){e*=2;c.each(function(){for(var c=a.select(this),f=c.text().split(/\s+/).reverse(),g,l=[],h=0,n=c.attr("y"),p=parseFloat(c.attr("dy")),r=c.text("").append("tspan").attr("x",0).attr("y",n).attr("dy",p+"em");g=f.pop();)l.push(g),r.text(l.join(" ")),(0<r.node().getComputedTextLength()?
r.node().getComputedTextLength():5*r.text().length)>e&&(1<l.length?(l.pop(),r.text(l.join(" ")),l=[g],r=c.append("tspan").attr("x",0).attr("y",n).attr("dy",1.1*++h+p+"em").text(g)):(l=[],r=c.append("tspan").attr("x",0).attr("y",n).attr("dy",1.1*++h+p+"em").text("")))})}function n(){e.dataKeys=[];angular.forEach(e.data[0],function(a,c){e.dataKeys.push(c)});1==e.dataKeys.length?(la=!0,e.dataKeys=[],angular.forEach(e.data,function(a,c){angular.forEach(a,function(a,c){e.dataKeys.push(c)})}),e.displayGroupsKey=
e.dataKeys[0],e.displayValuesKey=e.dataKeys[1],E=e.data[0][e.displayGroupsKey],ka=e.data[1][e.displayValuesKey],qa=E.length,f.isRtl()&&(E=E.reverse()),e.dataKeys=[],angular.forEach(E[0],function(a,c){e.dataKeys.push(c)}),angular.forEach(ka[0],function(a,c){e.dataKeys.push(c)}),e.subLabelKey=e.dataKeys[0],e.colorKey=e.dataKeys[1],e.labelKey=e.dataKeys[2],e.valueKey=e.dataKeys[3]):(e.labelKey=e.dataKeys[0],e.valueKey=e.dataKeys[1],e.colorKey=e.dataKeys[2],ka=e.data)}function I(){ka.length>Fa&&C.call(K);
B.domain(ka.map(function(a){return a[e.labelKey]}));f.isRtl()?B.rangeRoundBands([ta,(W+Q)*(Fa-ka.length)],wa):B.rangeRoundBands([0,(W+Q)*ka.length],wa);la?z.domain([0,a.max(ka,function(c){return a.max(c[e.valueKey])})]).nice().range([ma,0]):z.domain([0,a.max(ka,function(a){return a[e.valueKey]})]).nice().range([ma,0]);z.domain([0,a.max(z.ticks())+z.ticks()[1]]);C.on("keydown",function(){switch(a.event.keyCode){case 37:K.translate([K.translate()[0]+(W+Q),K.translate()[1]]).event(C);break;case 39:K.translate([K.translate()[0]-
(W+Q),K.translate()[1]]).event(C)}});f.isRtl()?(H.call(w).attr("transform","translate("+ta+" ,0)"),H.selectAll("text").style("text-anchor","end")):H.call(w);p.attr("transform","translate(0,"+ma+")").call(F).selectAll(".tick text").call(c,B.rangeBand());G.selectAll(".bar").remove();T=G.selectAll(".bar").data(ka).enter().append("g");T.attr("class","bar").attr("transform",function(a){return"translate("+B(a[e.labelKey])+",0)"});T.selectAll("rect").data(function(a){return la?f.isRtl()?a[e.valueKey].reverse():
a[e.valueKey]:[a]}).enter().append("rect").attr("width",function(a){return la?W/qa:W}).attr("x",function(a){return la?(Y==qa&&(Y=0),Y++*W/qa):0}).attr("y",function(a){return la?isNaN(z(a))?0:z(a):isNaN(z(a[e.valueKey]))?0:z(a[e.valueKey])}).attr("height",function(a){return la?isNaN(z(a))?0:ma-z(a):isNaN(z(a[e.valueKey]))?0:ma-z(a[e.valueKey])}).style("fill",function(a){if(la)return Y==qa&&(Y=0),void 0==E[Y][e.colorKey]||""==E[Y][e.colorKey]?ja(Y++):E[Y++][e.colorKey];Ga++;return void 0==a[e.colorKey]||
""==a[e.colorKey]?ja(Ga%ja.range().length):a[e.colorKey]}).attr("tabindex",function(a){return la&&0==a||!la&&0==a[e.valueKey]?-1:0}).attr("focusable",function(a){return la&&0==a||!la&&0==a[e.valueKey]?"false":"true"}).attr("aria-label",function(a){return la?(Y==qa&&(Y=0),E[Y++][e.subLabelKey]+" "+t(a)):a[e.labelKey]+" "+t(a[e.valueKey])}).on("mousemove",function(c){pa[0].style.left=a.event.layerX+10+"px";pa[0].style.top=a.event.layerY-25+"px";pa[0].style.display="block";la?(c=a.event.currentTarget.attributes["aria-label"].value,
pa[0].innerHTML=c.substring(0,c.lastIndexOf(" "))+"<br>"+c.substring(c.lastIndexOf(" ")+1)):pa[0].innerHTML=c[e.labelKey]+" <br> "+t(c[e.valueKey])}).on("mouseout",function(a){pa[0].style.display="none"}).on("focusin",function(){a.event.target.classList.add("xe-rect-on")}).on("focusout",function(){a.event.target.classList.remove("xe-rect-on")});T.on("click",function(a){e.ngclickfunction({barData:a})});T.on("keydown",function(c){13==a.event.keyCode&&e.ngclickfunction({barData:c})});T.selectAll("text").data(function(a){return la?
f.isRtl()?a[e.valueKey].reverse():a[e.valueKey]:[a]}).enter().append("text").attr("class","xe-bar-label").attr("text-anchor","middle").attr("x",function(a){return la?(Y==qa&&(Y=0),f.isRtl()?(qa-Y++)*W/qa-W/(2*qa):Y++*W/qa+W/(2*qa)):W/2}).attr("y",function(a){return la?isNaN(z(a))?0:z(a)-3:isNaN(z(a[e.valueKey]))?0:z(a[e.valueKey])-3}).text(function(a){return la?t(a):t(a[e.valueKey])})}function x(){if(null!=e.data&&0!=e.data.length){r[0].style="";W=void 0==e.barWidth?44:+e.barWidth;Q=void 0==e.gapWidth?
55:+e.gapWidth;V=void 0==e.barChartWidth?400:+e.barChartWidth;ha=void 0==e.barChartHeight?450:+e.barChartHeight;sa=void 0==e.xTitleValue?"":e.xTitleValue;za=void 0==e.yTitleValue?"":e.yTitleValue;oa=void 0==e.yAxisFormat?"d":e.yAxisFormat;ta=+V-Z.right-Z.left;ma=+ha-Z.top-Z.bottom;Fa=ta/(W+Q);wa=Q/(W+Q);n();pa=r[0].getElementsByClassName("xe-bar-tooltip");B=a.scale.ordinal();z=a.scale.linear();F=a.svg.axis().scale(B).orient("bottom").innerTickSize(0).outerTickSize(0);K=a.behavior.zoom().on("zoom",
e.zoom);a.select(r[0]).selectAll("svg").remove();C=a.select(r[0]).classed("svg-container",!0).append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 "+Z.top+" "+V+" "+ha).classed("svg-content-responsive",!0);l()&&C.attr("width",ta).attr("height",ma);ka.length>Fa&&C.append("text").attr("text-anchor","middle").attr("class","xe-bar-title").attr("tabindex","0").attr("focusable","true").attr("transform","translate("+V/2+","+1.5*Z.top+")").attr("aria-label",g("xei18n")("barchart.viewmore.help.label")).text(g("xei18n")("barchart.viewmore.help.label"));
""!=za&&(ba=C.append("text").attr("text-anchor","middle").attr("class","xe-bar-title").attr("tabindex","0").attr("focusable","true").attr("aria-label",za).text(za),f.isRtl()?ba.attr("transform","translate("+(V-Z.right/4)+","+ha/2+")rotate(-90)"):ba.attr("transform","translate("+Z.left/3+","+ha/2+")rotate(-90)"));""!=sa&&C.append("text").attr("text-anchor","middle").attr("class","xe-bar-title").attr("tabindex","0").attr("focusable","true").attr("transform","translate("+V/2+","+(ha+Z.bottom/3)+")").attr("aria-label",
sa).text(sa);J=C.append("g").attr("transform","translate("+Z.left+","+Z.bottom+")");w=a.svg.axis().scale(z).orient(f.isRtl()?"right":"left").innerTickSize(-ta).tickFormat(a.format(oa));H=J.append("g").attr("class","y xe-bar-axis");var c=J.append("g").attr("clip-path","url(#chartAreaClip"+e.$id+")");c.append("clipPath").attr("id","chartAreaClip"+e.$id).append("rect").attr({width:ta,height:ma+Z.bottom});p=c.append("g").attr("class","x xe-bar-axis");G=c.append("g").attr("class","allBars");I()}else r[0].style=
"display:none"}var F,w,C,B,z,J,p,H,G,T,K,ba,V,ha,W,Q,sa,za,oa,pa,wa,Fa,ta,ma,ka,Z={top:20,right:50,bottom:50,left:40},ja=a.scale.ordinal().range("#9191E1 #90C9FF #6DD6BC #BBE19B #F4DB76 #FFB581 #D389C6 #B2B3B7 #DD5C5F".split(" ")),Ga=-1,la=!1,qa=0,Y=0,E;r.addClass("xe-bar-chart");l()&&(Object.getOwnPropertyDescriptor(Element.prototype,"classList")||HTMLElement&&Object.getOwnPropertyDescriptor(HTMLElement.prototype,"classList")&&Object.defineProperty(Element.prototype,"classList",Object.getOwnPropertyDescriptor(HTMLElement.prototype,
"classList")));e.$watch("data",function(a,c,e){a!=c&&x()},!0);e.zoom=function(){1==a.event.scale&&(C.select(".allBars").attr("transform","translate("+a.event.translate[0]+",0)"),C.select(".x.xe-bar-axis").attr("transform","translate("+a.event.translate[0]+","+ma+")").call(F).selectAll(".tick text").call(c,B.rangeBand()))};x()}}}])})();
(function(){var a=!1,f;angular.module("dataTableModule",["utils"]).constant("mobileMaxWidth",768).directive("xeTableGrid",["$timeout","accessibility","$window","mobileMaxWidth",function(a,f,e,r){return{restrict:"E",transclude:!0,replace:!0,scope:{tableId:"@",caption:"@?",header:"=",endPoint:"=?",fetch:"&",postFetch:"&",content:"=",resultsFound:"=?",toolbar:"=",paginate:"=?",continuousScrolling:"=?",continuousScrollParent:"@?",onRowClick:"&",onRowDoubleClick:"&",noDataMsg:"@?",emptyTableMsg:"=?",searchConfig:"=",
paginationConfig:"=",draggableColumnNames:"=?",mobileLayout:"=?",height:"@?",refreshContent:"=?refreshGrid",xeSection:"@?",totalRow:"@?"},controller:["$scope","$filter","$attrs","$http","$sce","$timeout",function(a,f,c,g,h,x){function F(c){var e;if("undefined"!==typeof xe&&xe.extensionsFound)switch(c){case "captionBar":(e=a.xeSection+"CaptionBar")&&(c=_.find(xe.extensions.sections,function(a){return a.name==e}))&&w(c);break;case "header":if(e=a.xeSection)if(c=_.find(xe.extensions.sections,function(a){return a.name==
e}))a.header=C(c,a.header),a.header=B(c,a.header)}}function w(c){c.exclude?a.noCaptionBar=!0:_.each(c.fields,function(c){c.exclude&&(a["no"+c.name]=!0)})}function C(a,c){var e,f;_.each(a.fields,function(a){f=_.findWhere(c,{name:a.name});if(angular.isDefined(f)&&(e=a.exclude?{visible:!a.exclude,columnShowHide:!a.exclude}:{},_.extend(_.findWhere(c,{name:a.name}).options,e),!a.exclude)){var g=f;a.attributes&&a.attributes.label&&angular.isString(a.attributes.label)&&(g.title=a.attributes.label);a.attributes&&
a.attributes.label&&angular.isObject(a.attributes.label)&&a.attributes.label.key&&(g.title=xe.i18n(a.attributes.label.key))}});return c}function B(a,c){_.each(a.fields,function(a){if(_.has(a,"nextSibling")){var e=_.indexOf(_.pluck(c,"name"),a.name),f=_.indexOf(_.pluck(c,"name"),a.nextSibling);_.isNull(a.nextSibling)&&0<=e?(e=_.last(c).name,c=z(c,a.name,e)):0<=e&&0<=f&&(c=z(c,a.name,e<f&&c[f-1]?c[f-1].name:c[f].name))}});return c}function z(a,c,e){c=_.indexOf(_.pluck(a,"name"),c);e=_.indexOf(_.pluck(a,
"name"),e);if(0<=c&&0<=e){var f=a[c];a.splice(c,1);a.splice(e,0,f);_.each(a,function(a,c){a.position[ha]=c+1})}return a}function J(a,c){return-1!==a.indexOf(c,a.length-c.length)}function p(a,c,e){return a=J(a,"%")?Math.floor(c*a.substr(0,a.indexOf("%"))/100):J(a,"em")?Math.floor(e*a.substr(0,a.indexOf("em"))):J(a,"px")?Math.floor(a.substr(0,a.indexOf("px"))):0}function H(){c.fetch||a.emptyTableMsg?a.pagination||a.emptyTableMsg||(K.loadingDataIndicator(!0),a.fetch({query:{searchString:a.searchConfig.searchString,
sortColumnName:K.sortColumnName,ascending:K.ascending}}).then(function(c){a.postFetch({response:c,oldResult:a.content});a.content=c.result;angular.isDefined(a.content.totals)&&0!==Object.keys(a.content.totals).length&&(a.totalValue=a.content.totals);K.loadingDataIndicator(!1)}).catch(function(c){console.error(c);a.postFetch({response:c,oldResult:a.content});K.loadingDataIndicator(!1)})):(a.fetch=function(c){ba||(ba=a.content);a.content=G(T(ba,c.query.searchString,!1),K.sortColumnName,K.ascending);
a.resultsFound=a.content.length;angular.isDefined(a.content.totals)&&0!==Object.keys(a.content.totals).length&&(a.totalValue=a.content.totals);K.loadingDataIndicator(!1);K.addExtensionColumns(a.header,c)},a.pagination||c.endPoint)?a.pagination||(K.loadingDataIndicator(!0),g.get(a.endPoint+"?searchString="+a.searchConfig.searchString+"&sortColumnName="+(K.sortColumnName||"")+"&ascending="+(K.ascending||"")).then(function(c){a.postFetch({response:c,oldResult:a.content});a.content=c.result;a.resultsFound=
a.content.length;angular.isDefined(a.content.totals)&&0!==Object.keys(a.content.totals).length&&(a.totalValue=a.content.totals);K.loadingDataIndicator(!1);K.addExtensionColumns(a.header,c)}).catch(function(c){console.error(c);a.postFetch({response:c,oldResult:a.content});K.loadingDataIndicator(!1);K.addExtensionColumns(a.header,c)})):console.error("Provide either end-point or fetch attribute")}var G=f("orderBy"),T=f("filter"),K=this,ba,V,ha;a.hideColumnSettingMenu=!0;a.transcludes={};a.headingTranscludes=
{};a.hideContainer=!1;a.sortArray=[];a.pagination=a.paginate;a.showPagination=!0;a.totalValue={};a.isMobileView=e.innerWidth<=r;if(a.tableId){a.pagination||(a.pagination=a.continuousScrolling);a.toolbar||a.caption||(a.noCaptionBar=!0);e.innerWidth>r?(a.header=f("orderBy")(a.header,"position.desktop",!1),ha="desktop"):(a.header=f("orderBy")(a.header,"position.mobile",!1),ha="mobile");F("captionBar");F("header");angular.isObject(a.searchConfig)&&angular.isUndefined(a.searchConfig.searchString)&&(a.searchConfig.searchString=
"");this.emptyTableMsg=a.emptyTableMsg;this.header=a.header;this.loadingDataIndicator=function(c){a.loadingData=c};this.hidePaginationIfContinuousScroll=function(){a.showPagination=!a.continuousScrolling};a.onSort=function(e){K.sortColumnName=e.heading.name;K.ascending=!K.ascending;a.pagination?e.heading.options.sortable&&K.sort(K.sortColumnName,K.ascending):e.heading.options.sortable&&(angular.isDefined(c.fetch)?(K.loadingDataIndicator(!0),a.fetch({query:{searchString:a.searchConfig.searchString,
sortColumnName:K.sortColumnName,ascending:K.ascending}}).then(function(c){a.postFetch({response:c,oldResult:a.content});a.content=c.result;K.loadingDataIndicator(!1)}).catch(function(c){console.error(c);a.postFetch({response:c,oldResult:a.content});K.loadingDataIndicator(!1)})):a.content=G(a.content,K.sortColumnName,!K.ascending))};a.handleDrop=function(c,e){a.header=z(a.header,c,e)};this.addExtensionColumns=function(c,e){e&&0<e.length&&e.result&&e.result[0].extensions&&(_.find(c,function(a){return-1<
a.name.indexOf("extension.")})||angular.forEach(e.result[0].extensions,function(e){var f;if("undefined"!==typeof xe&&xe.extensionsFound){var g=_.find(xe.extensions.sections,function(c){return c.name==a.xeSection});if(g)var h=_.find(g.fields,function(a){return a.name=="extension."+e.name});h&&(f=h.exclude||"undefined"===typeof h.exclude?!1:!0)}f&&(f=_.max(c,function(a){return a.position.desktop}).position.desktop+1,g=_.max(c,function(a){return a.position.mobile}).position.mobile+1,c.push({position:{desktop:f,
mobile:g},name:"extension."+e.name,title:e.prompt,options:{visible:!0,sortable:!1},width:"10%"}))}),a.populateHeaderWidths(angular.element("#"+a.tableId)),e=_.reduce(_.pluck(c,"dynamicWidth"),function(a,c){return a+c},0),angular.element("#"+a.tableId).find(".thead, .tbody").width(e));return c};var W={visible:!0,sortable:!1};angular.forEach(a.header,function(c,e){angular.isUndefined(c.width)&&(c.width="");a.$watch(function(){return a.header[e].options.visible},function(c,e){c!==e&&x(function(){a.populateHeaderWidths(angular.element("#"+
a.tableId))},0)});angular.isDefined(c.options)?(angular.isDefined(c.options.ascending)?(a.sortArray[c.name]={ascending:c.options.ascending,decending:!c.options.ascending},V=c.name,K.ascending=c.options.ascending,K.sortColumnName=c.name):a.sortArray[c.name]={ascending:!1,decending:!1},angular.isDefined(c.options.visible)||(c.options.visible=!0),angular.isDefined(c.options.sortable)||(c.options.sortable=!1)):c.options=W});a.populateHeaderWidths=function(c){c.find(".thead, .tbody").width("");var f=0,
g=0,h=c.find(".tbody thead").width(),n=parseFloat(c.find(".tbody thead").css("font-size"))||16,t=h,x=0,w=c.find(".hr-scrollable-content")[0]?c.find(".hr-scrollable-content")[0].scrollWidth:0;(c.find(".tbody")[0]?c.find(".tbody").width():0)<w&&c.find(".thead, .tbody").width(w-1);angular.forEach(a.header,function(a){var c=a.width;e.innerWidth<r?(a.dynamicWidth="",t=0):a.options.visible?((c=p(c,h,n))?(a.dynamicWidth=c,t-=a.dynamicWidth):g++,J(a.width,"%")&&f++):(c=p(c,h,n))&&(x+=c)});if(g||x){var z=
Math.floor(t/g),B=Math.floor(x/f);angular.forEach(a.header,function(a){a.options.visible&&(z&&""===a.width.trim()?a.dynamicWidth=z:J(a.width,"%")&&(a.dynamicWidth+=B))})}};H();a.fetchSpecial=function(c){a.pagination?K.fetchData(1):(c=a.fetch({query:{searchString:c,sortColumnName:K.sortColumnName,ascending:K.ascending}}),K.loadingDataIndicator(!0),K.addExtensionColumns(a.header,data),c&&c.then(function(c){a.postFetch({response:c,oldResult:a.content});a.content=c.result;angular.isDefined(a.content.totals)&&
0!==Object.keys(a.content.totals).length&&(a.totalValue=a.content.totals);K.loadingDataIndicator(!1)}).catch(function(c){console.error(c);a.postFetch({response:c,oldResult:a.content});K.loadingDataIndicator(!1)}))};this.registerTransclude=function(c){a.transcludes[c.id]=c};this.registerHeadingTransclude=function(c){a.headingTranscludes[c.id]=c};a.onSearchfocus=function(c){a.hideContainer=!a.hideContainer};a.onSearchBlur=function(c){a.hideContainer=!a.hideContainer;angular.element(c.target).val(a.searchConfig.searchString)};
a.sortOnHeading=function(c,e){if(c.options.sortable)if(c=c.name,V==c)a.sortArray[c]={ascending:!a.sortArray[c].ascending,decending:!a.sortArray[c].decending};else{V=c;for(var f in a.sortArray)a.sortArray[f]=f==c?{ascending:!0,decending:!1}:{ascending:!1,decending:!1}}};document.doctype&&-1<navigator.appVersion.indexOf("MSIE 9")&&document.addEventListener("selectstart",function(a){for(var c=a.target;c;c=c.parentNode)if(c.attributes&&c.attributes.draggable)return a.preventDefault(),a.stopImmediatePropagation(),
c.dragDrop(),!1});a.getObjectValue=function(a,c){var e;"object"===typeof a&&"string"===typeof c&&(e=a[c]);return e};a.getTotalValue=function(c){if(angular.isDefined(c.totalLabel)&&e.innerWidth>r)return c.totalLabel;if("object"===typeof a.totalValue&&null!==a.totalValue)return angular.isDefined(a.totalValue["total"+c.name])?a.totalValue["total"+c.name]:""};a.isExtendedField=function(c,e){if(-1<e.indexOf("extension."))return a.extensionValue=a.getObjectValueForExtendedField(c,e),a.isEditable=a.isEditableField(e),
a.isEditable&&(a.dataType=a.getDataType(c,e)),!0};a.isEditableField=function(c){var e;if("undefined"!==typeof xe&&xe.extensionsFound){var f=_.find(xe.extensions.sections,function(c){return c.name==a.xeSection});f&&f.fields.forEach(function(a,f){a.name!==c||a.exclude||a.editable&&(e=!0)})}return e};a.getDataType=function(a,c){var e;"undefined"!==typeof xe&&xe.extensionsFound&&a.extensions.forEach(function(a){"extension."+a.name===c&&(e=a.datatype)});return e};a.getObjectValueForExtendedField=function(c,
e){var f,g=e.split(".");(c=c.extensions)&&c.forEach(function(c){c.name===g[1]&&(f=c.value,"undefined"!==typeof xe&&xe.extensionsFound&&(c=_.find(xe.extensions.sections,function(c){return c.name==a.xeSection}))&&_.find(c.fields,function(a){return a.name==e}))});return f};a.refreshContent=function(e){e&&(c.fetch&&a.pagination?K.fetchData&&K.fetchData(1):H(),a.populateHeaderWidths(angular.element("#"+a.tableId)))}}else console.error("Provide a unique id for table")}],templateUrl:function(a,e){return"templates/dataTable.html"},
compile:function(e,r){e.css("opacity",0);"true"===r.paginate||"true"===r.continuousScrolling?(e=e.find("xe-pagination"),angular.isDefined(r.fetch)&&e.attr("fetch","fetch({query: query})"),angular.isDefined(r.postFetch)&&e.attr("post-fetch","postFetch({response: response, oldResult: oldResult})"),angular.isDefined(r.paginationConfig)&&e.attr("pagination-config","paginationConfig"),r.endPoint&&e.attr("end-point","endPoint"),e.attr("total-value","totalValue")):e.find("xe-pagination").remove();return function(c,
e,l,x){"false"!==r.paginate&&"true"!==r.continuousScrolling||angular.element(".tfoot").remove();a(function(){e.css("opacity",1);c.populateHeaderWidths(e);f.provideAccessibilityForTable(e,angular.element("#"+c.continuousScrollParent));c.nextPage=function(){c.continuousScrolling?c.pagination&&!c.showPagination&&x.next&&x.next(!0):c.pagination&&e.find(".pagination-container").is(":hidden")&&x.next&&x.next(!0)}})}}}}]).directive("xeCellInjector",[function(){return{require:"^xeTableGrid",restrict:"A",
replace:!0,scope:!0,link:function(a,f,e,r,l){r=e.name;f.attr("tabindex",0);if(r=a.transcludes[r])angular.isUndefined(a.row[e.name])?(e=r.scope.$new(),r.transclude(e,function(e,c){c.row=a.row;f.append(e)})):r.transclude(a,function(a,c){f.html(a)})}}}]).directive("xeRowInjector",[function(){var a;return{restrict:"A",replace:!0,require:"^xeTableGrid",scope:!0,link:function(f,e,r,l,t){e.on("click",function(c){a&&a.removeClass("active-row");e.addClass("active-row");a=e})}}}]).directive("xeHeadingInjector",
[function(){return{restrict:"A",replace:!0,require:"^xeTableGrid",scope:!0,link:function(a,f,e,r,l){if(a=a.headingTranscludes[e.name])e=a.scope.$new(),a.transclude(e,function(a,c){f.find(".data").length?f.find(".data").append(a):f.append(a)})}}}]).directive("xeCellMarkup",[function(){return{restrict:"EA",transclude:"element",replace:!0,scope:!0,require:"^xeTableGrid",link:function(a,f,e,r,l){e.columnName&&r.registerTransclude?(a={id:e.columnName,transclude:l,element:f,scope:a},r.registerTransclude(a)):
e.headingName&&r.registerHeadingTransclude&&(a={id:e.headingName,transclude:l,element:f,scope:a},r.registerHeadingTransclude(a))}}}]).directive("attainMobileLayout",function(){var a={1:"single-column",2:"two-columns",3:"all-columns"};return{restrict:"A",scope:!0,link:function(f,e,r){e.addClass(a[parseInt(r.attainMobileLayout)])}}}).directive("droppable",["$parse",function(a){return{link:function(a,e,f){}}}]).directive("dragDrop",function(){return{link:function(a,f,e){function r(a){angular.element(a.target).addClass("dragged");
w=angular.element(a.target).closest("th").index()+1;f.closest(".table-container").find("td:nth-child("+w+")").addClass("dragged");var c=angular.element(a.target).data("name");a.originalEvent.dataTransfer.setData("text",c)}function l(a){angular.element(a.target).removeClass("dragged");w=angular.element(a.target).closest("th").index()+1;f.closest(".table-container").find("td:nth-child("+w+")").removeClass("dragged");angular.element(".drag-enter").removeClass("drag-enter");angular.element("#dragtable").hide()}
function t(a){angular.element(a.target).closest("th").addClass("drag-enter");w=angular.element(a.target).closest("th").index()+1;f.closest(".table-container").find("td:nth-child("+w+")").addClass("drag-enter");F=a.target;a.preventDefault()}function c(a){F==a.target&&(angular.element(a.target).closest("th").removeClass("drag-enter"),w=angular.element(a.target).closest("th").index()+1,f.closest(".table-container").find("td:nth-child("+w+")").removeClass("drag-enter"))}function n(a){x(a);a=a||window.event;
var c=a.originalEvent.pageX,e=a.originalEvent.pageY-170;angular.element("#dragtable").show();angular.element("#dragtable").css({left:c,top:e});a.originalEvent.dataTransfer.dropEffect="move";a.preventDefault&&a.preventDefault();return!1}function I(c){angular.element("#dragtable").hide();x(c);var f=c.originalEvent.dataTransfer.getData("text"),h=angular.element(c.target).closest("th").data("name"),l=e.dragDrop;a.$apply(function(){a[l](f,h)})}function x(a){a.preventDefault&&a.preventDefault();a.stopPropagation&&
a.stopPropagation()}var F=null,w=f.index();-1!==a.draggableColumnNames.indexOf(a.header[w].name)&&(f.attr("draggable",!0),f.bind("dragover",n),f.bind("drop",I),f.bind("dragstart",r),f.bind("dragend",l),f.bind("dragenter",t),f.bind("dragleave",c))}}}).directive("resize",["$timeout","$window","$filter","Language","mobileMaxWidth",function(a,f,e,r,l){return function(t,c,n){function I(){if(c[0].scrollHeight>c[0].clientHeight&&c[0].clientWidth!==c[0].offsetWidth){var a=c.width()-c[0].scrollWidth+"px";
t.headerPadding=r.isRtl()?{"padding-left":a}:{"padding-right":a}}else t.headerPadding={}}a(function(){t.$watch(function(){return c.closest(".table-container").width()},function(a,g){a!==g&&(f.innerWidth>l?(t.header=e("orderBy")(t.header,"position.desktop",!1),t.populateHeaderWidths(c.closest(".table-container")),I()):t.header=e("orderBy")(t.header,"position.mobile",!1))});t.$watch(function(){return c[0].scrollHeight},function(a,c){f.innerWidth>l&&I()})});n=angular.element(f);var x=_.debounce(function(){t.$apply()},
500);n.bind("resize",x)}}]).directive("tabIndex",[function(){return{link:function(a,f,e){f.find("a, :input, [tabindex=0]").each(function(a,e){})}}}]).directive("xeFocus",function(){return{restrict:"A",link:function(g,h,e){h.bind("keydown",function(e){var l=e.keyCode||e.which,t=$(h).closest(".table-container"),c=t.attr("paginate"),t=t.attr("total-row");if(!a){if("undefined"!==e.target.id&&e.target.classList.contains("search")){switch(l){case 9:if(e.shiftKey)clearFocus(e);else return clearFocus(e),
l=$(h).closest(".table-container").find(".tbody tbody tr:first"),t=$(h).closest(".table-container").find(".tbody tbody tr:first td:first"),$("tr.active-row").removeClass("active-row"),$(l).addClass("active-row"),$(t).focus(),$(t).addClass("focus-ring"),e.preventDefault(),!1}return!0}switch(l){case 37:return $(this).closest("td").is(":first-child")?$(h).addClass("focus-ring"):$(this).closest("th").is(":first-child")?$(h).addClass("focus-ring"):($(h).hasClass("focus-ring")&&$(h).removeClass("focus-ring"),
$(h).prev().focus(),$(h).prev().addClass("focus-ring")),e.preventDefault(),!1;case 39:return $(this).closest("td").is(":last-child")?$(h).addClass("focus-ring"):$(this).closest("th").is(":last-child")?$(h).addClass("focus-ring"):($(h).hasClass("focus-ring")&&$(h).removeClass("focus-ring"),$(h).next().focus(),$(h).next().addClass("focus-ring")),e.preventDefault(),!1;case 13:e=$(h).find("a, :input");if(0<e.length)return a=!0,$("tr.active-row").removeClass("active-row"),$(h).parent().addClass("active-row"),
$(h).addClass("focus-ring"),$(e[0]).focus(),!1;break;case 27:return a=!1,$(h).hasClass("focus-ring")&&$(h).removeClass("focus-ring"),$(h).is(":input")||$(h).is("a")?($(h).parent().focus(),$(h).parent().addClass("focus-ring")):($(h).focus(),$(h).addClass("focus-ring")),e.preventDefault(),!1;case 9:if(e.shiftKey){if($(e.target).is("th")||$(e.target).is("td"))clearFocus(e),$("tr.active-row").removeClass("active-row"),angular.element("#"+g.searchConfig.id).select().focus()}else clearFocus(e),$("tr.active-row").removeClass("active-row"),
c?(l=$(h).closest(".table-container").children().find("div.pagination-controls"),l=$(l).find("input, button , select").not(":disabled"),$(l[0]).focus(),f=e.currentTarget):(l=$(h).closest(".table-container").next("*[tabindex != '-1']:visible"),$(l[0]).focus());e.preventDefault();return!1;case 33:return clearFocus(e),e=$(h).index(),l=$(h).closest(".table-container").find(".tbody tbody tr:first"),e=$(l).children()[e],$(e).focus(),$(e).addClass("focus-ring"),!1;case 34:return clearFocus(e),t?(e=$(h).index(),
l=$(h).closest(".table-container").find(".trDesktop thead tr")):(e=$(h).index(),l=$(h).closest(".table-container").find(".tbody tbody tr:last")),e=$(l).children()[e],$(e).focus(),$(e).addClass("focus-ring"),!1;case 36:return clearFocus(e),e=$(h).parent().find("td:first"),0===e.length&&(e=$(h).parent().find("th:first")),$(e).focus(),$(e).addClass("focus-ring"),!1;case 35:return clearFocus(e),e=$(h).parent().find("td:last"),0===e.length&&(e=$(h).parent().find("th:last")),$(e).focus(),$(e).addClass("focus-ring"),
!1;case 40:return void 0===e.target.attributes.role||"columnheader"!==e.target.attributes.role.nodeValue?(l=$(h).parent().find("td"),$(l).hasClass("focus-ring")&&$(l).removeClass("focus-ring"),0<l.length&&(l=$(h).index(),c=$(h).parent().next(),0<c.length?($("tr.active-row").removeClass("active-row"),$(c).addClass("active-row"),t=$(c).find("td"),$(t[l]).is(":input")||h.is("a")?($(t[l]).parent().focus(),$(t[l]).parent().addClass("focus-ring")):($(t[l]).focus(),$(t[l]).addClass("focus-ring"))):t?(clearFocus(e),
$("tr.active-row").removeClass("active-row"),$(h).removeClass("focus-ring"),l=$(h).index(),t=$(h).closest(".table-container").find(".trDesktop thead tr:first"),c=$(t).find("th"),$(t).addClass("active-row"),$(c[l]).focus(),$(c[l]).addClass("focus-ring"),f=e.currentTarget):$(h).addClass("focus-ring")),e.preventDefault()):(l=$(h).parent().find("th"),$("th.focus-ring").removeClass("focus-ring"),0<l.length&&($("tr.active-row").removeClass("active-row"),l=$(h).index(),e=$(h).closest(".table-container").find("tbody").find("tr:first td")[l],
$(e).parent().addClass("active-row"),t=$(e).parent().find("td"),$(t[l]).addClass("focus-ring"),$(e).focus())),!1;case 38:if(0<h.closest("tr").index())return $("tr.active-row").removeClass("active-row"),l=$(h).parent().find("td"),$(l).hasClass("focus-ring")&&$(l).removeClass("focus-ring"),0<l.length&&(l=$(h).index(),t=$(h).parent().prev(),c=$(t).find("td"),$(c[l]).is(":input")||$(h).is("a")?($(c[l]).parent().focus(),$(c[l]).parent().addClass("focus-ring")):($(c[l]).focus(),$(c[l]).addClass("focus-ring")),
$(t).addClass("active-row"),$(t[l]).removeClass("focus-ring")),e.preventDefault(),!1;if(0===$(h).closest("tr").index())return l=0===$(h).closest(".tbody").length&&0===$(h).closest(".thead").length,t&&l?($("td.focus-ring").removeClass("focus-ring"),l=$(h).closest("th").index(),-1!==l&&($("th.focus-ring").removeClass("focus-ring"),t=$(h).closest(".table-container").find("tbody"),$(t[0]).find("tr:last").find("td")[l].focus(),t=$(t[0]).find("tr:last").find("td")[l],$(t).addClass("focus-ring"))):($("tr.active-row").removeClass("active-row"),
$("td.focus-ring").removeClass("focus-ring"),$(h).closest("tr").index(),l=$(h).closest("td").index(),-1!==l&&(t=$(h).closest(".table-container").find("thead"),$(t[0]).find("tr").find("th")[l].focus(),t=$(t[0]).find("tr").find("th")[l],$(t).addClass("focus-ring"))),e.preventDefault(),!1}}else if(a)switch(l){case 13:e=$(h).find("a, :input");if(0<e.length)return a=!0,$(h).addClass("focus-ring"),$(e[0]).focus(),!1;break;case 27:return a=!1,$(h).hasClass("focus-ring")&&$(h).removeClass("focus-ring"),$(h).is(":input")||
$(h).is("a")?($(h).parent.focus(),$(h).parent().addClass("focus-ring")):($(h).focus(),$(h).addClass("focus-ring")),e.preventDefault(),!1;case 9:return e.shiftKey?(e=$(h).parent().find("a, :input"),l=$(h).find("a, :input"),l=$.inArray(l[l.length-1],e),0<l?($(h).hasClass("focus-ring")&&$(h).removeClass("focus-ring"),l=e[l-1],e=$(l).closest("td"),$(e).addClass("focus-ring"),l.focus()):(e=h.parent().prev(),0<e.length&&(h.hasClass("focus-ring")&&h.removeClass("focus-ring"),e=e.find("a, :input"),0<e.length&&
(l=e[e.length-1],e=$(l).closest("td"),$(e).addClass("focus-ring"),$(l).focus())))):(e=$(h).parent().find("a, :input"),l=$(h).find("a, :input"),l=$.inArray(l[0],e),l<e.length-1?($(h).hasClass("focus-ring")&&$(h).removeClass("focus-ring"),l=e[l+1],e=$(l).closest("td"),$(e).addClass("focus-ring"),$(l).focus()):(e=$(h).parent().next(),0<e.length?($(h).hasClass("focus-ring")&&$(h).removeClass("focus-ring"),e=e.find("a, :input"),0<e.length&&(l=e[0],e=$(l).closest("td"),$(e).addClass("focus-ring"),$(l).focus())):
($(h).hasClass("focus-ring")&&$(h).removeClass("focus-ring"),e=$(h).parent().prevAll(),0<e.length&&(e=$(e[e.length-1]).find(":input, a"),0<e.length&&$(e[0]).focus(),e=$(e[0]).closest("td"),$(e).addClass("focus-ring"))))),!1;case 40:return!1;case 38:return!1}})}}}).directive("xeClickGrid",function(){return{restrict:"A",link:function(f,h,e){h.bind("click",function(e){clearFocus(e);$("tr.active-row").removeClass("active-row");a=!1;$(h).addClass("focus-ring");$(h).parent().addClass("active-row")})}}}).directive("xeGridPaginationControl",
function(){return{restrict:"A",link:function(a,h,e){h.bind("keydown",function(a){clearFocus(a);var e=a.keyCode||a.which,g=$(h).closest(".table-container").children().find("div.pagination-controls"),g=$(g).find("input, button , select").not(":disabled");if(0===$.inArray(a.target,g))if(a.shiftKey)switch(e){case 9:return $(f).is(":visible")&&$(h).parent(".table-container").find(f)?($(f).focus(),$(f).parent().addClass("active-row"),$(f).addClass("focus-ring")):(g=$(h).parent(".table-container"),e=$(g).find("tbody tr:first"),
g=$(g).find("tbody tr:first td:first"),$(e).addClass("active-row"),$(g).focus(),$(g).addClass("focus-ring")),a.preventDefault(),!1;case 40:return!0;case 38:return!0}else return!0})}}})})();clearFocus=function(a){$("table td.focus-ring").hasClass("focus-ring")&&$("table td.focus-ring").removeClass("focus-ring");$("table th.focus-ring").hasClass("focus-ring")&&$("table th.focus-ring").removeClass("focus-ring");return!0};
(function(){angular.module("aboutModal",[]).provider("aboutService",function(){this.method="GET";this.backendUrl="";this.setMethod=function(a){a&&(this.method=a)};this.setBackendUrl=function(a){a&&(this.backendUrl=a)};this.$get=["$http","$templateCache",function(a,f){var g=this;return{aboutInfo:function(){return a({method:g.method,url:g.backendUrl,cache:f})}}}]}).directive("xeAboutModal",["aboutService",function(a){return{restrict:"EA",scope:{show:"=",api:"="},replace:!0,transclude:!0,templateUrl:"templates/dialog_default.html",
controller:["$scope",function(f){f.hide=function(){f.show=!1};a.aboutInfo().then(function(a){f.status=a.status;f.about=a.data;f.hidePlatformVersion=!1;void 0===f.about["about.banner.platform.version"]&&(f.hidePlatformVersion=!0)},function(g){500===g.status?a.aboutInfo().then(function(a){f.status=a.status;f.about=a.data},function(a){f.about=a.data||"Request failed";f.status=a.status}):(f.about=g.data||"Request failed",f.status=g.status)})}],link:function(a,g){g.on("keydown",function(g){if(27===g.keyCode||
"xe-modal-close"===document.activeElement.className&&13===g.keyCode)a.show=!1,a.$apply();g.shiftKey||9!==g.keyCode||"xe-modal-footer ng-binding"!==document.activeElement.className||(g.preventDefault(),angular.element("#xeModalClose").focus());g.shiftKey&&9===g.keyCode&&("xe-modal-footer ng-binding"===document.activeElement.className&&(g.preventDefault(),angular.element("#xeModalHeader").focus()),"xe-modal-mask ng-isolate-scope"===document.activeElement.className&&(g.preventDefault(),angular.element("#xeModalFooter").focus()),
"xe-modal-close"===document.activeElement.className&&(g.preventDefault(),angular.element("#xeModalFooter").focus()))})}}}])})();
(function(){angular.module("pieChartModule",[]).factory("d3",["$window","$log",function(a,f){a.d3||f.error("D3 must be present");return a.d3}]).directive("xePieChart",["d3","$window","$log","$timeout","Language",function(a,f,g,h,e){function r(f,c,g,r,x,F,w){function C(a,f){var g,h,l=f[0],n=f[1],p=f[2];g=c.select("thead.xe-pie-table-head");h=c.select("tbody.xe-pie-table-body");g.append("tr").selectAll("th").data(f).enter().append("th").text(function(a){return a});h.selectAll("tr").data(a).enter().append("tr").selectAll("td").data(function(a){return f.map(function(c){a[l]=
a.label;a[n]=a.value;e.isRtl()||(a[p]=oa||a[n]?(Math.round(1E3*a[n]/oa)/10).toFixed(2)+"%":"0.00%");e.isRtl()&&(a[p]=oa||a[n]?"%"+(Math.round(1E3*a[n]/oa)/10).toFixed(2):"%0.00");return{column:c,value:a[c]}})}).enter().append("td").html(function(a){return a.value});return c}function B(){Ba=window.navigator.userAgent;Ca=Ba.indexOf("MSIE ");ia=Ba.indexOf("Trident/");return 0<Ca||0<ia?!0:!1}function z(c){x.valueforclick=c;f&&"0"!==a.select(this).style("opacity")&&(f.select(".xe-pie-tooltip-label").html(c.data.label),
f.select(".xe-pie-tooltip-value").html(c.data.value),f.select(".xe-pie-tooltip-percent").html(c.data.percentage),f.style("display","block"))}function J(a){f&&f.style("display","none")}function p(c){if(f){var g=angular.element(w).find(".xe-pie-tooltip")[0];c=g.clientWidth;g=g.clientHeight;e.isRtl()&&B()?f.style("top",a.event.layerY-g-10+"px").style("left",(a.event.layerX-c+10)/2+"px"):f.style("top",a.event.layerY-g-10+"px").style("left",a.event.layerX-c/2+"px")}}function H(c){if(f){var g=angular.element(w).find(".xe-pie-tooltip")[0];
c=g.clientWidth;g=g.clientHeight;e.isRtl()&&B()?f.style("top",a.event.layerY-g-10+"px").style("left",(a.event.layerX-c+10)/2+"px"):f.style("top",a.event.layerY-g-10+"px").style("left",a.event.layerX-c/2+"px")}}function G(a){return a.data.label}function T(a){return a.startAngle+(a.endAngle-a.startAngle)/2}function K(c){c.each(function(){for(var e=a.select(this),f=0,g=10,h=e.text(),l=h.substring(f,g),n=e.attr("y"),p=parseFloat(c.attr("dy")),r=e.text(null).append("tspan").attr("x",0).attr("y",n).attr("dy",
p+"em");l;)0===f?r.text(l.trim()):r=e.append("tspan").attr("x",0).attr("y",n).attr("dy",p+"em").text(l.trim()),f+=10,g+=10,l=h.substring(f,g)})}function ba(){var c,e;c=!1;S&&(S.each(function(e){var f=this,g=this.getBoundingClientRect();S.each(function(h){if(this!==f){var l=this.getBoundingClientRect(),n,p;2*Math.abs(g.left-l.left)<g.width+l.width&&2*Math.abs(g.top-l.top)<g.height+l.height&&(l=.01*(Math.max(0,g.bottom-l.top)+Math.min(0,g.top-l.bottom)),n=a.transform(a.select(this).attr("transform")),
p=a.transform(a.select(f).attr("transform")),c=!0,p.translate=[.65*r*(T(e)<Math.PI?1:-1),p.translate[1]+l],n.translate=[.65*r*(T(h)<Math.PI?1:-1),n.translate[1]-l],a.select(this).attr("transform","translate("+n.translate+")"),a.select(f).attr("transform","translate("+p.translate+")"))}})}),c&&(e=S[0],Aa&&Aa.attr("points",function(c,f){f=a.select(e[f]);var g=a.transform(f.attr("transform"));f=g.translate[0];g=g.translate[1];return[la.centroid(c),qa.centroid(c),f,g]}),h(ba)))}function H(c,e){a.event.preventDefault();
a.event.stopPropagation();if(6===e&&7<sa.length){if(U.style("opacity",function(a,c){return 6===c?1:.1}),Ea.style("display","none").attr("aria-hidden",!0),Wa.style("display","none").attr("aria-hidden",!0),$a||Na||S||Aa)$a.style("display","block").attr("aria-hidden",!1),Na.style("display","block").attr("aria-hidden",!1),S.style("display","block").attr("aria-hidden",!1),Aa.style("display","block").attr("aria-hidden",!1),S.selectAll(".xe-pie-light-text").call(K),ba()}else{if($a||Na||S||Aa)$a.style("display",
"none").attr("aria-hidden",!0),Na.style("display","none").attr("aria-hidden",!0),S.style("display","none").attr("aria-hidden",!0),Aa.style("display","none").attr("aria-hidden",!0);U.style("opacity",1);Ea.style("display","block").attr("aria-hidden",!1);Wa.style("display","block").attr("aria-hidden",!1)}}function V(){a.select(this).classed("xe-pie-touch",!a.select(this).classed("xe-pie-touch"))}function ha(){var c,e;c=!1;Ea&&(Ea.selectAll("text").each(function(e){var f=this,g=this.getBoundingClientRect();
Ea.selectAll("text").each(function(h,l){if(this!==f){l=this.getBoundingClientRect();var n,p;2*Math.abs(g.left-l.left)<g.width+l.width&&2*Math.abs(g.top-l.top)<g.height+l.height&&(l=.01*(Math.max(0,g.bottom-l.top)+Math.min(0,g.top-l.bottom)),n=a.transform(a.select(this).attr("transform")),p=a.transform(a.select(f).attr("transform")),c=!0,p.translate=[.55*r*(T(e)<Math.PI?1:-1),p.translate[1]+l],n.translate=[.55*r*(T(h)<Math.PI?1:-1),n.translate[1]-l],a.select(this).attr("transform","translate("+n.translate+
")"),a.select(f).attr("transform","translate("+p.translate+")"))}})}),c&&(e=Ea[0],Wa&&Wa.attr("points",function(c,f){f=a.select(e[f]).select("text");var g=a.transform(f.attr("transform"));f=g.translate[0];g=g.translate[1];return[Z.centroid(c),ja.centroid(c),f,g]}),h(ha)))}function W(c){U=g.select(".xe-pie-slices").selectAll("path.xe-pie-slice").data(ta(c),G);U.enter().insert("path").style("fill",function(a,c){6===c&&(wa=a.startAngle,Fa=a.endAngle);return Y(c)}).attr("class","xe-pie-slice").on("click",
H).on("touchstart",H).on("mouseover",z).on("touchstart",z).on("touchstart",V).on("mouseout",J).on("touchend",J).on("touchend",V).on("mousemove",p).on("touchmove",p);U.transition().duration(1E3).attrTween("d",function(c){this.d3current=this.d3current||c;var e=a.interpolate(this.d3current,c);this.d3current=e(0);return function(a){return ka(e(a))}});U.exit().remove();Ea=g.select(".xe-pie-labels").selectAll("text").data(ta(c),G);Ea.enter().append("a").attr({"xlink:href":function(a,c){if(a.data.label===
F.pie.otherLabel)return"#other-group-"+l},tabindex:function(a,c){if(a.data.label===F.pie.otherLabel)return 0},"aria-controls":function(a,c){if(a.data.label===F.pie.otherLabel)return"other-group-"+l},"aria-label":function(a,c){if(a.data.label===F.pie.otherLabel)return F.pie.group.otherAriaLabel}}).on("click",H).on("touchstart",H).append("text").attr({"class":function(a,c){return a.data.label===F.pie.otherLabel?"xe-pie-large-text xe-pie-other-text":"xe-pie-large-text"}}).on("click",H).on("touchstart",
H).on("mouseover",z).on("touchstart",z).on("mouseout",J).on("touchend",J).on("mousemove",p).on("touchmove",p);Ea.selectAll("text").append("tspan").attr("x","0").attr("dy",function(a){return(a.startAngle+a.endAngle)/2>Math.PI/2&&(a.startAngle+a.endAngle)/2<1.5*Math.PI?"1em":"-1em"}).attr("class","xe-pie-bold-text").text(function(a){return a.data.percentage});Ea.on("click",function(a){alert("sdad")});Ea.selectAll("text").append("tspan").attr("x","0").attr("dy","1em").attr("class","xe-pie-light-text").text(function(a){return a.data.label});
Ea.selectAll("text").transition().duration(1E3).attrTween("transform",function(c){this.d3current=this.d3current||c;var e=a.interpolate(this.d3current,c);this.d3current=e(0);return function(a){a=e(a);return"translate("+ja.centroid(a)+")"}}).attrTween("text-anchor",function(c){this.d3current=this.d3current||c;var f=a.interpolate(this.d3current,c);this.d3current=f(0);return function(a){a=f(a);if(!e.isRtl())return T(a)<Math.PI?"start":"end";var c;(c=B())||(La=Ba.indexOf("Edge/"),c=0<La?!0:!1);return c?
T(a)<Math.PI?"start":"end":T(a)<Math.PI?"end":"start"}});Ea.exit().remove();Ea.selectAll(".xe-pie-light-text").call(K);Wa=g.select(".xe-pie-lines").selectAll("polyline").data(ta(c),G);Wa.enter().append("polyline").style("stroke",function(a,c){return Y(c)});Wa.transition().duration(1E3).attrTween("points",function(c){this.d3current=this.d3current||c;var e=a.interpolate(this.d3current,c);this.d3current=e(0);return function(a){a=e(a);var c=ja.centroid(a);return[Z.centroid(a),ja.centroid(a),c]}});Wa.exit().remove();
ha()}function Q(c){$a=g.select(".xe-pie-bg-sub-slice").append("a").attr({"xlink:href":function(a,c){return"#main-group-"+l},tabindex:function(a,c){return 0},"aria-controls":function(a,c){return"main-group-"+l},"aria-label":F.pie.group.mainAriaLabel}).on("click",H).on("touchstart",H).append("path").attr("aria-hidden",!0).style("display","none").datum({startAngle:0,endAngle:2*Math.PI}).style("fill","#e3e3e3").attr("d",Ga).on("click",H).on("touchstart",H);Na=g.select(".xe-pie-sub-slices").selectAll("path.xe-pie-sub-slice").data(ma(c),
G);Na.enter().insert("path").attr("aria-hidden",!0).style("display","none").style("fill",function(a,c){return E(c)}).attr("class","xe-pie-sub-slice").on("mouseover",z).on("touchstart",z).on("mouseout",J).on("touchend",J).on("mousemove",p).on("touchmove",p);Na.transition().duration(1E3).attrTween("d",function(c){this.d3current=this.d3current||c;var e=a.interpolate(this.d3current,c);this.d3current=e(0);return function(a){return Ga(e(a))}});Na.exit().remove();S=g.select(".xe-pie-sub-labels").selectAll("text").data(ma(c),
G);S.enter().append("text").attr("class",function(a,e){return 7<c.length?"xe-pie-small-text":"xe-pie-large-text"}).attr("aria-hidden",!0).style("display","none").on("mouseover",z).on("touchstart",z).on("mouseout",J).on("touchend",J).on("mousemove",p).on("touchmove",p);S.append("tspan").attr("x","0").attr("dy",".35em").attr("class","xe-pie-bold-text").text(function(a){return a.data.percentage});S.append("tspan").attr("x","0").attr("dy","1em").attr("class","xe-pie-light-text").text(function(a){return a.data.label});
S.transition().duration(1E3).attrTween("transform",function(c){this.d3current=this.d3current||c;var e=a.interpolate(this.d3current,c);this.d3current=e(0);return function(a){a=e(a);var c=qa.centroid(a);c[0]=.65*r*(T(a)<Math.PI?1:-1);return"translate("+c+")"}}).attrTween("text-anchor",function(c){this.d3current=this.d3current||c;var f=a.interpolate(this.d3current,c);this.d3current=f(0);return function(a){a=f(a);return e.isRtl()?T(a)<Math.PI?"end":"start":T(a)<Math.PI?"start":"end"}});S.exit().remove();
Aa=g.select(".xe-pie-sub-lines").selectAll("polyline").data(ma(c),G);Aa.enter().append("polyline").attr("aria-hidden",!0).style("display","none").style("stroke",function(a,c){return E(c)});Aa.transition().duration(1E3).attrTween("points",function(c){this.d3current=this.d3current||c;var e=a.interpolate(this.d3current,c);this.d3current=e(0);return function(a){a=e(a);var c=qa.centroid(a);c[0]=.6*r*(T(a)<Math.PI?1:-1);return[la.centroid(a),qa.centroid(a),c]}});Aa.exit().remove()}var sa=[],za,oa,pa,wa,
Fa,ta,ma,ka,Z,ja,Ga,la,qa,Y,E,U,Ea,Wa,$a,Na,S,Aa,Ba,Ca,ia,La;c&&(c.select("thead").remove(),c.select("tbody").remove(),c.append("thead").attr("class","xe-pie-table-head"),c.append("tbody").attr("class","xe-pie-table-body"));g.selectAll("g").remove();g.append("text").attr("text-anchor","middle").attr("font-size","4em").attr("y",20).text(110);g.append("g").attr({role:"presentation","class":"xe-pie-slices"});g.append("g").attr({role:"listitem","class":"xe-pie-labels",id:"main-group-"+l,"aria-live":"polite",
"aria-relevant":"additions removals"});g.append("g").attr({role:"presentation","class":"xe-pie-lines"});7<x.data.length&&(g.append("g").attr({role:"presentation","class":"xe-pie-bg-sub-slice"}),g.append("g").attr({role:"presentation","class":"xe-pie-sub-slices"}),g.append("g").attr({role:"listitem","class":"xe-pie-sub-labels",id:"other-group-"+l,"aria-live":"polite","aria-relevant":"additions removals"}),g.append("g").attr({role:"presentation","class":"xe-pie-sub-lines"}));pa=0;Number.isFinite=Number.isFinite||
function(a){return"number"===typeof a&&isFinite(a)};sa=angular.copy(x.data);angular.forEach(sa,function(a,c){a.value=Number.isFinite(a.value)?Math.abs(a.value):0});sa.sort(function(c,e){return a.descending(c.value,e.value)});oa=a.sum(sa,function(a){return a.value});c&&C(sa,[F.table.label,F.table.value,F.table.percentage]);angular.forEach(sa,function(a,c){6>c||8>sa.length?a.origin="main":(a.origin="sub",pa+=+a.value)});7<sa.length&&sa.splice(7,0,{label:F.pie.otherLabel,value:pa,origin:"main"});sa.forEach(function(a){e.isRtl()||
(a.percentage=oa||a.value?(Math.round(1E3*a.value/oa)/10).toFixed(2)+"%":"0.00%");e.isRtl()&&(a.percentage=oa||a.value?"%"+(Math.round(1E3*a.value/oa)/10).toFixed(2):"%0.00")});za=a.nest().key(function(a){return a.origin}).entries(sa);ta=a.layout.pie().sort(function(c,f){return e.isRtl()?e.isRtl()?a.ascending(c.value,f.value):a.descending(c.value,f.value):a.descending(c.value,f.value)}).value(function(a){return a.value});ma=a.layout.pie().value(function(a){return a.value}).startAngle(function(a){return wa}).endAngle(function(a){return Fa});
ka=a.svg.arc().innerRadius(.25*r).outerRadius(.5*r);Z=a.svg.arc().innerRadius(.5*r).outerRadius(.5*r);ja=a.svg.arc().innerRadius(.5*r).outerRadius(.6*r);Ga=a.svg.arc().innerRadius(.5*r).outerRadius(.6*r);la=a.svg.arc().innerRadius(.6*r).outerRadius(.6*r);qa=a.svg.arc().innerRadius(.6*r).outerRadius(.7*r);Y=a.scale.ordinal().range("#783084 #810c33 #8073ce #c28041 #008241 #f39fba #6bafa6".split(" "));E=a.scale.ordinal().range("#eef6f5 #ddedeb #bcdbd7 #9ac9c3 #67aea5 #56a59b #4d948b #45847d #3c746d #33635d #2b524d #23423e #1a312e #11201f #07100f".split(" "));
7<sa.length?(W(za[0].values),Q(za[1].values)):W(za[0].values);$(".xe-pie-slice").click(function(a){x.ngclickfunction({names:x.valueforclick})})}var l=0;return{restrict:"E",scope:{data:"=xePieData",config:"=xePieConfig",ngclickfunction:"&"},link:function(e,c,f){l+=1;c.addClass("xe-pie-chart");var g=c[0].clientWidth,h,F,w,C=angular.merge({},{tooltip:!1,hiddenTable:!1,svg:{title:"",desc:""},pie:{otherLabel:"Other"},table:{ariaLabel:"",label:"label",value:"value",percentage:"percentage"}},e.config),B,
z,J,p;C.hiddenTable&&(B=a.select(c[0]).append("table").attr({"aria-label":C.table.ariaLabel,"class":"xe-pie-table-hidden"}));h=g-10;F=h+h/2;w=Math.min(h,F)/2;z=a.select(c[0]).append("svg").attr({xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:1.1,width:h+"px",height:F+"px",viewBox:"0 0 "+Math.min(h,F)+" "+Math.min(h,F),preserveAspectRatio:"xMinYMid meet",role:"group","aria-labelledby":"title"+l+" desc"+l});z.append("title").attr("id","title"+l).text(C.svg.title);
z.append("desc").attr("id","desc"+l).text(C.svg.desc);J=z.append("g").attr({role:"list","aria-label":C.pie.ariaLabel,"class":"xe-pie-svg",transform:"translate("+w+", "+w+")"});C.tooltip&&(p=a.select(c[0]).append("div").attr("class","xe-pie-tooltip"),p.append("p").attr("class","xe-pie-tooltip-label"),p.append("p").attr("class","xe-pie-tooltip-value"),p.append("p").attr("class","xe-pie-tooltip-percent xe-pie-bold-text"));window.onresize=function(){return e.$apply()};e.$watch(function(){return angular.element(window)[0].innerWidth},
function(){g=c[0].clientWidth;h=g-10;F=h+h/2;w=Math.min(h,F)/2;z.attr({width:h+"px",height:F+"px",viewBox:"0 0 "+Math.min(h,F)+" "+Math.min(h,F)});J.attr({transform:"translate("+w+", "+w+")"});r(p,B,J,w,e,C,c)});e.$watch("data",function(a,e,f){a&&r(p,B,J,w,f,C,c)},!0)}}}])})();
(function(){angular.module("pieChartModule",[]).factory("d3",["$window","$log",function(a,f){a.d3||f.error("D3 must be present");return a.d3}]).directive("xePieChart",["d3","$window","$log","$timeout","Language","$filter","getlocale",function(a,f,g,h,e,r,l){function t(a){return e.isRtl()?a:(+a).toLocaleString(l.getUserLocale().replace("_","-"))}function c(c,f,g,l,C,B,z){function J(a,c){var e,g,h=c[0],l=c[1],n=c[2];e=f.select("thead.xe-pie-table-head");g=f.select("tbody.xe-pie-table-body");e.append("tr").selectAll("th").data(c).enter().append("th").text(function(a){return a});
g.selectAll("tr").data(a).enter().append("tr").selectAll("td").data(function(a){return c.map(function(c){a[h]=a.label;a[l]=a.value;a[n]=ta||a[l]?(Math.round(1E3*a[l]/ta)/10).toFixed(2):"0.00";return{column:c,value:a[c]}})}).enter().append("td").html(function(a){return a.value});return f}function p(){Qa=window.navigator.userAgent;mb=Qa.indexOf("MSIE ");Ra=Qa.indexOf("Trident/");return 0<mb||0<Ra?!0:!1}function H(f){c&&"0"!==a.select(this).style("opacity")&&(c.select(".xe-pie-tooltip-label").html(f.data.label),
c.select(".xe-pie-tooltip-value").html(t(f.data.value)),e.isRtl()?c.select(".xe-pie-tooltip-percent").html(r("xei18n")("default.percent")+t(f.data.percentage)):c.select(".xe-pie-tooltip-percent").html(t(f.data.percentage)+r("xei18n")("default.percent")),c.style("display","block"))}function G(a){c&&c.style("display","none")}function T(f){if(c){var g=angular.element(z).find(".xe-pie-tooltip")[0];f=g.clientWidth;g=g.clientHeight;e.isRtl()&&p()?c.style("top",a.event.layerY-g-10+"px").style("left",(a.event.layerX-
f+10)/2+"px"):c.style("top",a.event.layerY-g-10+"px").style("left",a.event.layerX-f/2+"px")}}function K(a){return a.data.label}function ba(a){return a.startAngle+(a.endAngle-a.startAngle)/2}function V(c){c.each(function(){var c=a.select(this),e=c.text().split(/\s+/).reverse(),f,g=[];c.attr("y");for(var h=parseFloat(c.attr("dy")),l=c.text("").append("tspan").attr("x",0).attr("dy",h+"em");f=e.pop();)g.push(f),l.text(g.join(" ")),45<(0<l.node().getComputedTextLength()?l.node().getComputedTextLength():
5*l.text().length)&&(1<g.length?(g.pop(),l.text(g.join(" ")),g=[f],l=c.append("tspan").attr("x",0).attr("dy",h+"em").text(f)):(g=[],l=c.append("tspan").attr("x",0).attr("dy",h+"em").text("")))})}function ha(){var c,e;c=!1;ia&&(ia.each(function(e){var f=this,g=this.getBoundingClientRect();ia.each(function(h){if(this!==f){var n=this.getBoundingClientRect(),p,A;2*Math.abs(g.left-n.left)<g.width+n.width&&2*Math.abs(g.top-n.top)<g.height+n.height&&(n=.01*(Math.max(0,g.bottom-n.top)+Math.min(0,g.top-n.bottom)),
p=a.transform(a.select(this).attr("transform")),A=a.transform(a.select(f).attr("transform")),c=!0,A.translate=[.65*l*(ba(e)<Math.PI?1:-1),A.translate[1]+n],p.translate=[.65*l*(ba(h)<Math.PI?1:-1),p.translate[1]-n],a.select(this).attr("transform","translate("+p.translate+")"),a.select(f).attr("transform","translate("+A.translate+")"))}})}),c&&(e=ia[0],La&&La.attr("points",function(c,f){f=a.select(e[f]);var g=a.transform(f.attr("transform"));f=g.translate[0];g=g.translate[1];return[U.centroid(c),Ea.centroid(c),
f,g]}),h(ha)))}function W(c,e){a.event.preventDefault();a.event.stopPropagation();if(6===e&&7<wa.length){if(Na.style("opacity",function(a,c){return 6===c?1:.1}),S.style("display","none").attr("aria-hidden",!0),Aa.style("display","none").attr("aria-hidden",!0),Ba||Ca||ia||La)Ba.style("display","block").attr("aria-hidden",!1),Ca.style("display","block").attr("aria-hidden",!1),ia.style("display","block").attr("aria-hidden",!1),La.style("display","block").attr("aria-hidden",!1),ia.selectAll(".xe-pie-light-text").call(V),
ha()}else{if(Ba||Ca||ia||La)Ba.style("display","none").attr("aria-hidden",!0),Ca.style("display","none").attr("aria-hidden",!0),ia.style("display","none").attr("aria-hidden",!0),La.style("display","none").attr("aria-hidden",!0);Na.style("opacity",1);S.style("display","block").attr("aria-hidden",!1);Aa.style("display","block").attr("aria-hidden",!1)}}function Q(a,c){C.ngclickfunction({pieSliceData:a.data})}function sa(){a.select(this).classed("xe-pie-touch",!a.select(this).classed("xe-pie-touch"))}
function za(){var c,e;c=!1;S&&(S.selectAll("text").each(function(e){var f=this,g=this.getBoundingClientRect();S.selectAll("text").each(function(h,n){if(this!==f){n=this.getBoundingClientRect();var p,A;2*Math.abs(g.left-n.left)<g.width+n.width&&2*Math.abs(g.top-n.top)<g.height+n.height&&(n=.01*(Math.max(0,g.bottom-n.top)+Math.min(0,g.top-n.bottom)),p=a.transform(a.select(this).attr("transform")),A=a.transform(a.select(f).attr("transform")),c=!0,A.translate=[.55*l*(ba(e)<Math.PI?1:-1),A.translate[1]+
n],p.translate=[.55*l*(ba(h)<Math.PI?1:-1),p.translate[1]-n],a.select(this).attr("transform","translate("+p.translate+")"),a.select(f).attr("transform","translate("+A.translate+")"))}})}),c&&(e=S[0],Aa&&Aa.attr("points",function(c,f){f=a.select(e[f]).select("text");var g=a.transform(f.attr("transform"));f=g.translate[0];g=g.translate[1];return[qa.centroid(c),Y.centroid(c),f,g]}),h(za)))}function oa(c){Na=g.select(".xe-pie-slices").selectAll("path.xe-pie-slice").data(ja(c),K);Na.enter().insert("path").style("fill",
function(a,c){6===c&&(ka=a.startAngle,Z=a.endAngle);return Wa(c)}).attr("class","xe-pie-slice").attr("tabindex","0").attr("aria-label",function(a){var c;c=e.isRtl()?r("xei18n")("default.percent")+t(a.data.percentage):t(a.data.percentage)+r("xei18n")("default.percent");return c+=" "+a.data.label+" "+a.data.value}).on("click",W).on("click",Q).on("keydown",function(c,e){13==a.event.keyCode&&Q(c,e)}).on("touchstart",W).on("mouseover",H).on("touchstart",H).on("touchstart",sa).on("mouseout",G).on("touchend",
G).on("touchend",sa).on("mousemove",T).on("touchmove",T).on("focusin",function(){a.event.target.classList.add("xe-slice-on")}).on("focusout",function(){a.event.target.classList.remove("xe-slice-on")});Na.transition().duration(1E3).attrTween("d",function(c){this.d3current=this.d3current||c;var e=a.interpolate(this.d3current,c);this.d3current=e(0);return function(a){return la(e(a))}});Na.exit().remove();S=g.select(".xe-pie-labels").selectAll("text").data(ja(c),K);S.enter().append("a").attr({"xlink:href":function(a,
c){if(a.data.label===B.pie.otherLabel)return"#other-group-"+n},tabindex:function(a,c){if(a.data.label===B.pie.otherLabel)return 0},"aria-controls":function(a,c){if(a.data.label===B.pie.otherLabel)return"other-group-"+n},"aria-label":function(a,c){if(a.data.label===B.pie.otherLabel)return B.pie.group.otherAriaLabel}}).on("click",W).on("touchstart",W).append("text").attr({"class":function(a,c){return a.data.label===B.pie.otherLabel?"xe-pie-large-text xe-pie-other-text":"xe-pie-large-text"}}).on("click",
W).on("touchstart",W).on("mouseover",H).on("touchstart",H).on("mouseout",G).on("touchend",G).on("mousemove",T).on("touchmove",T);S.selectAll("text").append("tspan").attr("x","0").attr("dy",function(a){return(a.startAngle+a.endAngle)/2>Math.PI/2&&(a.startAngle+a.endAngle)/2<1.5*Math.PI?"1em":"-1em"}).attr("class","xe-pie-bold-text").text(function(a){return e.isRtl()?r("xei18n")("default.percent")+t(a.data.percentage):t(a.data.percentage)+r("xei18n")("default.percent")});S.selectAll("text").append("tspan").attr("x",
"0").attr("dy","1em").attr("class","xe-pie-light-text").text(function(a){return a.data.label});S.selectAll("text").transition().duration(1E3).attrTween("transform",function(c){this.d3current=this.d3current||c;var e=a.interpolate(this.d3current,c);this.d3current=e(0);return function(a){a=e(a);return"translate("+Y.centroid(a)+")"}}).attrTween("text-anchor",function(c){this.d3current=this.d3current||c;var f=a.interpolate(this.d3current,c);this.d3current=f(0);return function(a){a=f(a);if(!e.isRtl())return ba(a)<
Math.PI?"start":"end";var c;(c=p())||(A=Qa.indexOf("Edge/"),c=0<A?!0:!1);return c?ba(a)<Math.PI?"start":"end":ba(a)<Math.PI?"end":"start"}});S.exit().remove();S.selectAll(".xe-pie-light-text").call(V);Aa=g.select(".xe-pie-lines").selectAll("polyline").data(ja(c),K);Aa.enter().append("polyline").style("stroke",function(a,c){return Wa(c)});Aa.transition().duration(1E3).attrTween("points",function(c){this.d3current=this.d3current||c;var e=a.interpolate(this.d3current,c);this.d3current=e(0);return function(a){a=
e(a);var c=Y.centroid(a);return[qa.centroid(a),Y.centroid(a),c]}});Aa.exit().remove();za()}function pa(c){Ba=g.select(".xe-pie-bg-sub-slice").append("a").attr({"xlink:href":function(a,c){return"#main-group-"+n},tabindex:function(a,c){return 0},"aria-controls":function(a,c){return"main-group-"+n},"aria-label":B.pie.group.mainAriaLabel}).on("click",W).on("touchstart",W).append("path").attr("aria-hidden",!0).style("display","none").datum({startAngle:0,endAngle:2*Math.PI}).style("fill","#DBDBDD").attr("d",
E).on("click",W).on("touchstart",W);Ca=g.select(".xe-pie-sub-slices").selectAll("path.xe-pie-sub-slice").data(Ga(c),K);Ca.enter().insert("path").attr("aria-hidden",!0).style("display","none").style("fill",function(a,c){return $a(c)}).attr("class","xe-pie-sub-slice").on("mouseover",H).on("touchstart",H).on("mouseout",G).on("touchend",G).on("mousemove",T).on("touchmove",T);Ca.transition().duration(1E3).attrTween("d",function(c){this.d3current=this.d3current||c;var e=a.interpolate(this.d3current,c);
this.d3current=e(0);return function(a){return E(e(a))}});Ca.exit().remove();ia=g.select(".xe-pie-sub-labels").selectAll("text").data(Ga(c),K);ia.enter().append("text").attr("class",function(a,e){return 7<c.length?"xe-pie-small-text":"xe-pie-large-text"}).attr("aria-hidden",!0).style("display","none").on("mouseover",H).on("touchstart",H).on("mouseout",G).on("touchend",G).on("mousemove",T).on("touchmove",T);ia.append("tspan").attr("x","0").attr("dy",".35em").attr("class","xe-pie-bold-text").text(function(a){return e.isRtl()?
r("xei18n")("default.percent")+t(a.data.percentage):t(a.data.percentage)+r("xei18n")("default.percent")});ia.append("tspan").attr("x","0").attr("dy","1em").attr("class","xe-pie-light-text").text(function(a){return a.data.label});ia.transition().duration(1E3).attrTween("transform",function(c){this.d3current=this.d3current||c;var e=a.interpolate(this.d3current,c);this.d3current=e(0);return function(a){a=e(a);var c=Ea.centroid(a);c[0]=.65*l*(ba(a)<Math.PI?1:-1);return"translate("+c+")"}}).attrTween("text-anchor",
function(c){this.d3current=this.d3current||c;var f=a.interpolate(this.d3current,c);this.d3current=f(0);return function(a){a=f(a);return e.isRtl()?ba(a)<Math.PI?"end":"start":ba(a)<Math.PI?"start":"end"}});ia.exit().remove();La=g.select(".xe-pie-sub-lines").selectAll("polyline").data(Ga(c),K);La.enter().append("polyline").attr("aria-hidden",!0).style("display","none").style("stroke",function(a,c){return $a(c)});La.transition().duration(1E3).attrTween("points",function(c){this.d3current=this.d3current||
c;var e=a.interpolate(this.d3current,c);this.d3current=e(0);return function(a){a=e(a);var c=Ea.centroid(a);c[0]=.6*l*(ba(a)<Math.PI?1:-1);return[U.centroid(a),Ea.centroid(a),c]}});La.exit().remove()}var wa=[],Fa,ta,ma,ka,Z,ja,Ga,la,qa,Y,E,U,Ea,Wa,$a,Na,S,Aa,Ba,Ca,ia,La,Qa,mb,Ra,A;f&&(f.select("thead").remove(),f.select("tbody").remove(),f.append("thead").attr("class","xe-pie-table-head"),f.append("tbody").attr("class","xe-pie-table-body"));g.selectAll("g").remove();g.selectAll("text").remove();if(0<
B.innerRadiusFactor){Fa=a.sum(C.data,function(a){return a.value});var M=g.append("text").attr("text-anchor","middle");M.append("tspan").attr("class","xe-pie-total-value").attr("y",0).attr("x",0).attr("tabindex","0").text(t(Fa));M.append("tspan").attr("class","xe-pie-total-label").attr("y",20).attr("x",0).attr("tabindex","0").text(B.pie.totalLabel)}g.append("g").attr({role:"presentation","class":"xe-pie-slices"});g.append("g").attr({role:"listitem","class":"xe-pie-labels",id:"main-group-"+n,"aria-live":"polite",
"aria-relevant":"additions removals"});g.append("g").attr({role:"presentation","class":"xe-pie-lines"});7<C.data.length&&(g.append("g").attr({role:"presentation","class":"xe-pie-bg-sub-slice"}),g.append("g").attr({role:"presentation","class":"xe-pie-sub-slices"}),g.append("g").attr({role:"listitem","class":"xe-pie-sub-labels",id:"other-group-"+n,"aria-live":"polite","aria-relevant":"additions removals"}),g.append("g").attr({role:"presentation","class":"xe-pie-sub-lines"}));ma=0;Number.isFinite=Number.isFinite||
function(a){return"number"===typeof a&&isFinite(a)};wa=angular.copy(C.data);angular.forEach(wa,function(a,c){a.value=Number.isFinite(a.value)?Math.abs(a.value):0});wa.sort(function(c,e){return a.descending(c.value,e.value)});ta=a.sum(wa,function(a){return a.value});f&&J(wa,[B.table.label,B.table.value,B.table.percentage]);angular.forEach(wa,function(a,c){6>c||8>wa.length?a.origin="main":(a.origin="sub",ma+=+a.value)});7<wa.length&&wa.splice(7,0,{label:B.pie.otherLabel,value:ma,origin:"main"});wa.forEach(function(a){a.percentage=
ta||a.value?(Math.round(1E3*a.value/ta)/10).toFixed(2):"0.00"});Fa=a.nest().key(function(a){return a.origin}).entries(wa);ja=a.layout.pie().sort(function(c,f){return e.isRtl()?e.isRtl()?a.ascending(c.value,f.value):a.descending(c.value,f.value):a.descending(c.value,f.value)}).value(function(a){return a.value});Ga=a.layout.pie().value(function(a){return a.value}).startAngle(function(a){return ka}).endAngle(function(a){return Z});la=a.svg.arc().innerRadius(.5*l*B.innerRadiusFactor).outerRadius(.5*l);
qa=a.svg.arc().innerRadius(.5*l).outerRadius(.5*l);Y=a.svg.arc().innerRadius(.5*l).outerRadius(.6*l);E=a.svg.arc().innerRadius(.5*l).outerRadius(.6*l);U=a.svg.arc().innerRadius(.6*l).outerRadius(.6*l);Ea=a.svg.arc().innerRadius(.6*l).outerRadius(.7*l);Wa=a.scale.ordinal().range("#BA46A6 #5353d1 #51ABFF #1ABF96 #95D162 #F5DB75 #FFB581".split(" "));$a=a.scale.ordinal().range("#FFF4EB #FFDFC8 #FFCAA4 #FFB581 #FFA15D #FF8C3A #FF7513 #FE6A00 #EB6200 #C35100".split(" "));7<wa.length?(oa(Fa[0].values),pa(Fa[1].values)):
oa(Fa[0].values)}var n=0;return{restrict:"E",scope:{data:"=xePieData",config:"=xePieConfig",ngclickfunction:"&"},link:function(e,f,g){n+=1;f.addClass("xe-pie-chart");g=f[0].clientWidth;var h,l=angular.merge({},{tooltip:!1,hiddenTable:!1,innerRadiusFactor:0,svg:{title:"",desc:""},pie:{otherLabel:"Other",totalLabel:"Units"},table:{ariaLabel:"",label:"label",value:"value",percentage:"percentage"}},e.config),r,t,J;l.hiddenTable&&(r=a.select(f[0]).append("table").attr({"aria-label":l.table.ariaLabel,"class":"xe-pie-table-hidden"}));
g-=10;h=Math.min(g,g)/2;g=a.select(f[0]).classed("svg-container",!0).append("svg").attr({xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:1.1,width:g,height:g,viewBox:"0 0 "+Math.min(g,g)+" "+Math.min(g,g),preserveAspectRatio:"xMinYMid meet",role:"group","aria-labelledby":"title"+n+" desc"+n}).classed("svg-content-responsive",!0);g.append("title").attr("id","title"+n).text(l.svg.title);g.append("desc").attr("id","desc"+n).text(l.svg.desc);t=g.append("g").attr({role:"list",
"aria-label":l.pie.ariaLabel,"class":"xe-pie-svg",transform:"translate("+h+", "+h+")"});l.tooltip&&(J=a.select(f[0]).append("div").attr("class","xe-pie-tooltip"),J.append("p").attr("class","xe-pie-tooltip-label"),J.append("p").attr("class","xe-pie-tooltip-value"),J.append("p").attr("class","xe-pie-tooltip-percent xe-pie-bold-text"));e.$watch("data",function(a,e,g){a!=e&&c(J,r,t,h,g,l,f)},!0);c(J,r,t,h,e,l,f)}}}])})();
(function(){angular.module("popupModal",["xe-ui-components"]).directive("xePopupModal",["$timeout","$compile",function(a,f){return{restrict:"EA",scope:{show:"=",pageheader:"@",focusbackelement:"@"},replace:!0,transclude:{popupContent:"?popupContent",popupButtons:"?popupButtons"},templateUrl:"templates/modal.html",controller:["$scope",function(a){a.hide=function(){a.show=!1};a.popupTitle=a.pageheader;a.focusBackElement=a.focusbackelement}],link:function(f,h){angular.element("#xeModalMask").attr("tabindex",
0).focus();h.on("keydown",function(a){if(27===a.keyCode||"xe-popup-close"===document.activeElement.className&&13===a.keyCode)f.show=!1,f.$apply(),null!=f.focusBackElement&&void 0!=f.focusBackElement&&angular.element("#"+f.focusBackElement).focus()});a(function(){angular.element("#tabOrdering").on("focus",function(a){angular.element("#xePopupClose").focus()});angular.element("#xePopupClose").on("keydown",function(a){if(a.shiftKey)9===a.keyCode&&(1<angular.element("#buttonContainer").find("xe-button").length?
angular.element("#buttonContainer").find("xe-button:last").closest("xe-button").focus():angular.element("#buttonContainer").find("xe-button").focus());else if(9===a.keyCode)return!0;if(27===a.keyCode||"xe-popup-close"===document.activeElement.className&&13===a.keyCode)f.show=!1,f.$apply(),null!=f.focusBackElement&&void 0!=f.focusBackElement&&angular.element("#"+f.focusBackElement).focus();a.preventDefault();a.stopImmediatePropagation()})},100)}}}])})();
(function(){angular.module("tabnav",[]).directive("ngRepeatComplete",["$timeout",function(a){return{restrict:"A",link:function(f,g,h){f.keyboardNav=function(){var a=angular.element(g[0].parentElement),h=parseInt(a.find("li.active a").attr("id").split("tab")[1],10),l=a[0].firstElementChild,t=a[0].lastElementChild,c=a[0].querySelector("li.active"),n,I=function(){return function(a){c===t&&a?h=f.tabnav.tabs.length:c===l&&a&&(h=1);h===f.tabnav.tabs.length&&"right"===a?(c=l,n=angular.element(c.querySelector("a")),
h=1,n.focus()):1===h&&"left"===a?(c=t,n=angular.element(c.querySelector("a")),h=f.tabnav.tabs.length,n.focus()):"right"===a?(c=c.nextElementSibling,n=angular.element(c.querySelector("a")),h=parseInt(n.attr("id").split("tab")[1],10),n.focus()):"left"===a?(c=c.previousElementSibling,n=angular.element(c.querySelector("a")),h=parseInt(n.attr("id").split("tab")[1],10),n.focus()):(f.activeElement=f.activeElement||document.activeElement.parentElement,c=f.activeElement,h=parseInt(angular.element(c).find("a").attr("id").split("tab")[1],
10),f.activeElement=null);f.$apply(function(){c.focus();f.tabnav.activate(f.tabnav.tabs[h-1])})}}();f.keydownEventHandler=function(a){a=a.keyCode||a.which||a.originalEvent.keyCode;return 39===a||40===a?(I("right"),!1):37===a||38===a?(I("left"),!1):!0};f.keyupEventHandler=function(a){if(13===(a.keyCode||a.which||a.originalEvent.keyCode))return I(),!1};a.on("keydown",f.keydownEventHandler);a.on("keyup",f.keyupEventHandler)};!0===f.$last&&a(f.keyboardNav)}}}]).directive("xeTabNav",function(){return{restrict:"EA",
scope:{xeSection:"@?"},transclude:!0,templateUrl:"templates/tabNav.html",controllerAs:"tabnav",controller:["$compile","$sce","$q","$scope","$state",function(a,f,g,h,e){var r=this;r.currentActive=null;r.tabs=[];r.extendTab=function(a,e){var c;if("undefined"!==typeof xe&&xe.extensionsFound){var f=_.find(xe.extensions.sections,function(a){return a.name==h.xeSection});f&&f.fields.forEach(function(f,g){f.name===e.xeField&&(f.label&&(a.heading=xe.i18n(f.label)),f.exclude&&(c=!0))})}c||r.tabs.push(e)};r.loadDynamicContent=
function(a,e){"[object Function]"!==Object.prototype.toString.call(a)||e.hasTranscludedContent||e.dynamicContent||a().then(function(a){e.dynamicContent=a;e.dynamic(a)},function(a){console.error(a)})};r.activate=function(a){r.currentActive.active=!1;a.active=!0;r.currentActive=a;a.state?e.go(a.state,a.stateParams):r.loadDynamicContent(a.loadDataOnClick,a)}}]}}).directive("xeTabPanel",["$compile","$state",function(a,f){return{restrict:"EA",transclude:!0,scope:{heading:"@",state:"@",loadDataOnClick:"&",
jsLazyLoad:"@",xeField:"@?",stateParams:"="},templateUrl:"templates/tabPanel.html",require:"^xeTabNav",link:function(g,h,e,r,l){function t(){e.loadDataOnClick?r.loadDynamicContent(r.currentActive.loadDataOnClick,r.currentActive):r.activate(r.currentActive)}r.extendTab(e,g);g.element=h;g.tabIndex=r.tabs.indexOf(g)+1;g.lazyLoadJs=function(a){var e=document.createElement("script");e.src=a.jsLazyLoad;document.head.appendChild(e)};l(g,function(a,e){a.text().trim().length&&(e.hasTranscludedContent=!0,e=
angular.element(h[0].querySelector("[content]")),e.append(a))});e.hasOwnProperty("active")||g.state===f.current.name?(g.active=!0,r.currentActive=g,t()):h.is(":last-child")&&!r.currentActive&&(r.tabs[0].active=!0,r.currentActive=r.tabs[0],r.currentActive.element.attr("active",""),t());g.dynamic=function(c){c=angular.element(c);c=a(c)(g);angular.element(h[0].querySelector("[content]")).append(c);g.jsLazyLoad&&g.active&&g.lazyLoadJs(g)}}}}])})();
(function(){angular.module("timePicker",["xe-ui-components","ngMessages","dateParser"]).directive("xeTimePicker",["$timeout","$filter","$window","$document","Language","keyCodes","$dateParser","dateFilter",function(a,f,g,h,e,r,l,t){return{restrict:"E",scope:{displayFormat:"@?",xeConfigstep:"@?",xeId:"@",xeName:"@",xePlaceholder:"@?",modelScope:"=?xeModel",returnFormat:"@?",returnTranslatedMeridian:"@?",xeWidth:"@?"},replace:!0,templateUrl:e.isRtl()?"templates/timePicker_rtl.html":"templates/timePicker.html",
controller:["$scope",function(a){function e(a,c){var f=[],g=0;c=parseInt(c);12===a&&(g=1);if(c){if(60<c||0>c)c=1}else c=1;for(;g<=a;){var h=(new Intl.NumberFormat("en-US",{minimumIntegerDigits:2})).format(g);f.push(h);g+=c}return f}function h(e,f,g,l){var n=parseInt(e)+1;if(n<g.length){var r=angular.element(f).closest("ul");angular.element(r).find("li").each(function(a,c){$(c).attr("tabindex",-1)});angular.element(r).find("li").siblings().removeClass("active-timepicker");r=angular.element(r).find("li")[n];
l?a.hrsFocusElem=r:a.minFocusElem=r;angular.element(r).addClass("active-timepicker");angular.element(r).attr("tabindex",0);angular.element(r).focus()}n=parseInt(n)+1;l=angular.element(f).closest("div");angular.element(l).find("div.nextDiv").text("");parseInt(e)>g.length-2||parseInt(e)===g.length-2?angular.element(l).find("div.nextDiv").text(""):(r=angular.element(f).closest("ul"),angular.element(l).find("div.nextDiv").text(""),angular.element(r).find("li")&&(e=angular.element(r).find("li")[n].innerText,
angular.element(l).find("div.nextDiv").text(e)))}function r(a,c){a=parseInt(a);var e=angular.element(c).closest("ul");c=angular.element(c).closest("div");void 0!==angular.element(e).find("li")[a]?(a=angular.element(e).find("li")[a].innerText,angular.element(c).find("div.previousDiv").text(a)):angular.element(c).find("div.previousDiv").text("")}a.timeObject={};a.toggleContainer=!1;a.hours=[];a.minutes=[];a.displayFormat?a.xeTimePlaceholder=a.xePlaceholder:(a.displayFormat=f("xei18n")("default.time.format"),
"default.time.watermark.format"!=f("xei18n")("default.time.watermark.format")&&(a.xeTimePlaceholder=f("xei18n")("default.time.watermark.format")));if(void 0===a.modelScope||null===a.modelScope)a.modelScope="";a.displayModel=a.modelScope;a.minFocusElem="";a.hrsFocusElem="";a.showError=!1;a._12hrFormat="hh:mm a";a._24hrFormat="HH:mm";a.formatNumberTwoDecimal=function(a){""!=a&&(a=(new Intl.NumberFormat("en-US",{minimumIntegerDigits:2})).format(a));return a};a.formatTimeTo12Hours=function(e,f){var g;
e&&(g=e.split(" ")[1],f?"PM"===g?g=a.meridiansList[1]:"AM"===g&&(g=a.meridiansList[0]):g===a.meridiansList[1]?g="PM":g===a.meridiansList[0]&&(g="AM"),g=e.split(" ")[0]+" "+g);return g};a.formatEnteredTime=function(a,c,e){a=l(a,c);return t(a,e)};var F=g.navigator.userAgent,w={chrome:/chrome/i,safari:/safari/i,firefox:/firefox/i,ie:/internet explorer/i};a.getBrowser=function(){for(var a in w)if(w[a].test(F))return a};if(!a.xeConfigstep){var C=(new Intl.NumberFormat("en-US",{minimumIntegerDigits:2})).format(1);
a.xeConfigstep=C}a.timeObject=new function(){a.timeObject.hours=[];a.timeObject.minutes=[];a.timeObject.configstep;a.timeObject.is24Hrformat;a.timeObject.returnFormat};a.timeObject.displayFormat=a.displayFormat;a.timeObject.returnFormat=a.returnFormat;null!=a.timeObject.displayFormat&&"undefined"!=a.timeObject.displayFormat&&(C=a.timeObject.displayFormat.split(" ").length,2===C?(a.maxHrs=12,a.minHr=1,a.timeObject.is24Hrformat=!1):(a.maxHrs=23,a.minHr=0,a.timeObject.is24Hrformat=!0),a.maxMinutes=59,
a.timeObject.configstep=a.xeConfigstep,a.timeObject.hours=e(a.maxHrs,1),a.timeObject.minutes=e(a.maxMinutes,a.timeObject.configstep));null!=a.returnFormat&&"undefined"!=a.returnFormat&&(C=a.returnFormat.split(" ").length,a.timeObject.returnFormat=2===C?12:24);null!=a.displayModel&&"undefined"!=a.displayModel?2===a.displayModel.split(" ").length?a.timeObject.format12="Y":a.timeObject.format12="N":a.timeObject.format12=null;0==a.timeObject.is24Hrformat&&"Y"==a.timeObject.format12?a.timeObject.format12=
"Y":1==a.timeObject.is24Hrformat&&"N"==a.timeObject.format12&&(a.timeObject.format12="N");a.meridiansList=[f("xei18n")("default.time.am"),f("xei18n")("default.time.pm")];a.commonIncrement=function(e,f,g){if(!g)if(0===parseInt(e)||-1===parseInt(e))h(e,f,a.timeObject.minutes,g),r(e,f);else if(0<parseInt(e)&&parseInt(e)<a.timeObject.minutes.length-2)h(e,f,a.timeObject.minutes,g),r(e,f);else{if(parseInt(e)>a.timeObject.minutes.length-2||parseInt(e)===a.timeObject.minutes.length-2)h(e,f,a.timeObject.minutes,
g),g=parseInt(e),parseInt(e)!==a.timeObject.minutes.length-1&&(e=angular.element(f).closest("ul"),g=angular.element(e).find("li")[g].innerText,f=angular.element(f).closest("div"),angular.element(f).find("div.previousDiv").text(""),angular.element(f).find("div.previousDiv").text(g))}else if(0===parseInt(e)||-1===parseInt(e))h(e,f,a.timeObject.hours,g),r(e,f);else if(0<parseInt(e)&&parseInt(e)<a.timeObject.hours.length-2)h(e,f,a.timeObject.hours,g),r(e,f);else if(parseInt(e)>a.timeObject.hours.length-
2||parseInt(e)===a.timeObject.hours.length-2)h(e,f,a.timeObject.hours,g),g=parseInt(e),parseInt(e)!==a.timeObject.hours.length-1&&(e=angular.element(f).closest("ul"),g=angular.element(e).find("li")[g].innerText,f=angular.element(f).closest("div"),angular.element(f).find("div.previousDiv").text(""),angular.element(f).find("div.previousDiv").text(g))};a.commonDecrement=function(e,f,g){var h=e-1;e=angular.element(f).closest("div");if(!(0>parseInt(h))){f=angular.element(f).closest("ul");var l=angular.element(f).find("li")[h];
g?a.hrsFocusElem=angular.element(f).find("li")[h]:a.minFocusElem=angular.element(f).find("li")[h];angular.element(f).find("li").each(function(a,c){$(c).attr("tabindex",-1)});angular.element(f).find("li").siblings().removeClass("active-timepicker");angular.element(l).addClass("active-timepicker");angular.element(l).attr("tabindex",0);angular.element(l).focus();angular.element(e).find("div.nextDiv").text("");f=g?a.timeObject.hours[h+1]:a.timeObject.minutes[h+1];angular.element(e).find("div.nextDiv").text(f);
1>h||0===h?angular.element(e).find("div.previousDiv").text(""):(angular.element(e).find("div.previousDiv").text(""),g=g?a.timeObject.hours[h-1]:a.timeObject.minutes[h-1],angular.element(e).find("div.previousDiv").text(g))}};a.disableInput=function(a){a.find("input.input-field").attr("disabled","disabled");a.find("input.input-field").attr("readonly","readonly");a.find("input.input-field").attr("tabindex",-1)};a.enableInput=function(a){a.find("input.input-field").removeAttr("readonly");a.find("input.input-field").removeAttr("disabled");
a.find("input.input-field").attr("tabindex",0)}}],link:function(c,g){h.bind("click",function(a){0<g.find(a.target).length||(c.toggleContainer=!1,c.enableInput(g),c.$digest())});a(function(){function a(c){c.preventDefault();c.stopPropagation();c.cancelBubble=!0}function h(a,e,f){var g,l;if(c.timeObject.is24Hrformat){g=c.timeObject.hours[parseInt(a)];var n;c.timeObject.minutes.map(function(a,c){a==e&&(n=c)});e=n;l=c.timeObject.minutes[parseInt(e)]}else g=c.timeObject.hours[parseInt(a)-1],c.timeObject.minutes.map(function(a,
c){a==e&&(n=c)}),e=n,l=c.timeObject.minutes[parseInt(e)-1];var p=f.find("ul:last li")[parseInt(e)],r=f.find("ul:first li")[parseInt(a)];l&&g?(f.find("ul:last li")[parseInt(e)].focus(),c.commonIncrement(parseInt(e)-1,p,!1),c.commonIncrement(parseInt(a)-1,r,!0),f.find("ul:first li")[parseInt(a)].focus()):0===a&&void 0===g&&void 0!==l?(f.find("ul:last li")[parseInt(e)].focus(),c.commonIncrement(parseInt(e)-1,p,!1),c.commonIncrement(-1,r,!0)):void 0===l&&void 0!==g?(p=f.find("ul:last li")[0],c.commonIncrement(-1,
p,!1),c.commonIncrement(parseInt(a-1),r,!0)):(p=f.find("ul:last li")[0],r=f.find("ul:first li")[0],c.commonIncrement(-1,p,!1),c.commonIncrement(-1,r,!0))}function l(a){var e=c.showError=!1;null!=a&&""!=a&&(e=!1,t(a)||(e=!0));e&&(c.showError=!0,c.$emit("time-picker-error",f("xei18n")("timepicker.error.format.validation"),c.xeId))}function t(a){var e;c.timeObject.is24Hrformat?(e=a.split(":"),a=c.formatNumberTwoDecimal(e[0]),e=c.formatNumberTwoDecimal(e[1]),e=c.formatEnteredTime(a+":"+e,c._24hrFormat,
c.timeObject.displayFormat)):a&&(a=c.formatTimeTo12Hours(a,!1),e=c.formatEnteredTime(a,c._12hrFormat,c._12hrFormat));return e}function C(){var a=angular.element("#"+c.xeId).closest("div").next();c.toggleContainer=!1;var e=angular.element(a).find("ul:first li.active-timepicker").text(),f=angular.element(a).find("ul:last li.active-timepicker").text(),a=angular.element(a).find("div.pushmeBorder").text(),e=e+":"+f,e=c.timeObject.is24Hrformat?e:e+" "+a;B(e);c.enableInput(g);g.find("input.input-field").focus();
c.displayModel=e;angular.element(g.find("input.input-field")).controller("ngModel").$setDirty();c.$apply()}function B(a){var e,f;if("Y"===c.timeObject.format12||"N"===c.timeObject.format12)c.timeObject.is24Hrformat?f=c.formatEnteredTime(a,c.displayFormat,c.returnFormat):(f=c.formatTimeTo12Hours(a,!1),f=c.formatEnteredTime(f,c.displayFormat,c.returnFormat));if("Y"===c.timeObject.format12||"N"===c.timeObject.format12)c.timeObject.is24Hrformat?e=c.formatEnteredTime(a,c.displayFormat,c.displayFormat):
(a=c.formatTimeTo12Hours(a,!1),e=c.formatEnteredTime(a,c.displayFormat,c.displayFormat),e=c.formatTimeTo12Hours(e,!0));c.displayModel=e;c.modelScope=f}function z(a){var c=f("xei18n")("default.time.am"),e=f("xei18n")("default.time.pm");$(a).text(function(a,f){return f===c?e:c});$(a).next().text(function(a,f){return f===c?e:c})}function J(a,e,f,g){a=Math.max(-1,Math.min(1,a.wheelDelta||-a.detail));if(0>a)return c.commonIncrement(e,f,g),!1;0<a&&c.commonDecrement(e,f,g)}function p(a){angular.element(a).addClass("active-timepickerFocus")}
function H(){angular.element(c.hrsFocusElem).parent().removeAttr("aria-label");angular.element(c.minFocusElem).parent().removeAttr("aria-label")}function G(){var a=g.find(".minFocus"),c=g.find(".hrsFocus"),e=g.find(".meridianFocus"),f=g.find(".footercancelButton");angular.element(e).removeClass("active-timepickerFocus");angular.element(a).removeClass("active-timepickerFocus");angular.element(c).removeClass("active-timepickerFocus");angular.element(f).removeClass("active-timepickerFocus")}function T(){angular.element(c.hrsFocusElem).parent().attr("aria-label",
f("xei18n")("timepicker.hour.aria.label")+" "+f("xei18n")("timepicker.shortcuts.aria.label"))}function K(){c.timeObject.is24Hrformat?angular.element(c.minFocusElem).parent().attr("aria-label",f("xei18n")("timepicker.min.aria.24hrs.label")+" "+f("xei18n")("timepicker.shortcuts.aria.label")):angular.element(c.minFocusElem).parent().attr("aria-label",f("xei18n")("timepicker.min.aria.label")+" "+f("xei18n")("timepicker.shortcuts.aria.label"))}function ba(c){if(Z){var e=c.originalEvent.touches?c.originalEvent.touches[0]:
c;ja={time:(new Date).getTime(),coords:[e.pageX,e.pageY]};10<Math.abs(Z.coords[1]-ja.coords[1])&&a(c)}}function V(a,c){G();c=g.find("."+c);angular.element(c).addClass("active-timepickerFocus");c=a.originalEvent.touches?a.originalEvent.touches[0]:a;Z={time:(new Date).getTime(),coords:[c.pageX,c.pageY],origin:$(a.target)}}function ha(e,f,g,h){if(Z&&ja&&1E3>ja.time-Z.time&&30<Math.abs(Z.coords[1]-ja.coords[1])&&75>Math.abs(Z.coords[0]-ja.coords[0]))return Z.coords[1]>ja.coords[1]?c.commonIncrement(parseInt(e),
f,g):c.commonDecrement(parseInt(e),f,g),Z=ja=void 0,a(h),!1}g.find(".input-outerContainer").css("width",c.xeWidth);angular.element(g.find("div.timepickerContainer")).on("keydown",function(a){a.keyCode===r.F9&&(c.toggleContainer=!1,c.$digest(),c.enableInput(g),g.find("div.input-container input.input-field").focus(),H())});(function(a){var e=c.formatEnteredTime(a,c.returnFormat,c.returnFormat);a=c.formatEnteredTime(a,c.returnFormat,c.displayFormat);12!=c.timeObject.returnFormat||c.timeObject.is24Hrformat||
(e=c.formatTimeTo12Hours(a,!1),e=c.formatEnteredTime(e,c._12hrFormat,c.returnFormat));c.timeObject.is24Hrformat||(a=c.formatTimeTo12Hours(a,!0));c.displayModel=a;c.modelScope=e})(c.displayModel);var W=c.getBrowser(),W="chrome"==W?"wheel":"firefox"==W?"DOMMouseScroll":"mousewheel";g.find("div.extraDiv").on("focus",function(){angular.element(c.hrsFocusElem).focus();c.focusPrevElement=g.find(".hrsFocus");angular.element(c.focusPrevElement).addClass("active-timepickerFocus")});var Q=g.find("div.input-container .inputicon");
angular.element(Q).on("click",function(e){G();c.focusHrsElement=g.find(".hrsFocus");angular.element(c.focusHrsElement).addClass("active-timepickerFocus");c.showError=!1;c.toggleContainer=c.toggleContainer?!1:!0;c.toggleContainer?c.disableInput(g):c.enableInput(g);var p=g.find("input.input-field").val();l(p);c.$digest();if(c.showError){var r=g.find("ul:last li")[0],t=g.find("ul:first li")[0];c.commonDecrement(1,r,!1);c.commonDecrement(1,t,!0);g.find("ul:first li")[0].focus();angular.element(g).find("input.input-field").val("");
c.displayModel="";c.modelScope="";c.$apply()}else if(c.timeObject.is24Hrformat){var w=p.split(":")[0],p=p.split(":")[1],w=parseInt(w),p=parseInt(p);h(w,p,g)}else if(w=p.split(":")[0],w=parseInt(w)-1,p=p.split(":")[1],void 0!==p){var z=p.split(" ")[0];h(w,z,g);w=p.split(" ")[1];w.toLocaleLowerCase()===f("xei18n")("default.time.am").toLocaleLowerCase()?(r=c.meridiansList[0],t=c.meridiansList[1]):w.toLocaleLowerCase()===f("xei18n")("default.time.pm").toLocaleLowerCase()&&(r=c.meridiansList[1],t=c.meridiansList[0]);
g.find("div.pushmeBorder").text(r);g.find("div.meridianPm").text(t)}else h(w,0,g,1);a(e)});Q=g.find("div.timepickerContainer");angular.element(Q).on("keydown",function(e){e.keyCode===r.ESC&&(G(),c.enableInput(g),c.showError=!1,c.toggleContainer=!1,c.$digest(),g.find("div.input-container input.input-field").focus(),a(e))});Q=g.find("div.input-container input.input-field");angular.element(Q).on("focusout",function(e){var f=g.find("input.input-field").val();c.enableInput(g);l(f);a(e);c.showError?(g.find("input.input-field").val(""),
c.displayModel="",c.modelScope=""):(f=t(f),B(f));c.$apply()});angular.element(Q).on("keydown",function(e){if(e.keyCode===r.F9){G();var p=g.find(".hrsFocus");angular.element(p).addClass("active-timepickerFocus");c.showError=!1;var z=angular.element(g).find("input.input-field").val();c.toggleContainer=!0;l(z);c.$digest();c.disableInput(g);H();T();if(c.showError){var C=g.find("ul:last li")[0],p=g.find("ul:first li")[0];c.commonDecrement(1,C,!1);c.commonDecrement(1,p,!0);g.find("ul:first li")[0].focus();
angular.element(g).find("input.input-field").val("")}else if(c.timeObject.is24Hrformat){var p=z.split(":")[0],K=z.split(":")[1],p=parseInt(p),K=parseInt(K);h(p,K,g,1)}else if(p=z.split(":")[0],p=parseInt(p)-1,K=z.split(":")[1],void 0!==K){var J=K.split(" ")[0],z=c.meridiansList[1];h(p,J,g,0);p=K.split(" ")[1];void 0!==p&&(p.toLocaleLowerCase()===f("xei18n")("default.time.am").toLocaleLowerCase()?(C=c.meridiansList[0],z=c.meridiansList[1]):p.toLocaleLowerCase()===f("xei18n")("default.time.pm").toLocaleLowerCase()&&
(C=c.meridiansList[1],z=c.meridiansList[0]),g.find("div.pushmeBorder").text(C),g.find("div.meridianPm").text(z))}else h(p,0,g,1);a(e)}if(e.keyCode===r.TAB)return l(this.value),z=t(this.value),B(z),c.$apply(),!0});g.find("footer.timerFooter .footercancelButton");g.find("footer.timerFooter .footercancelButton").on("click",function(e){G();c.showError=!1;c.enableInput(g);c.toggleContainer=!1;c.$digest();g.find("div.input-container input.input-field").focus();a(e)});g.find("footer.timerFooter .footercancelButton").on("keydown",
function(a){a.shiftKey&&a.keyCode===r.TAB&&(H(),c.timeObject.is24Hrformat?(K(),G(),a=g.find("ul.minFocus")):(G(),a=g.find("div.meridianFocus")),p(a));return!0});g.find("footer.timerFooter xe-button button.primary").on("keydown, click",function(c){C();a(c)});g.find("footer.timerFooter xe-button button.primary").on("keydown",function(a){a.shiftKey||a.keyCode!==r.TAB||(H(),T())});if(!c.timeObject.is24Hrformat){var Q=g.find("div.timepickerContainer .mainContainer .tickerContainer")[0].classList[1],sa=
g.find("div.timepickerContainer .mainContainer .pushmeBorder")[0],za=g.find(".meridianFocus");$("."+Q).on(W,function(a){G();p(za);z(sa)});$("."+Q).on("click",function(a){G();p(za)});$("."+Q).on("keydown",function(a){a.keyCode!==r.UP&&a.keyCode!==r.DOWN||z(sa);a.shiftKey&&a.keyCode===r.TAB&&(H(),K());a.shiftKey||a.keyCode!==r.TAB||H()});$("."+Q).on("touchend",function(a){G();p(za);z(sa)})}c.hrsFocusElem=g.find("ul:first li")[0];c.minFocusElem=g.find("ul:last li")[0];var oa=g.find("ul:first li"),pa=
oa[0],Q=angular.element(pa).closest("div"),wa=angular.element(pa).closest("ul"),Fa=angular.element(wa).find("li")[1].innerText;angular.element(Q).find("div.nextDiv").text(Fa);angular.element(pa).attr("tabindex",0);$(wa).on("click",function(){G();p(wa)});angular.element(Q).find("div.nextDiv").on(W,function(c){var e=c.originalEvent,f=$(this.parentElement).find("ul li.active-timepicker");G();var h=g.find(".hrsFocus");p(h);h=parseInt(f[0].classList[0].split("_")[1]);J(e,h,f,!0);a(c);return!1});angular.element(Q).find("div.previousDiv").on(W,
function(c){var e=c.originalEvent,f=$(this.parentElement).find("ul li.active-timepicker");G();var h=g.find(".hrsFocus");p(h);h=parseInt(f[0].classList[0].split("_")[1]);J(e,h,f,!0);a(c);return!1});oa.on("keydown",function(e){var f=parseInt(this.classList[0].split("_")[1]);c.focusPrevElement=g.find(".minFocus");c.focusCurrentElement=g.find(".hrsFocus");oa.each(function(a,c){$(c).attr("tabindex",-1)});angular.element("."+this.classList[0]).attr("tabindex",0);return e.keyCode===r.DOWN?(c.commonIncrement(f,
this,!0),H(),a(e),!1):e.keyCode===r.UP?(c.commonDecrement(f,this,!0),H(),a(e),!1):e.keyCode===r.RIGHT?(angular.element(c.minFocusElem).focus(),G(),p(c.focusPrevElement),H(),K(),angular.element(c.minFocusElem).focus(),a(e),!1):e.keyCode===r.ENTER?(H(),C(),a(e),!1):e.shiftKey||e.keyCode!==r.TAB?e.shiftKey&&e.keyCode===r.TAB?(f=g.find("footer.timerFooter xe-button button.primary"),angular.element(f).focus(),G(),p(f),H(),a(e),!1):!0:(angular.element(c.minFocusElem).focus(),G(),p(c.focusPrevElement),H(),
K(),angular.element(c.minFocusElem).focus(),a(e),!1)});oa.on(W,function(c){var e=c.originalEvent,f=$(this).closest("ul"),f=$(f).find("li.active-timepicker"),h=parseInt(f[0].classList[0].split("_")[1]);G();var l=g.find(".hrsFocus");p(l);J(e,h,f,!0);a(c);return!1});var ta=g.find("ul:last li"),pa=ta[0],ma=angular.element(pa).closest("div"),ka=angular.element(pa).closest("ul"),Fa=angular.element(ka).find("li")[1].innerText;angular.element(pa).attr("tabindex",0);angular.element(ma).find("div.nextDiv").text(Fa);
$(ka).on("click",function(){G();p(ka)});angular.element(ma).find("div.nextDiv").on(W,function(c){var e=c.originalEvent,f=$(this.parentElement).find("ul li.active-timepicker");G();var h=g.find(".minFocus");p(h);h=parseInt(f[0].classList[0].split("_")[1]);J(e,h,f,!1);a(c);return!1});angular.element(ma).find("div.previousDiv").on(W,function(c){var e=c.originalEvent,f=$(this.parentElement).find("ul li.active-timepicker");G();var h=g.find(".minFocus");p(h);h=parseInt(f[0].classList[0].split("_")[1]);J(e,
h,f,!1);a(c);return!1});T();ta.on("keydown",function(f){var h=parseInt(this.classList[0].split("_")[1]);c.focusPrevElement=g.find(".hrsFocus");c.focusNextElement=g.find(".meridianFocus");c.focusCurrentElement=g.find(".minFocus");ta.each(function(a,c){$(c).attr("tabindex",-1)});angular.element("."+this.classList[0]).attr("tabindex",0);if(f.keyCode===r.DOWN)return H(),c.commonIncrement(h,this,!1),a(f),!1;if(f.keyCode===r.UP)return H(),c.commonDecrement(h,this,!1),a(f),!1;if(f.keyCode===r.LEFT)return H(),
T(),angular.element(c.hrsFocusElem).attr("tabindex",0),angular.element(c.hrsFocusElem).focus(),G(),p(c.focusPrevElement),a(f),!1;if(f.keyCode===r.RIGHT)return H(),c.ampmEle=g.find("div.pushmeBorder"),angular.element(c.ampmEle).attr("tabindex",0),angular.element(c.ampmEle).focus(),c.timeObject.is24Hrformat||(h=g.find("div.meridianFocus"),g.find(".minFocus"),G(),p(h)),a(f),!1;if(f.keyCode===r.ENTER)return H(),C(),a(f),!1;if(!f.shiftKey&&f.keyCode===r.TAB){var l=g.find(".footercancelButton"),t=g.find(".minFocus"),
h=g.find(".meridianFocus");e.isRtl()?(angular.element(l).addClass("active-timepickerFocus"),angular.element(t).removeClass("active-timepickerFocus")):c.timeObject.is24Hrformat?G():(G(),p(h));angular.element(l).removeClass("active-timepickerFocus");H()}return f.shiftKey&&f.keyCode===r.TAB?(angular.element(c.hrsFocusElem).attr("tabindex",0),angular.element(c.hrsFocusElem).focus(),G(),p(c.focusPrevElement),H(),T(),angular.element(c.hrsFocusElem).focus(),a(f),!1):!0});g.find("div.mainContainer .pushmeBorder").on("keydown",
function(e){c.focusCurrentElement=g.find(".meridianFocus");c.focusPrevElement=g.find(".minFocus");if(e.keyCode===r.LEFT)return angular.element(c.minFocusElem).focus(),G(),p(c.focusPrevElement),H(),K(),angular.element(c.minFocusElem).focus(),a(e),!1;if(e.keyCode===r.RIGHT)return!1;if(e.keyCode===r.ENTER)return H(),C(),a(e),!1;e.shiftKey||e.keyCode!==r.TAB||G();e.shiftKey&&e.keyCode===r.TAB&&(G(),p(c.focusPrevElement),$(".meridianFocus").removeClass("active-timepickerFocus"))});ta.on(W,function(c){var e=
c.originalEvent,f=$(this).closest("ul"),f=$(f).find("li.active-timepicker"),h=parseInt(f[0].classList[0].split("_")[1]);G();var l=g.find(".minFocus");p(l);J(e,h,f,!1);a(c);return!1});var Z={},ja={},Ga,la;angular.element(Q).on("mousedown",function(a){Ga=a.pageY}).on("mouseup",function(e){G();var f=g.find(".hrsFocus");angular.element(f).addClass("active-timepickerFocus");var f=$(this.parentElement).find(".hrsContainer  ul li.active-timepicker"),h=parseInt(f[0].classList[0].split("_")[1]);la=e.pageY;
Ga<la?c.commonDecrement(h,f,!0):Ga>la&&c.commonIncrement(h,f,!0);a(e);return!1});var qa,Y;angular.element(ma).on("mousedown",function(a){qa=a.pageY}).on("mouseup",function(e){G();var f=g.find(".minFocus");angular.element(f).addClass("active-timepickerFocus");var f=$(this.parentElement).find(".minContainer  ul li.active-timepicker"),h=parseInt(f[0].classList[0].split("_")[1]);Y=e.pageY;qa<Y?c.commonDecrement(h,f,!1):qa>Y&&c.commonIncrement(h,f,!1);a(e);return!1});$(Q).find("div.nextDiv").on({touchstart:function(a){V(a,
"hrsFocus");$(this).on("touchmove",ba);a.preventDefault()},touchend:function(a){$(this).off("touchmove");var c=this.closest("div"),c=$(c).prev(),e=$(c).find("li.active-timepicker").val();ha(e,c,!0,a)}});$(Q).find("div.previousDiv").on({touchstart:function(a){V(a,"hrsFocus");$(this).on("touchmove",ba);a.preventDefault()},touchend:function(a){$(this).off("touchmove");var c=this.closest("div"),c=$(c).next(),e=$(c).find("li.active-timepicker").val();ha(e,c,!0,a)}});$(oa).on({touchstart:function(a){V(a,
"hrsFocus");$(this).on("touchmove",ba);a.preventDefault()},touchend:function(a){$(this).off("touchmove");var c=this.classList[0].split("_")[1];ha(c,this,!0,a)}});$(ta).on({touchstart:function(c){V(c,"minFocus");$(this).on("touchmove",ba);a(c)},touchend:function(a){$(this).off("touchmove");var c=this.classList[0].split("_")[1];ha(c,this,!1,a)}});$(ma).find("div.previousDiv").on({touchstart:function(a){V(a,"minFocus");$(this).on("touchmove",ba);a.preventDefault()},touchend:function(a){$(this).off("touchmove");
this.closest("div");var c=$(this.closest("div")).next(),e=$(c).find("li.active-timepicker")[0].classList[0].split("_")[1];ha(e,c,!1,a)}});$(ma).find("div.nextDiv").on({touchstart:function(a){V(a,"minFocus");$(this).on("touchmove",ba);a.preventDefault()},touchend:function(a){$(this).off("touchmove");this.closest("div");var c=$(this.closest("div")).prev(),e=$(c).find("li.active-timepicker")[0].classList[0].split("_")[1];ha(e,c,!1,a)}})},10)}}}])})();
(function(a,f){function g(c,g,n){function w(){setTimeout(function(){!X.start&&0!==a("body")[0].offsetWidth&&B()},0)}function z(c){if(!X||c!=X.name){xa++;T();var e=X,f;e?((e.beforeHide||Q)(),W(Xa,Xa.height()),e.element.hide()):W(Xa,1);Xa.css("overflow","hidden");(X=cc[c])?X.element.show():X=cc[c]=new Ca[c](f=pa=a("<div class='fc-view fc-view-"+c+"' style='position:absolute'/>").appendTo(Xa),E);e&&S.deactivateButton(e.name);S.activateButton(c);B();Xa.css("overflow","");e&&W(Xa,1);f||(X.afterShow||Q)();
xa--}}function B(a){if(0!==U.offsetWidth){xa++;T();Y===f&&Ta();var e=!1;!X.start||a||Da<X.start||Da>=X.end?(X.render(Da,a||0),F(!0),e=!0):X.sizeDirty?(X.clearEvents(),F(),e=!0):X.eventsDirty&&(X.clearEvents(),e=!0);X.sizeDirty=!1;X.eventsDirty=!1;a=e;!g.lazyFetching||aa(X.visStart,X.visEnd)?Ia():a&&J();ba=c.outerWidth();S.updateTitle(X.title);a=new Date;a>=X.start&&a<X.end?S.disableButton("today"):S.enableButton("today");xa--;X.trigger("viewDisplay",U)}}function I(){G();0!==U.offsetWidth&&(Ta(),F(),
T(),X.clearEvents(),X.renderEvents(ga),X.sizeDirty=!1)}function G(){a.each(cc,function(a,c){c.sizeDirty=!0})}function Ta(){Y=g.contentHeight?g.contentHeight:g.height?g.height-(Rb?Rb.height():0)-ha(Xa):Math.round(Xa.width()/Math.max(g.aspectRatio,.5))}function F(a){xa++;X.setHeight(Y,a);pa&&(pa.css("position","relative"),pa=null);X.setWidth(Xa.width(),a);xa--}function K(){if(!xa)if(X.start){var a=++Z;setTimeout(function(){a!=Z||xa||0===U.offsetWidth||ba==(ba=c.outerWidth())||(xa++,I(),X.trigger("windowResize",
U),xa--)},200)}else w()}function Ia(){V(X.visStart,X.visEnd)}function J(a){ya();0!==U.offsetWidth&&(X.clearEvents(),X.renderEvents(ga,a),X.eventsDirty=!1)}function ya(){a.each(cc,function(a,c){c.eventsDirty=!0})}function T(){X&&X.unselect()}var E=this;E.options=g;E.render=function(e){Xa?(Ta(),G(),ya(),B(e)):(c.addClass("fc"),g.isRTL?c.addClass("fc-rtl"):c.addClass("fc-ltr"),g.theme&&c.addClass("ui-widget"),Xa=a("<div class='fc-content' style='position:relative'/>").prependTo(c),S=new h(E,g),(Rb=S.render())&&
c.prepend(Rb),z(g.defaultView),a(window).resize(K),0!==a("body")[0].offsetWidth||w())};E.destroy=function(){a(window).unbind("resize",K);S.destroy();Xa.remove();c.removeClass("fc fc-rtl ui-widget")};E.refetchEvents=Ia;E.reportEvents=function(a){ga=a;J()};E.reportEventChange=function(a){J(a)};E.rerenderEvents=J;E.changeView=z;E.select=function(a,c,e){X.select(a,c,e===f?!0:e)};E.unselect=T;E.prev=function(){B(-1)};E.next=function(){B(1)};E.prevYear=function(){r(Da,-1);B()};E.nextYear=function(){r(Da,
1);B()};E.today=function(){Da=new Date;B()};E.gotoDate=function(a,c,e){a instanceof Date?Da=x(a):C(Da,a,c,e);B()};E.incrementDate=function(a,c,e){a!==f&&r(Da,a);c!==f&&l(Da,c);e!==f&&t(Da,e);B()};E.formatDate=function(a,c){return p(a,c,g)};E.formatDates=function(a,c,e){return H(a,c,e,g)};E.getDate=function(){return x(Da)};E.getView=function(){return X};E.option=function(a,c){if(c===f)return g[a];if("height"==a||"contentHeight"==a||"aspectRatio"==a)g[a]=c,I()};E.trigger=function(a,c){if(g[a])return g[a].apply(c||
U,Array.prototype.slice.call(arguments,2))};e.call(E,g,n);var aa=E.isFetchNeeded,V=E.fetchEvents,U=c[0],S,Rb,Xa,X,cc={},ba,Y,pa,Z=0,xa=0,Da=new Date,ga=[],na;C(Da,g.year,g.month,g.date);g.droppable&&a(document).bind("dragstart",function(c,e){var f=c.target,h=a(f);if(!h.parents(".fc").length){var l=g.dropAccept;if(a.isFunction(l)?l.call(f,h):h.is(l))na=f,X.dragStart(na,c,e)}}).bind("dragstop",function(a,c){na&&(X.dragStop(na,a,c),na=null)})}function h(c,e){function f(g){var l=a("<td class='fc-header-"+
g+"'/>");(g=e.header[g])&&a.each(g.split(" "),function(f){0<f&&l.append("<span class='fc-header-space'/>");var g;a.each(this.split(","),function(f,n){if("title"==n)l.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),g&&g.addClass(h+"-corner-right"),g=null;else{var p;c[n]?p=c[n]:Ca[n]&&(p=function(){t.removeClass(h+"-state-hover");c.changeView(n)});if(p){f=e.theme?oa(e.buttonIcons,n):null;var r=oa(e.buttonText,n),t=a("<span class='fc-button fc-button-"+n+" "+h+"-state-default'>"+(f?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+
f+"'/></span>":r)+"</span>").click(function(){t.hasClass(h+"-state-disabled")||p()}).mousedown(function(){t.not("."+h+"-state-active").not("."+h+"-state-disabled").addClass(h+"-state-down")}).mouseup(function(){t.removeClass(h+"-state-down")}).hover(function(){t.not("."+h+"-state-active").not("."+h+"-state-disabled").addClass(h+"-state-hover")},function(){t.removeClass(h+"-state-hover").removeClass(h+"-state-down")}).appendTo(l);wa(t);g||t.addClass(h+"-corner-left");g=t}}});g&&g.addClass(h+"-corner-right")});
return l}this.render=function(){h=e.theme?"ui":"fc";if(e.header)return g=a("<table class='fc-header' style='width:100%'/>").append(a("<tr/>").append(f("left")).append(f("center")).append(f("right")))};this.destroy=function(){g.remove()};this.updateTitle=function(a){g.find("h2").html(a)};this.activateButton=function(a){g.find("span.fc-button-"+a).addClass(h+"-state-active")};this.deactivateButton=function(a){g.find("span.fc-button-"+a).removeClass(h+"-state-active")};this.disableButton=function(a){g.find("span.fc-button-"+
a).addClass(h+"-state-disabled")};this.enableButton=function(a){g.find("span.fc-button-"+a).removeClass(h+"-state-disabled")};var g=a([]),h}function e(c,e){function g(e,f){h(e,function(g){if(f==K){if(g){c.eventDataTransform&&(g=a.map(g,c.eventDataTransform));e.eventDataTransform&&(g=a.map(g,e.eventDataTransform));for(var h=0;h<g.length;h++)g[h].source=e,n(g[h]);J=J.concat(g)}H--;H||z(J)}})}function h(e,f){var g,l=Ba.sourceFetchers,n;for(g=0;g<l.length;g++){n=l[g](e,G,F,f);if(!0===n)return;if("object"==
typeof n){h(n,f);return}}if(g=e.events)a.isFunction(g)?(E++||t("loading",null,!0),g(x(G),x(F),function(a){f(a);--E||t("loading",null,!1)})):a.isArray(g)?f(g):f();else if(e.url){var p=e.success,r=e.error,w=e.complete;g=a.extend({},e.data||{});l=ka(e.startParam,c.startParam);n=ka(e.endParam,c.endParam);l&&(g[l]=Math.round(+G/1E3));n&&(g[n]=Math.round(+F/1E3));E++||t("loading",null,!0);a.ajax(a.extend({},ia,e,{data:g,success:function(c){c=c||[];var e=ma(p,this,arguments);a.isArray(e)&&(c=e);f(c)},error:function(){ma(r,
this,arguments);f()},complete:function(){ma(w,this,arguments);--E||t("loading",null,!1)}}))}else f()}function l(c){a.isFunction(c)||a.isArray(c)?c={events:c}:"string"==typeof c&&(c={url:c});if("object"==typeof c){var e=c;e.className?"string"==typeof e.className&&(e.className=e.className.split(/\s+/)):e.className=[];for(var f=Ba.sourceNormalizers,g=0;g<f.length;g++)f[g](e);I.push(c);return c}}function n(a){var e=a.source||{},g=ka(e.ignoreTimezone,c.ignoreTimezone);a._id=a._id||(a.id===f?"_fc"+La++:
a.id+"");a.date&&(a.start||(a.start=a.date),delete a.date);a._start=x(a.start=B(a.start,g));a.end=B(a.end,g);a.end&&a.end<=a.start&&(a.end=null);a._end=a.end?x(a.end):null;a.allDay===f&&(a.allDay=ka(e.allDayDefault,c.allDayDefault));a.className?"string"==typeof a.className&&(a.className=a.className.split(/\s+/)):a.className=[]}function p(a,c){return a&&c&&r(a)==r(c)}function r(a){return("object"==typeof a?a.events||a.url:"")||a}this.isFetchNeeded=function(a,c){return!G||a<G||c>F};this.fetchEvents=
function(a,c){G=a;F=c;J=[];a=++K;H=c=I.length;for(var e=0;e<c;e++)g(I[e],a)};this.addEventSource=function(a){if(a=l(a))H++,g(a,K)};this.removeEventSource=function(c){I=a.grep(I,function(a){return!p(a,c)});J=a.grep(J,function(a){return!p(a.source,c)});z(J)};this.updateEvent=function(a){var c,e=J.length,f,g=w().defaultEventEnd,h=a.start-a._start,l=a.end?a.end-(a._end||g(a)):0;for(c=0;c<e;c++)f=J[c],f._id==a._id&&f!=a&&(f.start=new Date(+f.start+h),f.end=a.end?f.end?new Date(+f.end+l):new Date(+g(f)+
l):null,f.title=a.title,f.url=a.url,f.allDay=a.allDay,f.className=a.className,f.editable=a.editable,f.color=a.color,f.backgroundColor=a.backgroundColor,f.borderColor=a.borderColor,f.textColor=a.textColor,n(f));n(a);z(J)};this.renderEvent=function(a,c){n(a);a.source||(c&&(C.events.push(a),a.source=C),J.push(a));z(J)};this.removeEvents=function(c){if(c){if(!a.isFunction(c)){var e=c+"";c=function(a){return a._id==e}}J=a.grep(J,c,!0);for(f=0;f<I.length;f++)a.isArray(I[f].events)&&(I[f].events=a.grep(I[f].events,
c,!0))}else{J=[];for(var f=0;f<I.length;f++)a.isArray(I[f].events)&&(I[f].events=[])}z(J)};this.clientEvents=function(c){return a.isFunction(c)?a.grep(J,c):c?(c+="",a.grep(J,function(a){return a._id==c})):J};this.normalizeEvent=n;for(var t=this.trigger,w=this.getView,z=this.reportEvents,C={events:[]},I=[C],G,F,K=0,H=0,E=0,J=[],T=0;T<e.length;T++)l(e[T])}function r(a,c,e){a.setFullYear(a.getFullYear()+c);e||I(a);return a}function l(a,c,e){if(+a){c=a.getMonth()+c;var f=x(a);f.setDate(1);f.setMonth(c);
a.setMonth(c);for(e||I(a);a.getMonth()!=f.getMonth();)a.setDate(a.getDate()+(a<f?1:-1))}return a}function t(a,e,f){if(+a){e=a.getDate()+e;var g=x(a);g.setHours(9);g.setDate(e);a.setDate(e);f||I(a);c(a,g)}return a}function c(a,c){if(+a)for(;a.getDate()!=c.getDate();)a.setTime(+a+(a<c?1:-1)*mb)}function n(a,c){a.setMinutes(a.getMinutes()+c);return a}function I(a){a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);return a}function x(a,c){return c?I(new Date(+a)):new Date(+a)}function F(){var a=
0,c;do c=new Date(1970,a++,1);while(c.getHours());return c}function w(a,c){return Math.round((x(a,!0)-x(c,!0))/864E5)}function C(a,c,e,g){c!==f&&c!=a.getFullYear()&&(a.setDate(1),a.setMonth(0),a.setFullYear(c));e!==f&&e!=a.getMonth()&&(a.setDate(1),a.setMonth(e));g!==f&&a.setDate(g)}function B(a,c){if("object"==typeof a)return a;if("number"==typeof a)return new Date(1E3*a);if("string"==typeof a){if(a.match(/^\d+(\.\d+)?$/))return new Date(1E3*parseFloat(a));c===f&&(c=!0);return z(a,c)||(a?new Date(a):
null)}return null}function z(a,e){a=a.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!a)return null;var f=new Date(a[1],0,1);e||!a[13]?(e=new Date(a[1],0,1,9,0),a[3]&&(f.setMonth(a[3]-1),e.setMonth(a[3]-1)),a[5]&&(f.setDate(a[5]),e.setDate(a[5])),c(f,e),a[7]&&f.setHours(a[7]),a[8]&&f.setMinutes(a[8]),a[10]&&f.setSeconds(a[10]),a[12]&&f.setMilliseconds(1E3*Number("0."+a[12])),c(f,e)):(f.setUTCFullYear(a[1],
a[3]?a[3]-1:0,a[5]||1),f.setUTCHours(a[7]||0,a[8]||0,a[10]||0,a[12]?1E3*Number("0."+a[12]):0),a[14]&&(e=60*Number(a[16])+(a[18]?Number(a[18]):0),e*="-"==a[15]?1:-1,f=new Date(+f+6E4*e)));return f}function J(a){if("number"==typeof a)return 60*a;if("object"==typeof a)return 60*a.getHours()+a.getMinutes();if(a=a.match(/(\d+)(?::(\d+))?\s*(\w+)?/)){var c=parseInt(a[1],10);a[3]&&(c%=12,"p"==a[3].toLowerCase().charAt(0)&&(c+=12));return 60*c+(a[2]?parseInt(a[2],10):0)}}function p(a,c,e){return H(a,null,
c,e)}function H(a,c,e,f){f=f||S;var g=a,h=c,l,n=e.length,r,t,w,x="";for(l=0;l<n;l++)if(r=e.charAt(l),"'"==r)for(t=l+1;t<n;t++){if("'"==e.charAt(t)){g&&(x=t==l+1?x+"'":x+e.substring(l+1,t),l=t);break}}else if("("==r)for(t=l+1;t<n;t++){if(")"==e.charAt(t)){l=p(g,e.substring(l+1,t),f);parseInt(l.replace(/\D/,""),10)&&(x+=l);l=t;break}}else if("["==r)for(t=l+1;t<n;t++){if("]"==e.charAt(t)){r=e.substring(l+1,t);l=p(g,r,f);l!=p(h,r,f)&&(x+=l);l=t;break}}else if("{"==r)g=c,h=a;else if("}"==r)g=a,h=c;else{for(t=
n;t>l;t--)if(w=Ra[e.substring(l,t)]){g&&(x+=w(g,f));l=t-1;break}t==l&&g&&(x+=r)}return x}function G(a){if(a.end){var c=a.end;a=a.allDay;c=x(c);return a||c.getHours()||c.getMinutes()?t(c,1):I(c)}return t(x(a.start),1)}function T(c,e,g){c.unbind("mouseover").mouseover(function(c){for(var h=c.target,l;h!=this;)l=h,h=h.parentNode;(h=l._fci)!==f&&(l._fci=f,l=e[h],g(l.event,l.element,l),a(c.target).trigger(c));c.stopPropagation()})}function K(c,e,f){for(var g=0,h;g<c.length;g++)h=a(c[g]),h.width(Math.max(0,
e-V(h,f)))}function ba(c,e,f){for(var g=0,h;g<c.length;g++)h=a(c[g]),h.height(Math.max(0,e-ha(h,f)))}function V(c,e){var f=(parseFloat(a.css(c[0],"paddingLeft",!0))||0)+(parseFloat(a.css(c[0],"paddingRight",!0))||0),g;g=(parseFloat(a.css(c[0],"borderLeftWidth",!0))||0)+(parseFloat(a.css(c[0],"borderRightWidth",!0))||0);f+=g;c=e?(parseFloat(a.css(c[0],"marginLeft",!0))||0)+(parseFloat(a.css(c[0],"marginRight",!0))||0):0;return f+c}function ha(c,e){var f=(parseFloat(a.css(c[0],"paddingTop",!0))||0)+
(parseFloat(a.css(c[0],"paddingBottom",!0))||0),g;g=(parseFloat(a.css(c[0],"borderTopWidth",!0))||0)+(parseFloat(a.css(c[0],"borderBottomWidth",!0))||0);f+=g;c=e?(parseFloat(a.css(c[0],"marginTop",!0))||0)+(parseFloat(a.css(c[0],"marginBottom",!0))||0):0;return f+c}function W(a,c){c="number"==typeof c?c+"px":c;a.each(function(a,e){e.style.cssText+=";min-height:"+c+";_height:"+c})}function Q(){}function sa(a,c){return a-c}function za(a){return(10>a?"0":"")+a}function oa(a,c){if(a[c]!==f)return a[c];
c=c.split(/(?=[A-Z])/);for(var e=c.length-1,g;0<=e;e--)if(g=a[c[e].toLowerCase()],g!==f)return g;return a[""]}function pa(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function wa(a){a.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function Fa(a){a.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}
function ta(a,c){var e=a.source||{},f=a.color,g=e.color,h=c("eventColor"),l=a.backgroundColor||f||e.backgroundColor||g||c("eventBackgroundColor")||h,f=a.borderColor||f||e.borderColor||g||c("eventBorderColor")||h;a=a.textColor||e.textColor||c("eventTextColor");c=[];l&&c.push("background-color:"+l);f&&c.push("border-color:"+f);a&&c.push("color:"+a);return c.join(";")}function ma(c,e,f){a.isFunction(c)&&(c=[c]);if(c){var g,h;for(g=0;g<c.length;g++)h=c[g].apply(e,f)||h;return h}}function ka(){for(var a=
0;a<arguments.length;a++)if(arguments[a]!==f)return arguments[a]}function Z(c,e,f){function g(){var e=h();W(c,c.height());V&&V.remove();V=a(e).appendTo(c);S=V.find("thead");ba=S.find(".fc-day-header");X=V.find("tbody");Y=X.find("tr");Z=X.find(".fc-day");la=Y.find("td:first-child");ma=Y.eq(0).find(".fc-day > div");sa=Y.eq(0).find(".fc-day-content > div");Fa(S.add(S.find("tr")));Fa(Y);Y.eq(0).addClass("fc-first");Y.filter(":last").addClass("fc-last");Z.each(function(c,e){c=J(Math.floor(c/Za),c%Za);
B("dayRender",r,c,a(e))});Z.click(l).mousedown(H)}function h(){var a=bb+"-widget-header",c,e,f;c="<thead><tr>";Va&&(c+="<th class='fc-week-number "+a+"'>"+pa(cb)+"</th>");for(e=0;e<Za;e++)f=J(0,e),c+="<th class='fc-day-header fc-"+Qa[f.getDay()]+" "+a+"'>"+pa(Q(f,Ab))+"</th>";a="<table class='fc-border-separate' style='width:100%' cellspacing='0'>"+(c+"</tr></thead>");c=bb+"-widget-content";var g,l;g="<tbody>";for(e=0;e<Ja;e++){g+="<tr class='fc-week'>";Va&&(l=J(e,0),g+="<td class='fc-week-number "+
c+"'><div>"+pa(Q(l,Tb))+"</div></td>");for(f=0;f<Za;f++){l=J(e,f);var n=bb+"-widget-content",p=r.start.getMonth(),t=I(new Date),A="",n=["fc-day","fc-"+Qa[l.getDay()],n];l.getMonth()!=p&&n.push("fc-other-month");+l==+t&&n.push("fc-today",bb+"-state-highlight");A+="<td class='"+n.join(" ")+"' data-date='"+Q(l,"yyyy-MM-dd")+"'><div>";ia&&(A+="<div class='fc-day-number'>"+l.getDate()+"</div>");g+=A+"<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>"}g+="</tr>"}return a+
(g+"</tbody>")+"</table>"}function l(c){if(!w("selectable")){var e=z(a(this).data("date"));B("dayClick",this,e,!0,c)}}function n(a,c,e){e&&ta.build();a=T(a,c);for(c=0;c<a.length;c++)e=a[c],p(e.row,e.leftCol,e.row,e.rightCol).click(l).mousedown(H)}function p(a,e,f,g){a=ta.rect(a,e,f,g,c);return G(a,c)}var r=this;r.renderBasic=function(e,f,h){Ja=e;Za=f;ia=h;bb=w("theme")?"ui":"fc";Ab=w("columnFormat");Va=w("weekNumbers");cb=w("weekNumberTitle");Tb="iso"!=w("weekNumberCalculation")?"w":"W";X?C():xa=
a("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(c);g()};r.setHeight=function(e){ga=e;e=ga-S.height();var f,g,h;"variable"==w("weekMode")?f=g=Math.floor(e/(1==Ja?2:6)):(f=Math.floor(e/Ja),g=e-f*(Ja-1));la.each(function(c,e){c<Ja&&(h=a(e),W(h.find("> div"),(c==Ja-1?g:f)-ha(h)))});W(c,1)};r.setWidth=function(a){Da=a;Ua.clear();oa.clear();eb=0;Va&&(eb=S.find("th.fc-week-number").outerWidth());na=Math.floor((Da-eb)/Za);K(ba.slice(0,-1),na)};r.renderDayOverlay=n;r.defaultSelectionEnd=
function(a,c){return x(a)};r.renderSelection=function(a,c,e){n(a,t(x(c),1),!0)};r.clearSelection=function(){F()};r.reportDayClick=function(a,c,e){var f=E(a);B("dayClick",Z[f.row*Za+f.col],a,c,e)};r.dragStart=function(a,c,e){ka.start(function(a){F();a&&p(a.row,a.col,a.row,a.col)},c)};r.dragStop=function(a,c,e){var f=ka.stop();F();f&&(f=J(f),B("drop",a,f,!0,c,e))};r.defaultEventEnd=function(a){return x(a.start)};r.getHoverListener=function(){return ka};r.colLeft=function(a){return Ua.left(a)};r.colRight=
function(a){return Ua.right(a)};r.colContentLeft=function(a){return oa.left(a)};r.colContentRight=function(a){return oa.right(a)};r.getIsCellAllDay=function(){return!0};r.allDayRow=function(a){return Y.eq(a)};r.getRowCnt=function(){return Ja};r.getColCnt=function(){return Za};r.getColWidth=function(){return na};r.getDaySegmentContainer=function(){return xa};qa.call(r,c,e,f);Ea.call(r);U.call(r);ja.call(r);var w=r.opt,B=r.trigger,C=r.clearEvents,G=r.renderOverlay,F=r.clearOverlays,H=r.daySelectionMousedown,
J=r.cellToDate,E=r.dateToCell,T=r.rangeToSegments,Q=e.formatDate,V,S,ba,X,Y,Z,la,ma,sa,xa,Da,ga,na,eb,Ja,Za,ia,ta,ka,Ua,oa,bb,Ab,Va,cb,Tb;wa(c.addClass("fc-grid"));ta=new Wa(function(c,e){var f,g,h;ba.each(function(c,l){f=a(l);g=f.offset().left;c&&(h[1]=g);h=[g];e[c]=h});h[1]=g+f.outerWidth();Y.each(function(e,l){e<Ja&&(f=a(l),g=f.offset().top,e&&(h[1]=g),h=[g],c[e]=h)});h[1]=g+f.outerHeight()});ka=new $a(ta);Ua=new Na(function(a){return ma.eq(a)});oa=new Na(function(a){return sa.eq(a)})}function ja(){var a=
this;a.renderEvents=function(c,e){a.reportEvents(c);a.renderDayEvents(c,e);a.trigger("eventAfterAllRender")};a.clearEvents=function(){a.reportEventClear();a.getDaySegmentContainer().empty()};Y.call(a)}function Ga(c,e,g){function h(){var e;e=ub+"-widget-header";var f,g,l;g="<thead><tr>";tc?(f=xa(f,uc),f=Vc?f+Lb:Lb+f,g+="<th class='fc-agenda-axis fc-week-number "+e+"'>"+pa(f)+"</th>"):g+="<th class='fc-agenda-axis "+e+"'>&nbsp;</th>";for(l=0;l<jb;l++)f=ka(0,l),g+="<th class='fc-"+Qa[f.getDay()]+" fc-col"+
l+" "+e+"'>"+pa(xa(f,sc))+"</th>";e="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+(g+("<th class='fc-agenda-gutter "+e+"'>&nbsp;</th></tr></thead>"));l=ub+"-widget-header";g=ub+"-widget-content";var n;f=I(new Date);var p,r,t;t=""+("<tbody><tr><th class='fc-agenda-axis "+l+"'>&nbsp;</th>");p="";for(l=0;l<jb;l++)n=ka(0,l),r=["fc-col"+l,"fc-"+Qa[n.getDay()],g],+n==+f&&r.push(ub+"-state-highlight","fc-today"),n="<td class='"+r.join(" ")+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>",
p+=n;e=e+(t+p+("<td class='fc-agenda-gutter "+g+"'>&nbsp;</td></tr></tbody>"))+"</table>";Da&&Da.remove();Da=a(e).appendTo(c);ga=Da.find("thead");na=ga.find("th").slice(1,-1);eb=Da.find("tbody");Ja=eb.find("td").slice(0,-1);Za=Ja.find("> div");oa=Ja.find(".fc-day-content > div");Ba=Ja.eq(0);Ca=Za.eq(0);Fa(ga.add(ga.find("tr")));Fa(eb.add(eb.find("tr")))}function l(){function a(){Va.scrollTop(f)}var c=F(),e=x(c);e.setHours(aa("firstHour"));var f=G(c,e)+1;a();setTimeout(a,0)}function p(a){if(!aa("selectable")){var c=
Math.min(jb-1,Math.floor((a.pageX-Da.offset().left-nb)/Fb)),e=ka(0,c),f=this.parentNode.className.match(/fc-slot(\d+)/);f?(f=parseInt(f[1])*aa("slotMinutes"),e.setHours(Math.floor(f/60)),e.setMinutes(f%60+vb),V("dayClick",Ja[c],e,!1,a)):V("dayClick",Ja[c],e,!0,a)}}function r(a,c,e){e&&kb.build();a=ia(a,c);for(c=0;c<a.length;c++)e=a[c],w(e.row,e.leftCol,e.row,e.rightCol).click(p).mousedown(ta)}function w(a,c,e,f){a=kb.rect(a,c,e,f,Ua);return W(a,Ua)}function z(a,c){for(var e=0;e<jb;e++){var f=ka(0,
e),g=t(x(f),1),h=new Date(Math.max(f,a)),l=new Date(Math.min(g,c));h<l&&(g=kb.rect(0,e,0,e,cb),h=G(f,h),f=G(f,l),g.top=h,g.height=f-h,W(g,cb).click(p).mousedown(T))}}function B(a){return aa("allDaySlot")&&!a.row}function C(a){var c=ka(0,a.col);a=a.row;aa("allDaySlot")&&a--;0<=a&&n(c,vb+a*fb);return c}function G(a,c){a=x(a,!0);if(c<n(x(a),vb))return 0;if(c>=n(x(a),wb))return Bb.height();a=aa("slotMinutes");c=60*c.getHours()+c.getMinutes()-vb;var e=Math.floor(c/a),g=Ra[e];g===f&&(g=Ra[e]=Bb.find("tr:eq("+
e+") td div")[0].offsetTop);return Math.max(0,Math.round(g-1+c%a/a*pc))}function H(c,e){var f=aa("selectHelper");kb.build();if(f){var g=ja(c).col;if(0<=g&&g<jb){var g=kb.rect(0,g,0,g,cb),h=G(c,c),l=G(c,e);if(l>h){g.top=h;g.height=l-h;g.left+=2;g.width-=5;if(a.isFunction(f)){if(c=f(c,e))g.position="absolute",g.zIndex=8,db=a(c).css(g).appendTo(cb)}else g.isStart=!0,g.isEnd=!0,db=a(ma({title:"",start:c,end:e,className:["fc-select-helper"],editable:!1},g)),db.css("opacity",aa("dragOpacity"));db&&(db.click(p).mousedown(T),
cb.append(db),K(db,g.width,!0),ba(db,g.height,!0))}}}else z(c,e)}function E(){Y();db&&(db.remove(),db=null)}function T(c){if(1==c.which&&aa("selectable")){X(c);var e;Aa.start(function(a,c){E();a&&a.col==c.col&&!B(a)?(c=C(c),a=C(a),e=[c,n(x(c),fb),a,n(x(a),fb)].sort(sa),H(e[0],e[3])):e=null},c);a(document).one("mouseup",function(a){Aa.stop();e&&(+e[0]==+e[1]&&Q(e[0],!1,a),Z(e[0],e[3],!1,a))})}}function Q(a,c,e){V("dayClick",Ja[ja(a).col],a,c,e)}this.renderAgenda=function(e){jb=e;ub=aa("theme")?"ui":
"fc";Vc=aa("isRTL");vb=J(aa("minTime"));wb=J(aa("maxTime"));sc=aa("columnFormat");tc=aa("weekNumbers");Lb=aa("weekNumberTitle");uc="iso"!=aa("weekNumberCalculation")?"w":"W";fb=aa("snapMinutes")||aa("slotMinutes");if(Da)h(),S();else{e=ub+"-widget-header";var f=ub+"-widget-content",g,l,r,t,w,z=0==aa("slotMinutes")%15;h();Ua=a("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(c);aa("allDaySlot")?(za=a("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(Ua),g="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+
e+" fc-agenda-axis'>"+aa("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+e+" fc-agenda-gutter'>&nbsp;</th></tr></table>",bb=a(g).appendTo(Ua),Ab=bb.find("tr"),Ab.find("td").click(p).mousedown(ta),Ua.append("<div class='fc-agenda-divider "+e+"'><div class='fc-agenda-divider-inner'/></div>")):za=a([]);Va=a("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(Ua);cb=a("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(Va);
Tb=a("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(cb);g="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>";l=F();t=n(x(l),wb);n(l,vb);for(r=Hb=0;l<t;r++)w=l.getMinutes(),g+="<tr class='fc-slot"+r+" "+(w?"fc-minor":"")+"'><th class='fc-agenda-axis "+e+"'>"+(z&&w?"&nbsp;":xa(l,aa("axisFormat")))+"</th><td class='"+f+"'><div style='position:relative'>&nbsp;</div></td></tr>",n(l,aa("slotMinutes")),Hb++;Bb=a(g+"</tbody></table>").appendTo(cb);Rc=Bb.find("div:first");
Bb.find("td").click(p).mousedown(T)}};this.setWidth=function(c){Ga.clear();La.clear();c=ga.find("th:first");bb&&(c=c.add(bb.find("th:first")));c=c.add(Bb.find("th:first"));nb=0;K(c.width("").each(function(c,e){nb=Math.max(nb,a(e).outerWidth())}),nb);c=Da.find(".fc-agenda-gutter");bb&&(c=c.add(bb.find("th.fc-agenda-gutter")));var e=Va[0].clientWidth;(oc=Va.width()-e)?(K(c,oc),c.show().prev().removeClass("fc-last")):c.hide().prev().addClass("fc-last");Fb=Math.floor((e-nb)/jb);K(na.slice(0,-1),Fb)};
this.setHeight=function(a,c){a===f&&(a=nc);nc=a;Ra={};var e=eb.position().top,g=Va.position().top;a=Math.min(a-e,Bb.height()+g+1);Ca.height(a-ha(Ba));Ua.css("top",e);Va.height(a-g-1);pc=Rc.height()+1;Gb=aa("slotMinutes")/fb;ob=pc/Gb;c&&l()};this.beforeHide=function(){mb=Va.scrollTop()};this.afterShow=function(){Va.scrollTop(mb)};this.defaultEventEnd=function(a){var c=x(a.start);return a.allDay?c:n(c,aa("defaultEventMinutes"))};this.timePosition=G;this.getIsCellAllDay=B;this.allDayRow=function(a){return Ab};
this.getHoverListener=function(){return Aa};this.colLeft=function(a){return Ga.left(a)};this.colRight=function(a){return Ga.right(a)};this.colContentLeft=function(a){return La.left(a)};this.colContentRight=function(a){return La.right(a)};this.getDaySegmentContainer=function(){return za};this.getSlotSegmentContainer=function(){return Tb};this.getMinMinute=function(){return vb};this.getMaxMinute=function(){return wb};this.getSlotContainer=function(){return cb};this.getRowCnt=function(){return 1};this.getColCnt=
function(){return jb};this.getColWidth=function(){return Fb};this.getSnapHeight=function(){return ob};this.getSnapMinutes=function(){return fb};this.defaultSelectionEnd=function(a,c){return c?x(a):n(x(a),aa("slotMinutes"))};this.renderDayOverlay=r;this.renderSelection=function(a,c,e){e?aa("allDaySlot")&&r(a,t(x(c),1),!0):H(a,c)};this.clearSelection=E;this.reportDayClick=Q;this.dragStart=function(a,c,e){Aa.start(function(a){Y();if(a)if(B(a))w(a.row,a.col,a.row,a.col);else{a=C(a);var c=n(x(a),aa("defaultEventMinutes"));
z(a,c)}},c)};this.dragStop=function(a,c,e){var f=Aa.stop();Y();f&&V("drop",a,C(f),B(f),c,e)};qa.call(this,c,e,g);Ea.call(this);U.call(this);la.call(this);var aa=this.opt,V=this.trigger,S=this.clearEvents,W=this.renderOverlay,Y=this.clearOverlays,Z=this.reportSelection,X=this.unselect,ta=this.daySelectionMousedown,ma=this.slotSegHtml,ka=this.cellToDate,ja=this.dateToCell,ia=this.rangeToSegments,xa=e.formatDate,Da,ga,na,eb,Ja,Za,oa,Ba,Ca,Ua,za,bb,Ab,Va,cb,Tb,Bb,Rc,db,nc,nb,Fb,oc,pc,fb,Gb,ob,jb,Hb,kb,
Aa,Ga,La,Ra={},mb,ub,Vc,vb,wb,sc,tc,Lb,uc;wa(c.addClass("fc-agenda"));kb=new Wa(function(c,e){var f,g,h;na.each(function(c,l){f=a(l);g=f.offset().left;c&&(h[1]=g);h=[g];e[c]=h});h[1]=g+f.outerWidth();aa("allDaySlot")&&(f=Ab,g=f.offset().top,c[0]=[g,g+f.outerHeight()]);for(var l=cb.offset().top,n=Va.offset().top,p=n+Va.outerHeight(),r=0;r<Hb*Gb;r++)c.push([Math.max(n,Math.min(p,l+ob*r)),Math.max(n,Math.min(p,l+ob*(r+1)))])});Aa=new $a(kb);Ga=new Na(function(a){return Za.eq(a)});La=new Na(function(a){return oa.eq(a)})}
function la(){function c(a){return a.end?x(a.end):n(x(a.start),p("defaultEventMinutes"))}function e(a,c){var f="<",g=a.url,h=ta(a,p),l=["fc-event","fc-event-vert"];z(a)&&l.push("fc-event-draggable");c.isStart&&l.push("fc-event-start");c.isEnd&&l.push("fc-event-end");l=l.concat(a.className);a.source&&(l=l.concat(a.source.className||[]));f=g?f+("a href='"+pa(a.url)+"'"):f+"div";f+=" class='"+l.join(" ")+"' style='position:absolute;z-index:8;top:"+c.top+"px;left:"+c.left+"px;"+h+"'><div class='fc-event-inner'><div class='fc-event-time'>"+
pa(qa(a.start,a.end,p("timeFormat")))+"</div><div class='fc-event-title'>"+pa(a.title)+"</div></div><div class='fc-event-bg'></div>";c.isEnd&&B(a)&&(f+="<div class='ui-resizable-handle ui-resizable-s'>=</div>");return f+("</"+(g?"a":"div")+">")}function g(a,c,e){var f=c.find("div.fc-event-time");z(a)&&h(a,c,f);e.isEnd&&B(a)&&l(a,c,f);H(a,c)}function h(a,c,e){function f(c){var g=n(x(a.start),c),h;a.end&&(h=n(x(a.end),c));e.text(qa(g,h,p("timeFormat")))}function g(){A&&(e.css("display",""),c.draggable("option",
"grid",[I,F]),A=!1)}var l,A=!1,z,B,C,L=aa(),M=ja(),I=ma(),F=oa(),H=la();c.draggable({zIndex:9,scroll:!1,grid:[I,F],axis:1==M?"y":!1,opacity:p("dragOpacity"),revertDuration:p("dragRevertDuration"),start:function(f,h){r("eventDragStart",c,a,f,h);na(a,c);l=c.position();B=C=0;L.start(function(f,h){c.draggable("option","revert",!f);ia();if(f){h=X(0,h.col);var l=X(0,f.col);z=w(l,h);p("allDaySlot")&&!f.row?(A||(A=!0,e.hide(),c.draggable("option","grid",null)),Za(t(x(a.start),z),t(G(a),z))):g()}},f,"drag")},
drag:function(a,c){B=Math.round((c.position.top-l.top)/F)*H;B!=C&&(A||f(B),C=B)},stop:function(e,h){var n=L.stop();ia();r("eventDragStop",c,a,e,h);n&&(z||B||A)?eb(this,a,z,A?0:B,A,e,h):(g(),c.css("filter",""),c.css(l),f(0),ga(a,c))}})}function l(a,c,e){var f,g,h=oa(),t=la();c.resizable({handles:{s:".ui-resizable-handle"},grid:h,start:function(e,h){f=g=0;na(a,c);c.css("z-index",9);r("eventResizeStart",this,a,e,h)},resize:function(l,r){f=Math.round((Math.max(h,c.height())-r.originalSize.height)/h);
f!=g&&(e.text(qa(a.start,f||a.end?n(C(a),t*f):null,p("timeFormat"))),g=f)},stop:function(e,g){r("eventResizeStop",this,a,e,g);f?Ja(this,a,0,t*f,e,g):(c.css("z-index",8),ga(a,c))}})}this.renderEvents=function(h,l){I(h);var t,w=h.length,z=[],B=[];for(t=0;t<w;t++)h[t].allDay?z.push(h[t]):B.push(h[t]);p("allDaySlot")&&(sa(z,l),K());t=ja();var w=S(),z=Q(),C,G=a.map(B,c),ga,F,H,O,J;h=[];for(ga=0;ga<t;ga++){C=X(0,ga);n(C,w);F=B;H=G;O=C;C=n(x(C),z-w);J=[];var na,ra=F.length,aa,Ia,Ta,Ja,Y;for(na=0;na<ra;na++)aa=
F[na],Ia=aa.start,Ta=H[na],Ta>O&&Ia<C&&(Ia<O?(Ia=x(O),Ja=!1):Ja=!0,Ta>C?(Ta=x(C),Y=!1):Y=!0,J.push({event:aa,start:Ia,end:Ta,isStart:Ja,isEnd:Y,msLength:Ta-Ia}));F=J.sort(ka);H=[];C=F.length;for(O=0;O<C;O++){J=F[O];for(na=0;;){ra=!1;if(H[na])for(aa=0;aa<H[na].length;aa++)if(Ia=H[na][aa],Ia.end>J.start&&Ia.start<J.end){ra=!0;break}if(ra)na++;else break}H[na]?H[na].push(J):H[na]=[J]}H=F=H;for(O=H.length-1;0<O;O--)for(na=H[O],C=0;C<na.length;C++)for(ra=na[C],J=0;J<H[O-1].length;J++)aa=H[O-1][J],ra.end>
aa.start&&ra.start<aa.end&&(aa.forward=Math.max(aa.forward||0,(ra.forward||0)+1));for(H=0;H<F.length;H++)for(O=F[H],C=0;C<O.length;C++)J=O[C],J.col=ga,J.level=H,h.push(J)}t=h.length;H="";G=E();C=(O=p("isRTL"))?-1:1;for(B=0;B<t;B++)w=h[B],z=w.event,ga=W(w.start,w.start),F=W(w.start,w.end),aa=w.col,J=w.level,na=w.forward||0,ra=U(aa),Ia=Z(aa)-ra,Ia=Math.min(Ia-6,.95*Ia),aa=J?Ia/(J+na+1):na?2*(Ia/(na+1)-6):Ia,J=ra+Ia/(J+na+1)*J*C+(O?Ia-aa:0),w.top=ga,w.left=J,w.outerWidth=aa,w.outerHeight=F-ga,H+=e(z,
w);G[0].innerHTML=H;F=G.children();for(B=0;B<t;B++)w=h[B],z=w.event,ga=a(F[B]),H=r("eventRender",z,z,ga),!1===H?ga.remove():(H&&!0!==H&&(ga.remove(),ga=a(H).css({position:"absolute",top:w.top,left:w.left}).appendTo(G)),w.element=ga,z._id===l?g(z,ga,w):ga[0]._fci=B,Da(z,ga));T(G,h,g);for(B=0;B<t;B++)if(w=h[B],ga=w.element)w.vsides=ha(ga,!0),w.hsides=V(ga,!0),l=ga.find(".fc-event-title"),l.length&&(w.contentTop=l[0].offsetTop);for(B=0;B<t;B++)if(w=h[B],ga=w.element)ga[0].style.width=Math.max(0,w.outerWidth-
w.hsides)+"px",l=Math.max(0,w.outerHeight-w.vsides),ga[0].style.height=l+"px",z=w.event,w.contentTop!==f&&10>l-w.contentTop&&(ga.find("div.fc-event-time").text(Ua(z.start,p("timeFormat"))+" - "+z.title),ga.find("div.fc-event-title").remove()),r("eventAfterRender",z,z,ga);r("eventAfterAllRender")};this.clearEvents=function(){F();J().empty();E().empty()};this.slotSegHtml=e;Y.call(this);var p=this.opt,r=this.trigger,z=this.isEventDraggable,B=this.isEventResizable,C=this.eventEnd,I=this.reportEvents,
F=this.reportEventClear,H=this.eventElementHandlers,K=this.setHeight,J=this.getDaySegmentContainer,E=this.getSlotSegmentContainer,aa=this.getHoverListener,Q=this.getMaxMinute,S=this.getMinMinute,W=this.timePosition,U=this.colContentLeft,Z=this.colContentRight,X=this.cellToDate,ka=this.segmentCompare,ja=this.getColCnt,ma=this.getColWidth,oa=this.getSnapHeight,la=this.getSnapMinutes,xa=this.getSlotContainer,Da=this.reportEventElement,ga=this.showEvents,na=this.hideEvents,eb=this.eventDrop,Ja=this.eventResize,
Za=this.renderDayOverlay,ia=this.clearOverlays,sa=this.renderDayEvents,wa=this.calendar,Ua=wa.formatDate,qa=wa.formatDates;this.draggableDayEvent=function(a,c,e){function f(){n||(c.width(h).height("").draggable("option","grid",null),n=!0)}var g=e.isStart,h,l,n=!0,A,z=aa(),B=ma(),C=oa(),L=la(),M=S();c.draggable({zIndex:9,opacity:p("dragOpacity","month"),revertDuration:p("dragRevertDuration"),start:function(e,M){r("eventDragStart",c,a,e,M);na(a,c);h=c.width();z.start(function(e,h){ia();if(e){l=!1;h=
X(0,h.col);var r=X(0,e.col);A=w(r,h);e.row?g?n&&(c.width(B-10),ba(c,C*Math.round((a.end?(a.end-a.start)/6E4:p("defaultEventMinutes"))/L)),c.draggable("option","grid",[B,1]),n=!1):l=!0:(Za(t(x(a.start),A),t(G(a),A)),f());l=l||n&&!A}else f(),l=!0;c.draggable("option","revert",l)},e,"drag")},stop:function(e,g){z.stop();ia();r("eventDragStop",c,a,e,g);if(l)f(),c.css("filter",""),ga(a,c);else{var h=0;n||(h=Math.round((c.offset().top-xa().offset().top)/C)*L+M-(60*a.start.getHours()+a.start.getMinutes()));
eb(this,a,A,h,n,e,g)}}})}}function qa(c,e,g){function h(c,e){c=U[c];return a.isPlainObject(c)?oa(c,e||g):c}function l(a,c){return e.trigger.apply(e,[a,c||E].concat(Array.prototype.slice.call(arguments,2),[E]))}function p(a){return ka(a.editable,(a.source||{}).editable,h("editable"))}function r(a){return a.end?x(a.end):T(a)}function z(a,c,e){a=X[a._id];var f,g=a.length;for(f=0;f<g;f++)if(!c||a[f][0]!=c[0])a[f][e]()}function B(a,c,e,g){e=e||0;for(var h,l=a.length,p=0;p<l;p++)h=a[p],g!==f&&(h.allDay=
g),n(t(h.start,c,!0),e),h.end&&(h.end=n(t(h.end,c,!0),e)),Q(h,U)}function C(a,c,e){e=e||0;for(var f,g=a.length,h=0;h<g;h++)f=a[h],f.end=n(t(r(f),c,!0),e),Q(f,U)}function G(a,c){var e=E.getColCnt(),f=ia?-1:1,g=ia?e-1:0;"object"==typeof a&&(c=a.col,a=a.row);return a*e+(c*f+g)}function I(a){var c=E.visStart.getDay();a+=ha[c];return 7*Math.floor(a/Z)+ja[(a%Z+Z)%Z]-c}function H(a){var c=x(E.visStart);t(c,a);return c}function F(a){return w(a,E.visStart)}function J(a){var c=E.visStart.getDay();a+=c;return Math.floor(a/
7)*Z+ha[(a%7+7)%7]-ha[c]}function K(a){var c=E.getColCnt();return{row:Math.floor(a/c),col:(a%c+c)%c*(ia?-1:1)+(ia?c-1:0)}}var E=this;E.element=c;E.calendar=e;E.name=g;E.opt=h;E.trigger=l;E.isEventDraggable=function(a){return p(a)&&!h("disableDragging")};E.isEventResizable=function(a){return p(a)&&!h("disableResizing")};E.reportEvents=function(a){S={};var c,e=a.length,f;for(c=0;c<e;c++)f=a[c],S[f._id]?S[f._id].push(f):S[f._id]=[f]};E.eventEnd=r;E.reportEventElement=function(a,c){W.push(c);X[a._id]?
X[a._id].push(c):X[a._id]=[c]};E.reportEventClear=function(){W=[];X={}};E.eventElementHandlers=function(a,c){c.click(function(e){if(!c.hasClass("ui-draggable-dragging")&&!c.hasClass("ui-resizable-resizing"))return l("eventClick",this,a,e)}).hover(function(c){l("eventMouseover",this,a,c)},function(c){l("eventMouseout",this,a,c)})};E.showEvents=function(a,c){z(a,c,"show")};E.hideEvents=function(a,c){z(a,c,"hide")};E.eventDrop=function(a,c,e,f,g,h,n){var p=c.allDay,r=c._id;B(S[r],e,f,g);l("eventDrop",
a,c,e,f,g,function(){B(S[r],-e,-f,p);V(r)},h,n);V(r)};E.eventResize=function(a,c,e,f,g,h){var n=c._id;C(S[n],e,f);l("eventResize",a,c,e,f,function(){C(S[n],-e,-f);V(n)},g,h);V(n)};var T=E.defaultEventEnd,Q=e.normalizeEvent,V=e.reportEventChange,S={},W=[],X={},U=e.options;E.isHiddenDay=function(a){"object"==typeof a&&(a=a.getDay());return ba[a]};E.skipHiddenDays=function(a,c,e){for(c=c||1;ba[(a.getDay()+(e?c:0)+7)%7];)t(a,c)};E.getCellsPerWeek=function(){return Z};E.dateToCell=function(a){a=F(a);a=
J(a);return K(a)};E.dateToDayOffset=F;E.dayOffsetToCellOffset=J;E.cellOffsetToCell=K;E.cellToDate=function(){var a=G.apply(null,arguments),a=I(a);return H(a)};E.cellToCellOffset=G;E.cellOffsetToDayOffset=I;E.dayOffsetToDate=H;E.rangeToSegments=function(a,c){var e=E.getRowCnt(),f=E.getColCnt(),g=[];a=F(a);c=F(c);for(var h=J(a),l=J(c)-1,n=0;n<e;n++){var p=n*f,r=Math.max(h,p),p=Math.min(l,p+f-1);if(r<=p){var t=K(r),w=K(p),t=[t.col,w.col].sort(),r=I(r)==a,p=I(p)+1==c;g.push({row:n,leftCol:t[0],rightCol:t[1],
isStart:r,isEnd:p})}}return g};E.segmentCompare=function(a,c){var e;e="msLength"in a?c.msLength-a.msLength:c.rightCol-c.leftCol-(a.rightCol-a.leftCol)||c.event.allDay-a.event.allDay;return e||a.event.start-c.event.start||(a.event.title||"").localeCompare(c.event.title)};var Y=h("hiddenDays")||[],ba=[],Z,ha=[],ja=[],ia=h("isRTL");(function(){!1===h("weekends")&&Y.push(0,6);for(var c=0,e=0;7>c;c++)ha[c]=e,ba[c]=-1!=a.inArray(c,Y),ba[c]||(ja[e]=c,e++);Z=e;if(!Z)throw"invalid hiddenDays";})()}function Y(){function c(a,
f,g){a=e([a],!0,!1);var h=[];E(a,function(a,c){a.row===f&&c.css("top",g);h.push(c[0])});return h}function e(c,p,r){var t=ga(),w=p?a("<div/>"):t;c=f(c);var A;g(c);A=h(c);w[0].innerHTML=A;w=w.children();p&&t.append(w);l(c,w);E(c,function(a,c){a.hsides=V(c,!0)});E(c,function(a,c){c.width(Math.max(0,a.outerWidth-a.hsides))});E(c,function(a,c){a.outerHeight=c.outerHeight(!0)});n(c,r);return c}function f(a){for(var c=[],e=0;e<a.length;e++){for(var g=a[e],h=g.start,l=G(g),h=Aa(h,l),l=0;l<h.length;l++)h[l].event=
g;c.push.apply(c,h)}return c}function g(a){for(var c=I("isRTL"),e=0;e<a.length;e++){var f=a[e],h=(c?f.isStart:f.isEnd)?oa:ja,l=((c?f.isEnd:f.isStart)?ka:ia)(f.leftCol),h=h(f.rightCol);f.left=l;f.outerWidth=h-l}}function h(a){for(var c="",e=0;e<a.length;e++){var f=a[e],g="",l=I("isRTL"),n=f.event,p=n.url,r=["fc-event","fc-event-hori"];F(n)&&r.push("fc-event-draggable");f.isStart&&r.push("fc-event-start");f.isEnd&&r.push("fc-event-end");r=r.concat(n.className);n.source&&(r=r.concat(n.source.className||
[]));var t=ta(n,I),g=p?g+("<a href='"+pa(p)+"'"):g+"<div",g=g+(" class='"+r.join(" ")+"' style='position:absolute;z-index:8;left:"+f.left+"px;"+t+"'><div class='fc-event-inner'>");!n.allDay&&f.isStart&&(g+="<span class='fc-event-time'>"+pa(na(n.start,n.end,I("timeFormat")))+"</span>");g+="<span class='fc-event-title'>"+pa(n.title)+"</span></div>";f.isEnd&&J(n)&&(g+="<div class='ui-resizable-handle ui-resizable-"+(l?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>");c+=g+("</"+(p?"a":"div")+">")}return c}function l(c,
e){for(var f=0;f<c.length;f++){var g=c[f],h=g.event,n=e.eq(f),h=H("eventRender",h,h,n);!1===h?n.remove():(h&&!0!==h&&(h=a(h).css({position:"absolute",zIndex:8,left:g.left}),n.replaceWith(h),n=h),g.element=n)}}function n(a,c){var e=p(a),f=r(),g=[];if(c)for(c=0;c<f.length;c++)f[c].height(e[c]);for(c=0;c<f.length;c++)g.push(f[c].position().top);E(a,function(a,c){c.css("top",g[a.row]+a.top)})}function p(a){var c=Z(),e=ba(),f=[],g=Z(),h=[],l,n,r;for(l=0;l<a.length;l++)n=a[l],r=n.row,n.element&&(h[r]?h[r].push(n):
h[r]=[n]);for(r=0;r<g;r++){a=r;var t=h[r]||[];l=[];t.sort(Ba);n=[];for(var w=0;w<t.length;w++){for(var A=t[w],z=0;z<n.length;z++){var x;a:{x=n[z];for(var C=0;C<x.length;C++){var B=x[C];if(B.leftCol<=A.rightCol&&B.rightCol>=A.leftCol){x=!0;break a}}x=!1}if(!x)break}n[z]?n[z].push(A):n[z]=[A]}for(t=0;t<n.length;t++)l.push.apply(l,n[t]);h[a]=l}for(g=0;g<c;g++){r=h[g];a=[];for(l=0;l<e;l++)a.push(0);for(n=0;n<r.length;n++)for(t=r[n],t.top=Math.max.apply(Math,a.slice(t.leftCol,t.rightCol+1)),l=t.leftCol;l<=
t.rightCol;l++)a[l]=t.top+t.outerHeight;f.push(Math.max.apply(Math,a))}return f}function r(){var a,c=Z(),e=[];for(a=0;a<c;a++)e[a]=ha(a).find("div.fc-day-content > div");return e}function z(a,c){var e=ga();E(a,function(a,e,f){var g=a.event;g._id===c?B(g,e,a):e[0]._fci=f});T(e,a,B)}function B(a,c,e){F(a)&&C.draggableDayEvent(a,c,e);e.isEnd&&J(a)&&C.resizableDayEvent(a,c,e);S(a,c)}var C=this;C.renderDayEvents=function(a,c){a=e(a,!1,!0);E(a,function(a,c){Q(a.event,c)});z(a,c);E(a,function(a,c){H("eventAfterRender",
a.event,a.event,c)})};C.draggableDayEvent=function(a,c){var e=qa(),f;c.draggable({zIndex:9,delay:50,opacity:I("dragOpacity"),revertDuration:I("dragRevertDuration"),start:function(g,h){H("eventDragStart",c,a,g,h);U(a,c);e.start(function(e,g,h,l){c.draggable("option","revert",!e||!h&&!l);la();e?(g=za(g),e=za(e),f=w(e,g),ma(t(x(a.start),f),t(G(a),f))):f=0},g,"drag")},stop:function(g,h){e.stop();la();H("eventDragStop",c,a,g,h);f?Y(this,a,f,0,a.allDay,g,h):(c.css("filter",""),W(a,c))}})};C.resizableDayEvent=
function(e,f,g){var h=I("isRTL")?"w":"e",l=f.find(".ui-resizable-"+h),n=!1;wa(f);f.mousedown(function(a){a.preventDefault()}).click(function(a){n&&(a.preventDefault(),a.stopImmediatePropagation())});l.mousedown(function(l){function p(c){H("eventResizeStop",this,e,c);a("body").css("cursor","");r.stop();la();z&&X(this,e,z,0,c);setTimeout(function(){n=!1},0)}if(1==l.which){n=!0;var r=qa();Z();ba();var w=f.css("top"),z,x,C=a.extend({},e),B=Ga(Fa(e.start));sa();a("body").css("cursor",h+"-resize").one("mouseup",
p);H("eventResizeStart",this,e,l);r.start(function(f,l){f&&(l=Ca(l),f=Ca(f),f=Math.max(f,B),(z=Ea(f)-Ea(l))?(C.end=t(K(e),z,!0),f=x,x=c(C,g.row,w),x=a(x),x.find("*").css("cursor",h+"-resize"),f&&f.remove(),U(e)):x&&(W(e),x.remove(),x=null),la(),ma(e.start,t(G(e),z)))},l)}})};var I=C.opt,H=C.trigger,F=C.isEventDraggable,J=C.isEventResizable,K=C.eventEnd,Q=C.reportEventElement,S=C.eventElementHandlers,W=C.showEvents,U=C.hideEvents,Y=C.eventDrop,X=C.eventResize,Z=C.getRowCnt,ba=C.getColCnt,ha=C.allDayRow,
ia=C.colLeft,ja=C.colRight,ka=C.colContentLeft,oa=C.colContentRight,ga=C.getDaySegmentContainer,na=C.calendar.formatDates,ma=C.renderDayOverlay,la=C.clearOverlays,sa=C.clearSelection,qa=C.getHoverListener,Aa=C.rangeToSegments,Ba=C.segmentCompare,za=C.cellToDate,Ca=C.cellToCellOffset,Ea=C.cellOffsetToDayOffset,Fa=C.dateToDayOffset,Ga=C.dayOffsetToCellOffset}function E(a,c){for(var e=0;e<a.length;e++){var f=a[e],g=f.element;g&&c(f,g,e)}}function U(){function c(a){r&&(r=!1,p(),h("unselect",null,a))}
function e(a,c,f,g){r=!0;h("select",null,a,c,f,g)}var f=this;f.select=function(a,f,g){c();f||(f=l(a,g));n(a,f,g);e(a,f,g)};f.unselect=c;f.reportSelection=e;f.daySelectionMousedown=function(h){var l=f.cellToDate,r=f.getIsCellAllDay,t=f.getHoverListener(),w=f.reportDayClick;if(1==h.which&&g("selectable")){c(h);var x;t.start(function(a,c){p();a&&r(a)?(x=[l(c),l(a)].sort(sa),n(x[0],x[1],!0)):x=null},h);a(document).one("mouseup",function(a){t.stop();x&&(+x[0]==+x[1]&&w(x[0],!0,a),e(x[0],x[1],!0,a))})}};
var g=f.opt,h=f.trigger,l=f.defaultSelectionEnd,n=f.renderSelection,p=f.clearSelection,r=!1;g("selectable")&&g("unselectAuto")&&a(document).mousedown(function(e){var f=g("unselectCancel");f&&a(e.target).parents(f).length||c(e)})}function Ea(){this.renderOverlay=function(f,g){var h=e.shift();h||(h=a("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>"));h[0].parentNode!=g[0]&&h.appendTo(g);c.push(h.css(f).show());return h};this.clearOverlays=function(){for(var a;a=c.shift();)e.push(a.hide().unbind())};
var c=[],e=[]}function Wa(a){var c,e;this.build=function(){c=[];e=[];a(c,e)};this.cell=function(a,f){var g=c.length,h=e.length,l,n=-1,p=-1;for(l=0;l<g;l++)if(f>=c[l][0]&&f<c[l][1]){n=l;break}for(l=0;l<h;l++)if(a>=e[l][0]&&a<e[l][1]){p=l;break}return 0<=n&&0<=p?{row:n,col:p}:null};this.rect=function(a,f,g,h,l){l=l.offset();return{top:c[a][0]-l.top,left:e[f][0]-l.left,width:e[h][1]-e[f][0],height:c[g][1]-c[a][0]}}}function $a(c){function e(a){a.pageX===f&&(a.pageX=a.originalEvent.pageX,a.pageY=a.originalEvent.pageY);
a=c.cell(a.pageX,a.pageY);if(!a!=!n||a&&(a.row!=n.row||a.col!=n.col))a?(l||(l=a),h(a,l,a.row-l.row,a.col-l.col)):h(a,l),n=a}var g,h,l,n;this.start=function(f,p,r){h=f;l=n=null;c.build();e(p);g=r||"mousemove";a(document).bind(g,e)};this.stop=function(){a(document).unbind(g,e);return n}}function Na(a){var c=this,e={},g={},h={};c.left=function(c){return g[c]=g[c]===f?(e[c]=e[c]||a(c)).position().left:g[c]};c.right=function(g){return h[g]=h[g]===f?c.left(g)+(e[g]=e[g]||a(g)).width():h[g]};c.clear=function(){e=
{};g={};h={}}}var S={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"iso",weekNumberTitle:"W",allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:"January February March April May June July August September October November December".split(" "),
monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),buttonText:{prev:"<span class='fc-text-arrow'>&lsaquo;</span>",next:"<span class='fc-text-arrow'>&rsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&laquo;</span>",nextYear:"<span class='fc-text-arrow'>&raquo;</span>",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",
next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*"},Aa={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"<span class='fc-text-arrow'>&rsaquo;</span>",next:"<span class='fc-text-arrow'>&lsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&raquo;</span>",nextYear:"<span class='fc-text-arrow'>&laquo;</span>"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},Ba=a.fullCalendar={version:"1.6.2"},Ca=Ba.views={};a.fn.fullCalendar=function(c){if("string"==typeof c){var e=
Array.prototype.slice.call(arguments,1),h;this.each(function(){var g=a.data(this,"fullCalendar");g&&a.isFunction(g[c])&&(g=g[c].apply(g,e),h===f&&(h=g),"destroy"==c&&a.removeData(this,"fullCalendar"))});return h!==f?h:this}var l=c.eventSources||[];delete c.eventSources;c.events&&(l.push(c.events),delete c.events);c=a.extend(!0,{},S,c.isRTL||c.isRTL===f&&S.isRTL?Aa:{},c);this.each(function(e,f){e=a(f);f=new g(e,c,l);e.data("fullCalendar",f);f.render()});return this};Ba.sourceNormalizers=[];Ba.sourceFetchers=
[];var ia={dataType:"json",cache:!1},La=1;Ba.addDays=t;Ba.cloneDate=x;Ba.parseDate=B;Ba.parseISO8601=z;Ba.parseTime=J;Ba.formatDate=p;Ba.formatDates=H;var Qa="sun mon tue wed thu fri sat".split(" "),mb=36E5,Ra={s:function(a){return a.getSeconds()},ss:function(a){return za(a.getSeconds())},m:function(a){return a.getMinutes()},mm:function(a){return za(a.getMinutes())},h:function(a){return a.getHours()%12||12},hh:function(a){return za(a.getHours()%12||12)},H:function(a){return a.getHours()},HH:function(a){return za(a.getHours())},
d:function(a){return a.getDate()},dd:function(a){return za(a.getDate())},ddd:function(a,c){return c.dayNamesShort[a.getDay()]},dddd:function(a,c){return c.dayNames[a.getDay()]},M:function(a){return a.getMonth()+1},MM:function(a){return za(a.getMonth()+1)},MMM:function(a,c){return c.monthNamesShort[a.getMonth()]},MMMM:function(a,c){return c.monthNames[a.getMonth()]},yy:function(a){return(a.getFullYear()+"").substring(2)},yyyy:function(a){return a.getFullYear()},t:function(a){return 12>a.getHours()?
"a":"p"},tt:function(a){return 12>a.getHours()?"am":"pm"},T:function(a){return 12>a.getHours()?"A":"P"},TT:function(a){return 12>a.getHours()?"AM":"PM"},u:function(a){return p(a,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(a){a=a.getDate();return 10<a&&20>a?"th":["st","nd","rd"][a%10-1]||"th"},w:function(a,c){return c.weekNumberCalculation(a)},W:function(a){var c=new Date(a.getTime());c.setDate(c.getDate()+4-(c.getDay()||7));a=c.getTime();c.setMonth(0);c.setDate(1);return Math.floor(Math.round((a-c)/864E5)/
7)+1}};Ba.dateFormatters=Ra;Ba.applyAll=ma;Ca.month=function(a,c){var e=this;e.render=function(a,c){c&&(l(a,c),a.setDate(1));var r=f("firstDay");a=x(a,!0);a.setDate(1);c=l(x(a),1);var z=x(a);t(z,-((z.getDay()-r+7)%7));h(z);var C=x(c);t(C,(7-C.getDay()+r)%7);h(C,-1,!0);var r=n(),B=Math.round(w(C,z)/7);"fixed"==f("weekMode")&&(t(C,7*(6-B)),B=6);e.title=p(a,f("titleFormat"));e.start=a;e.end=c;e.visStart=z;e.visEnd=C;g(B,r,!0)};Z.call(e,a,c,"month");var f=e.opt,g=e.renderBasic,h=e.skipHiddenDays,n=e.getCellsPerWeek,
p=c.formatDate};Ca.basicWeek=function(a,c){var e=this;e.render=function(a,c){c&&t(a,7*c);a=t(x(a),-((a.getDay()-f("firstDay")+7)%7));c=t(x(a),7);var p=x(a);h(p);var r=x(c);h(r,-1,!0);var w=l();e.start=a;e.end=c;e.visStart=p;e.visEnd=r;e.title=n(p,t(x(r),-1),f("titleFormat"));g(1,w,!1)};Z.call(e,a,c,"basicWeek");var f=e.opt,g=e.renderBasic,h=e.skipHiddenDays,l=e.getCellsPerWeek,n=c.formatDates};Ca.basicDay=function(a,c){var e=this;e.render=function(a,c){c&&t(a,c);h(a,0>c?-1:1);c=x(a,!0);var n=t(x(c),
1);e.title=l(a,f("titleFormat"));e.start=e.visStart=c;e.end=e.visEnd=n;g(1,1,!1)};Z.call(e,a,c,"basicDay");var f=e.opt,g=e.renderBasic,h=e.skipHiddenDays,l=c.formatDate};a.extend(!0,S,{weekMode:"fixed"});Ca.agendaWeek=function(a,c){var e=this;e.render=function(a,c){c&&t(a,7*c);a=t(x(a),-((a.getDay()-f("firstDay")+7)%7));c=t(x(a),7);var p=x(a);h(p);var r=x(c);h(r,-1,!0);var w=l();e.title=n(p,t(x(r),-1),f("titleFormat"));e.start=a;e.end=c;e.visStart=p;e.visEnd=r;g(w)};Ga.call(e,a,c,"agendaWeek");var f=
e.opt,g=e.renderAgenda,h=e.skipHiddenDays,l=e.getCellsPerWeek,n=c.formatDates};Ca.agendaDay=function(a,c){var e=this;e.render=function(a,c){c&&t(a,c);h(a,0>c?-1:1);c=x(a,!0);var n=t(x(c),1);e.title=l(a,f("titleFormat"));e.start=e.visStart=c;e.end=e.visEnd=n;g(1)};Ga.call(e,a,c,"agendaDay");var f=e.opt,g=e.renderAgenda,h=e.skipHiddenDays,l=c.formatDate};a.extend(!0,S,{allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},
dragOpacity:{agenda:.5},minTime:0,maxTime:24})})(jQuery);
(function(a,f,g){function h(){var a=this;a.id=null;a.busy=!1;a.start=function(e,c){a.busy||(a.stop(),a.id=setTimeout(function(){e();a.id=null;a.busy=!1},c),a.busy=!0)};a.stop=function(){null!=a.id&&(clearTimeout(a.id),a.id=null,a.busy=!1)}}function e(e,g,c){var n=this;n.id=c;n.table=e;n.options=g;n.breakpoints=[];n.breakpointNames="";n.columns={};var r=n.options,x=r.classes,F=0;n.timers={resize:new h,register:function(a){n.timers[a]=new h;return n.timers[a]}};f.footable.plugins.init(n);n.init=function(){var c=
a(f),e=a(n.table);if(e.hasClass(x.loaded))n.raise("footable_already_initialized");else{e.addClass(x.loading);e.find("> thead > tr:last-child > th, > thead > tr:last-child > td").each(function(){var c=n.getColumnData(this);n.columns[c.index]=c;if(null!=c.className){var f="",g=!0;a.each(c.matches,function(a,c){g||(f+=", ");f+="> tbody > tr:not(.footable-row-detail) > td:nth-child("+(parseInt(c)+1)+")";g=!1});e.find(f).not(".footable-cell-detail").addClass(c.className)}});for(var g in r.breakpoints)n.breakpoints.push({name:g,
width:r.breakpoints[g]}),n.breakpointNames+=g+" ";n.breakpoints.sort(function(a,c){return a.width-c.width});n.bindToggleSelectors();n.raise("footable_initializing");e.bind("footable_initialized",function(){n.resize();e.removeClass(x.loading);e.find('[data-init="hide"]').hide();e.find('[data-init="show"]').show();e.addClass(x.loaded)});e.bind("footable_resize",function(){n.resize()});c.unbind("resize.footable");c.bind("resize.footable",function(){n.timers.resize.stop();n.timers.resize.start(function(){window.tables?
_.each(window.tables,function(c){a("#"+c)[0]&&a("#"+c)[0].footable&&a("#"+c).is(":visible")&&a("#"+c)[0].footable.resize()}):n.resize()},r.delay)});n.raise("footable_initialized")}};n.bindToggleSelectors=function(){var c=a(n.table);c.find(r.toggleSelector).unbind("click.footable").bind("click.footable",function(e){c.is(".breakpoint")&&a(e.target).is("td")&&(e=a(this).is("tr")?a(this):a(this).parents("tr:first"),n.toggleDetail(e.get(0)))})};n.parse=function(a,c){return(r.parsers[c.type]||r.parsers.alpha)(a)};
n.getColumnData=function(c){var e=a(c),f=e.data("hide"),g=e.index(),f=(f||"").split(","),g={index:g,hide:{},type:e.data("type")||"alpha",name:e.data("name")||a.trim(e.text()),ignore:e.data("ignore")||!1,className:e.data("class")||null,matches:[],names:{},group:e.data("group")||null,groupName:null};if(null!=g.group){var h=a(n.table).find('> thead > tr.footable-group-row > th[data-group="'+g.group+'"], > thead > tr.footable-group-row > td[data-group="'+g.group+'"]').first();g.groupName=n.parse(h,{type:"alpha"})}h=
parseInt(e.prev().attr("colspan")||0);F+=1<h?h-1:0;var h=parseInt(e.attr("colspan")||0),l=g.index+F;if(1<h)for(var t=e.data("names"),t=(t||"").split(","),x=0;x<h;x++)g.matches.push(x+l),x<t.length&&(g.names[x+l]=t[x]);else g.matches.push(l);g.hide["default"]="all"===e.data("hide")||0<=a.inArray("default",f);for(var T in r.breakpoints)g.hide[T]="all"===e.data("hide")||0<=a.inArray(T,f);return n.raise("footable_column_data",{column:{data:g,th:c}}).column.data};n.getViewportWidth=function(){return window.innerWidth||
(document.body?document.body.offsetWidth:0)};n.getViewportHeight=function(){return window.innerHeight||(document.body?document.body.offsetHeight:0)};n.calculateWidthAndHeight=function(a,c){if(jQuery.isFunction(r.calculateWidthAndHeightOverride))return r.calculateWidthAndHeightOverride(a,c);c.viewportWidth<c.width&&(c.width=c.viewportWidth);c.viewportHeight<c.height&&(c.height=c.viewportHeight);return c};n.hasBreakpointColumn=function(a){for(var c in n.columns)if(n.columns[c].hide[a])return!0;return!1};
n.resize=function(){var c=a(n.table),e={width:c.width(),height:c.height(),viewportWidth:n.getViewportWidth(),viewportHeight:n.getViewportHeight(),orientation:null};e.orientation=e.viewportWidth>e.viewportHeight?"landscape":"portrait";var e=n.calculateWidthAndHeight(c,e),f=c.data("footable_info");c.data("footable_info",e);n.raise("footable_resizing",{old:f,info:e});for(var g=null,h,l=0;l<n.breakpoints.length;l++)if((h=n.breakpoints[l])&&h.width&&e.width<=h.width){g=h;break}var r=null==g?"default":
g.name,t=n.hasBreakpointColumn(r);c.removeClass("default breakpoint").removeClass(n.breakpointNames).addClass(r+(t?" breakpoint":"")).find("> thead > tr:last-child > th").each(function(){var e=n.columns[a(this).index()],f="",g=!0;a.each(e.matches,function(a,c){g||(f+=", ");a=c+1;f+="> tbody > tr:not(.footable-row-detail) > td:nth-child("+a+")";f+=", > tfoot > tr:not(.footable-row-detail) > td:nth-child("+a+")";f+=", > colgroup > col:nth-child("+a+")";g=!1});var f=f+(', > thead > tr[data-group-row="true"] > th[data-group="'+
e.group+'"]'),h=c.find(f).add(this);0==e.hide[r]?h.show():h.hide();if(1==c.find("> thead > tr.footable-group-row").length){var h=c.find('> thead > tr:last-child > th[data-group="'+e.group+'"]:visible, > thead > tr:last-child > th[data-group="'+e.group+'"]:visible'),e=c.find('> thead > tr.footable-group-row > th[data-group="'+e.group+'"], > thead > tr.footable-group-row > td[data-group="'+e.group+'"]'),l=0;a.each(h,function(){l+=parseInt(a(this).attr("colspan")||1)});0<l?e.attr("colspan",l).show():
e.hide()}}).end().find("> tbody > tr.footable-detail-show").each(function(){n.createOrUpdateDetailRow(this)});c.find("> tbody > tr.footable-detail-show:visible").each(function(){var c=a(this).next();c.hasClass("footable-row-detail")&&("default"!=r||t?c.show():c.hide())});c.find("> thead > tr > th.footable-last-column, > tbody > tr > td.footable-last-column").removeClass("footable-last-column");c.find("> thead > tr > th.footable-first-column, > tbody > tr > td.footable-first-column").removeClass("footable-first-column");
c.find("> thead > tr, > tbody > tr").find("> th:visible:last, > td:visible:last").addClass("footable-last-column").end().find("> th:visible:first, > td:visible:first").addClass("footable-first-column");n.raise("footable_breakpoint_"+r,{info:e});n.raise("footable_resized",{old:f,info:e})};n.toggleDetail=function(c){c=a(c);var e=n.createOrUpdateDetailRow(c.get(0)),f=c.next();!e&&f.is(":visible")?(c.removeClass("footable-detail-show"),f.hasClass("footable-row-detail")&&f.hide()):(c.addClass("footable-detail-show"),
f.show())};n.getColumnFromTdIndex=function(c){var e=null,f;for(f in n.columns)if(0<=a.inArray(c,n.columns[f].matches)){e=n.columns[f];break}return e};n.createOrUpdateDetailRow=function(c){var e=a(c),f=e.next(),g=[];if(e.is(":hidden"))return!1;e.find("> td:hidden").each(function(){var c=a(this).index(),e=n.getColumnFromTdIndex(c),f=e.name;if(1==e.ignore)return!0;c in e.names&&(f=e.names[c]);g.push({name:f,value:n.parse(this,e),display:a.trim(a(this).html()),group:e.group,groupName:e.groupName});return!0});
if(0==g.length)return!1;var h=e.find("> td:visible").length;c=f.hasClass("footable-row-detail");c||(f=a('<tr class="footable-row-detail"><td class="footable-cell-detail"><div class="footable-row-detail-inner"></div></td></tr>'),e.after(f));f.find("> td:first").attr("colspan",h);e=f.find(".footable-row-detail-inner").empty();r.createDetail(e,g);return!c};n.raise=function(c,e){e=e||{};var f={ft:n};a.extend(!0,f,e);c=a.Event(c,f);c.ft||a.extend(!0,c,f);a(n.table).trigger(c);return c};n.init();return n}
f.footable={options:{delay:100,breakpoints:{phone:480,tablet:1024},parsers:{alpha:function(e){return a(e).data("value")||a.trim(a(e).text())}},calculateWidthAndHeightOverride:null,toggleSelector:" > tbody > tr:not(.footable-row-detail)",createDetail:function(a,e){for(var c={_none:{name:null,data:[]}},f=0;f<e.length;f++){var g=e[f].group;null!=g?(g in c||(c[g]={name:e[f].groupName,data:[]}),c[g].data.push(e[f])):c._none.data.push(e[f])}for(var h in c)if(0!=c[h].data.length)for("_none"!=h&&a.append("<h4>"+
c[h].name+"</h4>"),e=0;e<c[h].data.length;e++)a.append("<div><strong>"+c[h].data[e].name+"</strong> : "+c[h].data[e].display+"</div>")},classes:{loading:"footable-loading",loaded:"footable-loaded",sorted:"footable-sorted",descending:"footable-sorted-desc",indicator:"footable-sort-indicator"},debug:!1},version:{major:0,minor:1,toString:function(){return f.footable.version.major+"."+f.footable.version.minor},parse:function(a){version=/(\d+)\.?(\d+)?\.?(\d+)?/.exec(a);return{major:parseInt(version[1])||
0,minor:parseInt(version[2])||0,patch:parseInt(version[3])||0}}},plugins:{_validate:function(e){if("string"!==typeof e.name)return 1==f.footable.options.debug&&console.error('Validation failed, plugin does not implement a string property called "name".',e),!1;if(!a.isFunction(e.init))return 1==f.footable.options.debug&&console.error('Validation failed, plugin "'+e.name+'" does not implement a function called "init".',e),!1;1==f.footable.options.debug&&console.log('Validation succeeded for plugin "'+
e.name+'".',e);return!0},registered:[],register:function(e,h){f.footable.plugins._validate(e)&&(f.footable.plugins.registered.push(e),h!=g&&"object"===typeof h&&a.extend(!0,f.footable.options,h),1==f.footable.options.debug&&console.log('Plugin "'+e.name+'" has been registered with the Foobox.',e))},init:function(a){for(var e=0;e<f.footable.plugins.registered.length;e++)try{f.footable.plugins.registered[e].init(a)}catch(c){1==f.footable.options.debug&&console.error(c)}}}};var r=0;a.fn.footable=function(g){g=
g||{};var h=a.extend(!0,{},f.footable.options,g);return this.each(function(){g.reuse||r++;this.footable=new e(this,h,r)})}})(jQuery,window);(function(a){var f=a.layout;f.callbacks||(f.callbacks={});f.callbacks.resizeTabLayout=function(f,h){(h.jquery?h:a(h.panel)).filter(":visible").find(".ui-layout-container:visible").andSelf().each(function(){var e=a(this).data("layout");e&&(e.options.resizeWithWindow=!1,e.resizeAll())})}})(jQuery);
(function(a){function f(f){this.input=f;"password"==f.attr("type")&&this.handlePassword();a(f[0].form).submit(function(){f.hasClass("placeholder")&&f[0].value==f.attr("placeholder")&&(f[0].value="")})}f.prototype={show:function(a){if(""===this.input[0].value||a&&this.valueIsPlaceholder()){if(this.isPassword)try{this.input[0].setAttribute("type","text")}catch(e){this.input.before(this.fakePassword.show()).hide()}this.input.addClass("placeholder");this.input[0].value=this.input.attr("placeholder")}},
hide:function(){if(this.valueIsPlaceholder()&&this.input.hasClass("placeholder")&&(this.input.removeClass("placeholder"),this.input[0].value="",this.isPassword)){try{this.input[0].setAttribute("type","password")}catch(a){}this.input.show();this.input[0].focus()}},valueIsPlaceholder:function(){return this.input[0].value==this.input.attr("placeholder")},handlePassword:function(){var f=this.input;f.attr("realType","password");this.isPassword=!0;if(a.browser.msie&&f[0].outerHTML){var e=a(f[0].outerHTML.replace(/type=(['"])?password\1/gi,
"type=$1text$1"));this.fakePassword=e.val(f.attr("placeholder")).addClass("placeholder").focus(function(){f.trigger("focus");a(this).hide()});a(f[0].form).submit(function(){e.remove();f.show()})}}};var g=!!("placeholder"in document.createElement("input"));a.fn.placeholder=function(){return g?this:this.each(function(){var g=a(this),e=new f(g);e.show(!0);g.focus(function(){e.hide()});g.blur(function(){e.show(!1)});a.browser.msie&&(a(window).load(function(){g.val()&&g.removeClass("placeholder");e.show(!0)}),
g.focus(function(){if(""==this.value){var a=this.createTextRange();a.collapse(!0);a.moveStart("character",0);a.select()}}))})}})(jQuery);
(function(){function a(){g&&(clearTimeout(g),g=0,f.classList.remove("flying-focus_visible"),h.classList.remove("flying-focus_target"),h=null)}var f=null,g=0,h=null,e=0,r=window,l=document,t=l.documentElement,c=l.body;t.addEventListener("keydown",function(a){a=a.which;if(9===a||36<a&&41>a)e=Date.now()},!1);t.addEventListener("focus",function(n){var I,x=n.target;if("flying-focus"!==x.id){var F=!1;f||(F=!0,f=l.createElement("flying-focus"),f.id="flying-focus",f.style.transitionDuration=f.style.WebkitTransitionDuration=
"0.15s",c.appendChild(f));I=x.getBoundingClientRect();n=I.top+(r.pageYOffset||t.scrollTop||c.scrollTop)-(t.clientTop||c.clientTop)||0;I=I.left+(r.pageXOffset||t.scrollLeft||c.scrollLeft)-(t.clientLeft||c.clientLeft)||0;f.style.left=I+"px";f.style.top=n+"px";f.style.width=x.offsetWidth+"px";f.style.height=x.offsetHeight+"px";!F&&42>Date.now()-e&&(a(),x.classList.add("flying-focus_target"),f.classList.add("flying-focus_visible"),h=x,g=setTimeout(a,150))}},!0);t.addEventListener("blur",function(){a()},
!0)})();
function showLoading(a){var f=$(a),g=f.append('<div class="loading loading-pending">').find(".loading"),h={top:$(window).scrollTop(),left:0},e=f[0]&&f[0].scrollHeight>f.outerHeight()?f[0].scrollHeight:f.outerHeight();g.css(h).height(e).width(f.outerWidth());setTimeout(function(){$(a).find("div.loading-pending").fadeIn(200,function(){$(this).removeClass("loading-pending").attr("aria-label",$.i18n.prop("registration.common.loading")).attr("aria-live","assertive").attr("aria-busy","true")})},150)}
function hideLoading(a){$(a).find("div.loading").fadeOut(200,function(){$(this).remove()})}var getViewportWidth=function(){return window.innerWidth||(document.body?document.body.offsetWidth:0)},getViewportHeight=function(){return window.innerHeight||(document.body?document.body.offsetHeight:0)};(function(a){a.fn.disabled=function(a){this.toggleClass("disabled",a);a?this.attr("disabled","disabled"):this.removeAttr("disabled")};a.fn.disabledhidden=function(a){this.toggleClass("visuallyhidden",a);this.disabled(a)}})(jQuery);
if(navigator.appVersion.match(/Safari.534/))$("body").on("focus",".select2-focusser",function(a){var f=$(this).closest(".select2-container");f.toggle(!1);_.defer(function(){f.toggle(!0)})});var mode,gridLayout,multiTermCollectionArray=[],blockCollectionArray=[],tabletWidth=1025,phoneWidth=767;window.tables=[];
var CREDIT_HOUR_MIN="0",CREDIT_HOUR_MAX="9999999.999",COURSE_NUM_MIN="0",COURSE_NUM_MAX="99999",clickEvent="ontouchstart"in document.documentElement?"touchstart":"click",globalNavOriginal,defaultImage=$("meta[name=menuBaseURL]").attr("content").match("/[^/]*")+"/assets/_defaultAvatar.png",direction=$.i18n.prop("default.language.direction"),STORAGE="xe.unique.session.storage.id",now=Date.now(),random=Math.random().toString(36).substr(2,5),stored=sessionStorage.getItem(STORAGE);
stored||sessionStorage.setItem(STORAGE,random+now);
var stored=sessionStorage.getItem(STORAGE),setCalendarHeight=_.debounce(function(a){a=$("#scheduleCalView,#scheduleListViewWrapper,#newSummaryInfo").filter(":visible");var f=a.position();if(f){var g=a.closest(".ui-layout-pane"),f=f.top,g=g.height()-f;parseFloat(a.css("width"));parseFloat(a.parent().css("width"));395>$("#calendar").width()?$("#calendar").fullCalendar("changeView","basicWeek"):$("#calendar").fullCalendar("changeView","agendaWeek");$("#calendar").fullCalendar("option","height",g);$("#scheduleListView, #scheduleListViewWrapper").height(g);
$("#newSummaryInfo div:first").height(g-$("#findclasses-summary-footer").outerHeight())}},100),convertBottomToSinglePanel=_.throttle(function(){2==$("#scheduleListTabs >ul >li").size()&&($("#scheduleListTabs").tabs("add","#newSummaryInfo",$(".summaryIcon").html(),3),$("#scheduleListTabs").tabs("select",2),$("#scheduleListTabs > ul > li:last a").attr("id","newSummaryInfoLink"),$("#scheduleListTabs > ul > li:last a span").addClass("newSummaryIcon"),$(".mySchedule.mySchedule-summary").appendTo($("#newSummaryInfo")),
$("#findclasses-summary-footer").appendTo($("#newSummaryInfo")),$(".tuition-link").appendTo($(".schedule-list-view-title")));$("#inner-center").layout().hide("east");$(".mySchedule.mySchedule-summary").removeClass("ui-layout-east");$(".mySchedule.mySchedule-summary").show();$("#scheduleListTabs").addClass("center-tabs")},300),convertBottomToSplitPanel=_.throttle(function(a){3==$("#scheduleListTabs >ul >li").size()&&($(".mySchedule.mySchedule-summary").appendTo($("#summaryInfo")),$("#findclasses-summary-footer").appendTo($("#summaryInfo")),
$(".tuition-link").appendTo($(".findclasses-summary-title")),$("#scheduleListTabs").tabs("destroy").tabs(),$("#scheduleListTabs").tabs("remove",2),a&&($("#inner-center").layout().show("east"),$(".mySchedule.mySchedule-summary").addClass("ui-layout-east"),$(".mySchedule.mySchedule-summary").show()),$("#scheduleListTabs").removeClass("center-tabs"))},300);
function isTruncated(a){var f=a.clone().css({display:"inline",width:"auto",visibility:"hidden"}).appendTo("body");a=f.width()>a.width();f.remove();return a}function destroyLayout(a){(a=$(a).layout())&&a.destroy()}
function addTooltipForLongFields(a,f){a=$(a);!a.attr("title")&&isTruncated(a)&&a.attr("title",a.text()).tooltip({content:function(){var a=$(this),f=a.data("longtooltip");f||(f=$("<div>"+a.html()+"</div>"),a.find("[title]").removeAttr("title"),f.find("[title]").each(function(a,f){a="SPAN"==f.nodeName?"SPAN":"div";$(f).after("<"+a+">"+f.title+"<br/></"+a+">").removeAttr("title")}),f=f.html(),a.data("longtooltip",f));return f},tooltipClass:f||"",position:"ltr"===direction?"right":"left"})}
function addErrorTooltip(a){a=$(a);a.attr("title")||a.attr("title",a.text()).tooltip({content:function(){var a=$(this),g=a.data("errortooltip");g||(g=$("<div>"+a.html()+"</div>"),a.find("[title]").removeAttr("title"),g.find("[title]").each(function(a,e){a="SPAN"==e.nodeName?"SPAN":"div";$(e).after("<"+a+">"+e.title+"<br/></"+a+">").removeAttr("title")}),g=g.html(),a.data("errortooltip",g));return g},tooltipClass:"error"})}
function resizeSearchTermsPane(){var a=Math.max($("#results-terms").height(),searchResultsCriteriaSize);$("#results-terms").closest(".ui-layout-container").layout().sizePane("north",a)}
var multiTabLayout={name:"multiTabLayout",resizeWithWindow:!0,resizerDragOpacity:.5,south__size:"46%",center__size:"46%",north__minSize:30,spacing_open:10,spacing_closed:10,contentSelector:".ui-widget-content",center__onresize:function(a,f,g){$.layout.callbacks.resizeTabLayout.apply(this,arguments)},south__onresize:function(a,f,g){$.layout.callbacks.resizeTabLayout.apply(this,arguments);setCalendarHeight(arguments[2])},west__onresize:function(){$.layout.callbacks.resizeTabLayout.apply(this,arguments)},
north__onresize:function(){$.layout.callbacks.resizeTabLayout.apply(this,arguments)}},multiSouthTabLayout={name:"multiSouthTabLayout",resizeWithWindow:!0,resizable:!1,slidable:!1,closable:!1,spacing_open:0,spacing_closed:0,contentSelector:".ui-widget-content",center__onresize:function(){$.layout.callbacks.resizeTabLayout.apply(this,arguments);setCalendarHeight(arguments[2])}},searchResultsCriteriaSize=40,searchResultsLayoutOptions={name:"searchResultsLayoutOptions",resizeWithWindow:!0,north__size:searchResultsCriteriaSize,
center__size:"auto",resizable:!1,slidable:!1,closable:!1,spacing_open:0,spacing_closed:0,center__onresize:function(a,f){$.layout.callbacks.resizeTabLayout.apply(this,arguments);setCalendarHeight(arguments[2])}},innerNorthLayoutOptions={name:"innerNorthPanelLayout",resizeWithWindow:!0,center__size:"auto",spacing_open:0,spacing_closed:0,center__onresize:function(a,f){$.layout.callbacks.resizeTabLayout.apply(this,arguments)}},tabLayoutOptions={name:"tabLayout",resizeWithWindow:!0,resizerDragOpacity:.5,
center__size:"auto",spacing_open:0,spacing_closed:0,contentSelector:".ui-widget-content",center__onresize:function(){$.layout.callbacks.resizeTabLayout.apply(this,arguments);setCalendarHeight(arguments[2])}};
function bindToggleButtons(a,f){function g(c){var e=60;$(".btnToggleSouth, .btnToggleNorth").toggleClass("depressed",!1);60>=a.state.north.size&&(e=.46*a.container.innerHeight());getViewportWidth()>phoneWidth?l("north",e,a):a.close("north");$(".btnToggleNorth").toggleClass("depressed",60>=e);$(".panels button").removeClass("down").addClass("up");c.stopPropagation()}function h(c){$target=$(c.target);$(".btnToggleSouth, .btnToggleNorth").toggleClass("depressed",!1);c=getViewportWidth()>phoneWidth?a.state.north.size>=
a.container.innerHeight()-60:1==a.state.center.innerHeight&&1==a.state.center.layoutHeight;c?getViewportWidth()>phoneWidth?l("north",.46*a.container.innerHeight(),a):a.close("north"):(l("north",9999,a),$(".btnToggleSouth").toggleClass("depressed",!0));$(".panels button").hasClass("down")?$(".panels button").removeClass("down").addClass("up"):$(".panels button").removeClass("up").addClass("down")}function e(a){$(".btnToggleWest, .btnToggleEast").toggleClass("depressed",!1);"rtl"!=$.i18n.prop("default.language.direction")?
60>f.state.east.size||f.state.east.isClosed?l("east",.5*f.container.innerWidth(),f):(f.close("east"),$(".btnToggleEast").toggleClass("depressed",!0)):60>f.state.west.size||f.state.west.isClosed?l("west",.5*f.container.innerWidth(),f):(f.close("west"),$(".btnToggleEast").toggleClass("depressed",!0));a.stopPropagation()}function r(a){$target=$(a.target);$(".btnToggleEast, .btnToggleWest").toggleClass("depressed",!1);"rtl"!=$.i18n.prop("default.language.direction")?(a=f.state.east.size>=f.container.innerWidth()-
60)?l("east",.5*f.container.innerWidth(),f):(l("east",9999,f),$(".btnToggleWest").toggleClass("depressed",!0)):(a=f.state.west.size>=f.container.innerWidth()-60)?l("west",.5*f.container.innerWidth(),f):(l("west",9999,f),$(".btnToggleWest").toggleClass("depressed",!0))}function l(c,e,f){f.sizePane(c,e);f.open(c);a&&a.resizeAll()}if(a){var t=a.togglers.north;t&&(t.add(".btnToggleNorth,.btnToggleSouth",t).unbind("click"),t.find(".btnToggleNorth").click(g),t.find(".btnToggleSouth").click(h));$(".btnToggleNorth").attr("title",
$.i18n.prop("js.layout.toggleNorth"));$(".btnToggleSouth").attr("title",$.i18n.prop("js.layout.toggleSouth"))}f&&(t="rtl"==$.i18n.prop("default.language.direction")?f.togglers.west:f.togglers.east)&&(t.add(".btnToggleEast,.btnToggleWest",t).unbind("click"),t.find(".btnToggleEast").click(e),t.find(".btnToggleWest").click(r),$(".btnToggleWest").attr("title",$.i18n.prop("js.layout.toggleWest")),$(".btnToggleEast").attr("title",$.i18n.prop("js.layout.toggleEast")));$(".resetEastWest").on("click",function(a){a&&
(a.preventDefault(),a.stopPropagation());"rtl"!=$.i18n.prop("default.language.direction")?l("east",.5*f.container.innerWidth(),f):l("west",.5*f.container.innerWidth(),f)}).attr("title",$.i18n.prop("js.layout.resetLayout"));$(".resetNorthSouth").on("click",function(c){c&&(c.preventDefault(),c.stopPropagation());getViewportWidth()>phoneWidth?l("north",.46*a.container.innerHeight(),a):a.close("north")}).attr("title",$.i18n.prop("js.layout.resetLayout"));$(".ui-layout-resizer").attr("title",$.i18n.prop("js.layout.resizePanels"));
return function(c){getViewportWidth()>phoneWidth?l("north",northDefaultSize,a):$(".btnToggleNorth").trigger("click");$(".btnToggleSouth, .btnToggleNorth").toggleClass("depressed",!1)}}
var southToggleButtons='<div class="btnToggleWest"></div><div class="resetEastWest btnPanelReset"></div><div class="btnToggleEast"></div>',northToggleButtons='<div class="btnToggleNorth"></div><div class="resetNorthSouth btnPanelReset"></div><div class="btnToggleSouth"></div>',northDefaultSize="55%",eastDefaultSize="50%",togglerOpenClass="ui-toggler-open ui-toggler",togglerClosedClass="ui-toggler-closed ui-toggler";function addClass(a,f){return $("<div>").append($(f).addClass(a)).html()}
var twoTogglerSize=75,twoTogglerSize=twoTogglerSize+38,northCenterLayoutOptions={name:"northCenterLayout",resizeWithWindow:!0,resizeWithWindowDelay:250,resizable:!1,slidable:!1,closable:!1,north__paneSelector:"#inner-north",center__paneSelector:"#inner-center",south__paneSelector:"#inner-south",north__closable:!0,north__resizable:!0,north__slideable:!0,north__size:"55%",center__size:"37%",south__size:40,north__minSize:0,resizerDragOpacity:.5,spacing_open:12,spacing_closed:12,south__spacing_open:0,
south__spacing_closed:0,north__togglerLength_closed:twoTogglerSize,north__togglerLength_open:twoTogglerSize,north__togglerContent_open:addClass(togglerOpenClass,northToggleButtons),center__onresize:function(){$.layout.callbacks.resizeTabLayout.apply(this,arguments)},north__onresize:function(){$.layout.callbacks.resizeTabLayout.apply(this,arguments)}},lookupScheduleLayoutOptions=_.extend({},northCenterLayoutOptions,{name:"lookupScheduleLayout",spacing_open:12,spacing_closed:12,north__paneSelector:"#lookupSchedule",
center__paneSelector:"#lookupSchedule-calendar",south__togglerLength_closed:twoTogglerSize,south__togglerLength_open:twoTogglerSize,south__togglerContent_closed:addClass(togglerClosedClass,northToggleButtons),south__togglerContent_open:addClass(togglerOpenClass,northToggleButtons),center__onresize:function(){$.layout.callbacks.resizeTabLayout.apply(this,arguments);setCalendarHeight(arguments[2])}}),scpScheduleLayoutOptions=_.extend({},northCenterLayoutOptions,{name:"scpScheduleLayout",spacing_open:12,
spacing_closed:12,north__paneSelector:"#scpSchedule",center__paneSelector:"#scp-calendar",south__togglerLength_closed:twoTogglerSize,south__togglerLength_open:twoTogglerSize,south__togglerContent_closed:addClass(togglerClosedClass,northToggleButtons),south__togglerContent_open:addClass(togglerOpenClass,northToggleButtons)});
function infoIconTooltip(a,f){var g=_.defaults({},f,{delay:0,fixPNG:!0,tooltipClass:"arrow_box",position:"top",offset:10});$(a).each(function(){if(this.title){var a;a=g.iconcss?g.iconcss:"info-icon";$(this).append("<span tabindex='0'  class='"+a+"'/>").find("."+a).attr("title",this.title).tooltip(g);this.title=""}})}var ajaxDefer=$.Deferred().resolve();
function setupAccessibilityFeatures(){$("#header").prepend("<div id='skiptocontent'><a href='#content'>"+$.i18n.prop("registration.common.skipLink")+"</a></div>");document.location.hash&&$(document.location.hash).attr("tabindex",-1).on("blur focusout",function(){$(this).removeAttr("tabindex")}).focus();$(window).bind("hashchange",function(){var a="#"+window.location.hash.replace(/^#/,"");"#"!=a&&$(a).attr("tabindex",-1).on("blur focusout",function(){$(this).removeAttr("tabindex")}).focus()})}
$(document).ready(function(){function a(a){$("#courseAccordion > #courseDetailsHeaders > h3").removeClass("selected");a&&$(a).addClass("selected")}$("html").attr("dir","ltr"==$.i18n.prop("default.language.direction")?"ltr":"rtl");setupAccessibilityFeatures();$(document).ajaxStart(function(){ajaxDefer=$.Deferred()}).ajaxStop(function(){ajaxDefer.resolve()});$("#tutorial").hide();_.delay(function(){$("#signOutText,.notification-center-anchor").attr("tabindex","0").keydown(function(a){if(13==a.keyCode||
32==a.keyCode)a.preventDefault(),a.stopPropagation(),$(a.target).click()})},500);_.delay(function(){fixGlobalNav()},500);$("#register a,#registrationHistory a,#worksheetPlanner a, #preRegActivities a").live("click",function(a){a.preventDefault();window.location=null==CommonContext.user?$(this).attr("data-login"):$(this).attr("data-endpoint")});null==CommonContext.user&&($("#saveButton").disabled(!0),$("#signIn").remove());$("#curriculumInfo a").live("click",function(){return!1});if(window.bootstraps){$("#advanced-search-fields").hide();
$("#advanced-search-link").live("click",toggleAdvancedSearch);$("#search-clear").live("click",function(a){a.preventDefault();$("#search-fields :input").not(".select2-input").not(":disabled").each(function(){$(this).hasClass("combo2")&&$(this).select2("data")?$(this).select2("data",null):$(this).is(":checkbox")?$(this).attr("checked",!1):this.value=""});$("#search-fields .search-input:first")});var f=function(a){a.preventDefault();a={};var f={};prepareSearchTerms(a,f,!1);a.txt_term=$("#txt_term").attr("listofsearchterms");
a.startDatepicker=$("#startDatepicker").length?$("#startDatepicker").val():"";a.endDatepicker=$("#endDatepicker").length?$("#endDatepicker").val():"";a.uniqueSessionId=stored;$(".form-end-controls button").hasClass("section-search")?(sectionResultsCollection.dataMap=a,sectionResultsCollection.searchString=f,sectionResultsCollection.fetch(),window.sectionSearchResultsView||(window.sectionSearchResultsView=new SectionSearchResultsView({el:$("#searchResultsTable")}))):$(".form-end-controls button").hasClass("course-search")&&
(courseResultsCollection.dataMap=a,courseResultsCollection.searchString=f,courseResultsCollection.fetch(),window.courseSearchResultsView||(window.courseSearchResultsView=new CourseSearchResultsView({el:$("#searchResultsTable")})));window.bootstraps.displayStudyPath&&$(".messages").text(window.bootstraps.studyPathMessage);_.each($(".combo2"),function(a){$(a).select2("container").tooltip("close")});$("#search").hide();$("#searchResults").show().attr("aria-expanded","true").layout();gridLayout=$("#grid").layout(searchResultsLayoutOptions);
$("#content").layout().resizeAll()};$("#search-go").live("click",f);$("#search-fields").on("keydown","input",function(a){13==a.which&&($(".freeform").tooltip("close"),f(a))});window.bootstraps.lookupScheduleConfig||(setupBindings(),setupSearchDaysOfTheWeek());$("#txt_credithourlow").numeric({negative:!1});$("#txt_credithourhigh").numeric({negative:!1});$("#txt_durationunit_value").numeric({negative:!1});$(".freeform").tooltip({position:"rtl"==$.i18n.prop("default.language.direction")?"left":"right"});
$("#search-fields .search-input:first");$(document).click(function(){$("#emailSendBtn").unbind();$("#emailFrm").fadeOut()});$("#emailFrm").click(function(a){a.stopPropagation()});$("#emailFrm").hide();$("a#email-button").live("click",function(a){a.preventDefault();$("#emailFrm").fadeToggle();emailView.options.url=$(this).attr("data-link");emailView.render();$("#emailFrm").find("input:first").focus();return!1});$("a#email-button").live("keydown",function(a){if(13==a.keyCode)return $("a#email-button").click(),
a.preventDefault()});window.EmailView=Backbone.View.extend({initialize:function(){_.bindAll(this)},events:{"click #emailSendBtn":"sendEmail",keydown:"keyAction"},keyAction:function(a){27==(a.keyCode||a.which)&&($(document).click(),$("a#email-button").focus())},render:function(){this.scp=!1;var a=$("#userIdentityText").text()+" ";$(".term-desc").text()?a+=$(".term-desc").text():$("#lookupFilter").is(":visible")&&$("#lookupFilter option:selected").text()?a+=$("#lookupFilter option:selected").text():
$("#scpFilter").is(":visible")&&$("#scpFilter option:selected").text()&&(a+=$("#scpFilter option:selected").text(),this.scp=!0);$(".subject-header").val(a);return this},sendEmail:function(){var a=!0,f=[],e={};$("#emailFrm :input").not("button").not(".subject-header").each(function(){var e=$(this),l="";$(this).is(":checkbox")?$(this).is(":checked")&&(l=$(this)[0].value):l=$(this)[0].value;l&&""!=l&&(isValidEmailAddress(l)?(e.removeClass("autoCompleteError"),f.push(l)):(a=!1,e.addClass("autoCompleteError")))});
0<f.length&&5>=f.length&&(e.listOfEmails=f.join(","));e.subject=$(".subject-header").val();e.scp=this.scp;a&&0<_.size(e)&&5>=_.size(e)&&$.ajax({url:this.options.url,data:e,dataType:"json",complete:function(a){$("#emailFrm :input").not("button").each(function(){$(this).is(":checkbox")?$(this).attr("checked",!0):this.value=""});$("#emailFrm").fadeOut();$("#emailSendBtn").unbind()}})}});window.emailView=new EmailView({el:$("#emailFrm")});$("a#print-button").live("click",function(){window.open($(this).attr("data-link"),
"Print","width=800, height=810, toolbar=yes, menubar=yes");return!1});$(".course-details-link").live("click",function(f){f.preventDefault();f.stopPropagation();var h=$(this);f={};var e=$(this).attr("data-attributes").split(",");f.term=e[0];f.subjectCode=e[1];f.courseNumber=e[2];$("#courseAccordion").attr("term",f.term).attr("subjectCode",f.subjectCode).attr("courseNumber",f.courseNumber);var r=$("#courseDetailsWrapper");r.dialog({dialogClass:"course-details-dialog",open:function(e,f){e.preventDefault();
e.stopPropagation();var c=$("#courseDetailsContentDetailsDiv");e=$("#courseAccordion #courseDetailsHeaders > h3:first");var g=$("#courseAccordion #courseDetailsHeaders > h3:first > a");g.focus();a(e);$(this).siblings(".ui-dialog-buttonpane").find("button").addClass("primary-button small-button");c.load(e.attr("data-endpoint"),{term:$("#courseAccordion").attr("term"),subjectCode:$("#courseAccordion").attr("subjectCode"),courseNumber:$("#courseAccordion").attr("courseNumber"),first:"first"},function(a,
e,f){a=[$.trim($("#courseDetailsContentDetailsDiv > #subjectCode").html()),$.trim($("#courseDetailsContentDetailsDiv > #courseNumber").html()),$.trim($("#courseDetailsContentDetailsDiv > #courseTitle").html())];r.dialog("option","title",$.i18n.prop("registration.courseSearchResults.courseDetails.subject-coursenumber-title",a));$(".subtitleterm").text($("#courseAccordion").attr("term"));_.delay(function(){c.click();g.focus()},500)});$(this).parent().css({"overflow-y":"auto"});getViewportWidth()<=phoneWidth&&
(e.after(c),$(this).parent().css({height:"90%"}));$(this).parent().attr("aria-hidden",!1)},close:function(a,e){$(this).parent().attr("aria-hidden",!0);$("#courseDetailsContentDiv").append($("#courseDetailsContentDetailsDiv"));$("#courseDetailsContentDetailsDiv, #ui-dialog-title-courseDetailsWrapper").empty();h.focus()},modal:!0,buttons:[{text:$.i18n.prop("registration.common.close"),click:function(){$(this).dialog("close")}}],position:{my:"center top",at:"center top",offset:"0 35",collision:"none none"},
minWidth:620});$("#closeButton").click(function(){r.dialog("close")})});$("#courseAccordion > #courseDetailsHeaders > h3").live("click",function(f,h){h=$(this);f.preventDefault();f.stopPropagation();a(this);var e=$("#courseDetailsContentDetailsDiv");e.append('<div class="loading loading-pending">');e.find("div.loading-pending").fadeIn(200,function(){$(this).removeClass("loading-pending")});e.load(h.attr("data-endpoint"),{term:$("#courseAccordion").attr("term"),subjectCode:$("#courseAccordion").attr("subjectCode"),
courseNumber:$("#courseAccordion").attr("courseNumber")},function(a,f,g){e.find("div.loading").fadeOut(200,function(){$(this).remove()})});getViewportWidth()<=phoneWidth&&h.after(e)});$(".navbar-toggle").on("click",function(a){$(".tab-buttons-div").toggleClass("enabled");$("#contentDiv").on("click",function(a){$(".navbar-toggle").is(":visible")&&$(".tab-buttons-div").hasClass("enabled")&&($(".tab-buttons-div").toggleClass("enabled"),$("#contentDiv").off("click"))})})}else $("#landing-paths").focus(),
window.landingConfig&&setupLandingPageConfig()});function setupLandingPageConfig(){var a=$(".menu-container");_.each(window.landingConfig.landingPageConfig,function(f){var g=a.find("."+f.config);g.find("a span.title").prepend(document.createTextNode(f.title));g.appendTo($("#landingPathMenu"))});a.empty()}function getURLParameter(a){return decodeURIComponent(((new RegExp("[?|&]"+a+"=([^&;]+?)(&|#|;|$)")).exec(location.search)||[,""])[1].replace(/\+/g,"%20"))||null}
function setupEmailLink(a,f){return"<a class='email' href='mailto:"+f+"'>"+a+"</a>"}function setupInstructorPopupLink(a,f,g){return'<a class="email" aria-haspopup="true" data-index="'+f+'" href="'+(g?"mailto:"+g:"#")+'">'+a+"</a>"}
function buildMeetingTimePillBox(a,f){f.meetingTime&&a.pillbox({sunday:{enabled:!0,highlight:f.meetingTime.sunday},monday:{enabled:!0,highlight:f.meetingTime.monday},tuesday:{enabled:!0,highlight:f.meetingTime.tuesday},wednesday:{enabled:!0,highlight:f.meetingTime.wednesday},thursday:{enabled:!0,highlight:f.meetingTime.thursday},friday:{enabled:!0,highlight:f.meetingTime.friday},saturday:{enabled:!0,highlight:f.meetingTime.saturday}});a.removeAttr("tabindex")}
function getFormattedMeetingTime(a){if(a){var f=a.substr(0,2),g=" "+$.i18n.prop("default.time.am");12==parseInt($.i18n.prop("js.date.time.format"))?12==f?g=" "+$.i18n.prop("default.time.pm"):12<f&&(f-=12,g=" "+$.i18n.prop("default.time.pm")):g="";return $.i18n.prop("js.searchResults.time.format",["<span>"+zerofill(f)+"</span>","<span>"+a.substr(2)+"</span>",g]).trim()}return""}
var scrollToFirstEvent=_.debounce(function(){var a=topOf(".fc-event:visible");null!=a&&$(".fc-event").closest("[style*=overflow-y]").stop().animate({scrollTop:a})},100);
function markupStatusRow(a,f,g){"Y"==g.removeIndicator&&"N"!=g.recordStatus&&($(f).addClass("schedule-class-removed"),$(f).find("td").not("[data-property='actionItem']").each(function(a,e){$(e).addClass("schedule-class-removed")}),$(f).find("[data-property='status']").addClass("removedEventList"));"N"==g.recordStatus&&($(f).addClass("schedule-class-pending"),$(f).find("[data-property='status']").addClass("pendingEventList"));"F"==g.errorFlag?($(f).addClass("notification-error"),$(f).find("[data-property='status']").data("errortooltip",
_.pluck(g.crnErrors,"message").join("<br/>"))):$(f).find("[data-property='status']").wrapInner('<span class="list-view-status"></span>')}function bindChange(a){a.bind("change",function(a){a.makeDirty();$("#saveButton").disabled(!1)})}
function setupCourseDetailsLink(a){var f="<a class='section-details-link' aria-haspopup='true' href='#' data-endpoint='"+$("#getSectionCatalogDetails").attr("data-endpoint")+"' data-attributes='"+a.term+","+a.courseReferenceNumber+"'>"+escapeHTML(a.courseTitle)+"</a>";a.scheduleTypeDescription&&a.showScheduleType&&(f+="<br/><span>"+a.scheduleTypeDescription+"</span>");return f}
function setupCourseDetailsLinkOnCourseSearchResults(a){return"<a class='course-details-link' href='#' aria-haspopup='true' data-endpoint='"+$("#getCourseCatalogDetails").attr("data-endpoint")+"' data-attributes=\""+$("#txt_term").attr("listofsearchterms")+","+(a.subjectCode?_.escape(a.subjectCode):_.escape(a.subject))+","+_.escape(a.courseNumber)+'">'+escapeHTML(a.courseTitle)+"</a>"}
function setupActionDropDown(a){var f=window.bootstraps.displayStudyPath&&-1<window.bootstraps.studyPathsOnHold.indexOf(a.studyPathKeySequence),g=a.selectedAction?a.selectedAction:"",h="<select "+(f?"disabled":"")+" data-property='selectedAction' data-term='"+a.term+"' data-courseReferenceNumber='"+a.courseReferenceNumber+"' class='actionDdl' id='action-"+a.courseReferenceNumber+"-ddl'>";_.each(a.registrationActions,function(a){h+="<option role='option' value='"+a.courseRegistrationStatus+"'"+(a.courseRegistrationStatus==
g?" selected ":"")+">"+a.description+"</option>"});return h+="</select>"}
function setupStudyPathDropDown(a){var f="<select "+(window.bootstraps.displayStudyPath&&-1<window.bootstraps.studyPathsOnHold.indexOf(a.studyPathKeySequence)?"disabled":"")+" data-property='selectedStudyPath' data-term='"+a.term+"' data-courseReferenceNumber='"+a.courseReferenceNumber+"' class='actionDdl' id='studyPath-"+a.courseReferenceNumber+"-ddl'>";_.each(a.registrationStudyPaths,function(a){f+="<option role='option' value='"+a.keySequenceNumber+"'>"+a.description+"</option>"});return f+="</select>"}
function setupAdminViewStudyPathDropDown(a){var f="<select "+(a.editAllowedForStudyPath&&0<a.registrationStudyPaths.length?"":"disabled")+" class='actionDdl' data-property='selectedStudyPath' id='admin-study-path-"+a.id+"' data-id='"+a.id+"'>";_.each(a.registrationStudyPaths,function(g){f+="<option role='option' "+(a.studyPathKeySequence==g.keySequenceNumber?" selected ":"")+"  value='"+g.keySequenceNumber+"'>"+g.description+"</option>"});return f+="</select>"}
function setupAdminViewGradingModeDropDown(a){var f="<select "+(a.editAllowedForStudyPath?"":"disabled")+" class='actionDdl' data-property='selectedGradingMode' id='admin-grade-mode-"+a.id+"' data-id='"+a.id+"'>";a.gradingMode&&(f+="<option role='option' selected  value='"+a.gradingMode+"'>"+a.gradingMode+" "+a.gradingModeDescription+"</option>");_.each(a.registrationGradingModes,function(g){a.gradingMode!=g.gradingMode&&(f+="<option role='option' value='"+g.gradingMode+"'>"+g.description+"</option>")});
return f+="</select>"}function setupAdminViewLevelDropDown(a){var f="<select "+(a.editAllowedForStudyPath?"":"disabled")+" class='actionDdl' data-property='selectedLevel' id='admin-level-"+a.id+"' data-id='"+a.id+"'>";a.level&&(f+="<option role='option' selected  value='"+a.level+"'>"+a.level+" "+a.levelDescription+"</option>");_.each(a.registrationLevels,function(g){a.level==g.level&&a.level||(f+="<option role='option' value='"+g.level+"'>"+g.description+"</option>")});return f+="</select>"}
function setupAdminActionDropDown(a){var f=a.selectedAction?a.selectedAction:"",g="<select "+(a.editAllowedForStudyPath?"":"disabled")+" class='actionDdl' data-property='selectedAction' id='admin-action-"+a.id+"' data-id='"+a.id+"' >",h;_.each(a.registrationActions,function(a){a.subActions&&0<a.subActions.length?(g+="<optgroup class='calculated-drop-label' label='"+a.description.substring(3,a.description.length)+"'>",a.subActions[0].courseRegistrationStatus&&"CALC_DROP_NOT_DEFINED"==a.subActions[0].courseRegistrationStatus?
_.each(a.subActions,function(a){g+="<option role='option' value='"+a.courseRegistrationStatus+"' disabled"+(a.courseRegistrationStatus==f?" selected ":"")+">"+$.i18n.prop("registration.registrationStatus.calcDropDidNotCalculate")+"</option>"}):_.each(a.subActions,function(r){h=a.description.substring(3,a.description.length)+" "+r.description;g+="<option role='option' label='"+h+"' value='"+r.courseRegistrationStatus+"'"+(r.courseRegistrationStatus==f?" selected ":"")+">"+r.description+"</option>"}),
g+="</optgroup>"):g+="<option role='option' value='"+a.courseRegistrationStatus+"'"+(a.courseRegistrationStatus==f?" selected ":"")+">"+a.description+"</option>"});return g+="</select>"}
function setupAdminOverrideDropDown(a){var f="<select class='actionDdl' data-property='selectedOverride' id='admin-override-"+a.id+"' data-id='"+a.id+"' >";0<a.registrationOverrides.length&&a.editAllowedForStudyPath?_.each(a.registrationOverrides,function(a){f+="<option role='option' value='"+a.override+"'>"+a.description+"</option>"}):f="<select disabled class='actionDdl' data-property='selectedOverride'  '>";return f+="</select>"}
function getEditableTypeDef(a,f){return _.extend({},a,{onblur:function(a,f){$("form",this).submit()},placeholder:""})}function getRegistrationLevels(a){var f={};_.each(a,function(a){f[a.level]=a.description});return f}function getRegistrationGradingModes(a){var f={};_.each(a,function(a){f[a.gradingMode]=a.description});return f}function getRegistrationCreditHours(a){var f={};f[a.creditHourLow]=a.creditHourLow;f[a.creditHourHigh]=a.creditHourHigh;return f}
function getRegistrationStudyPaths(a){var f={};_.each(a,function(a){f[a.keySequenceNumber]=a.description});return f}
var creditHourEditable={type:"new_autocomplete",condition:function(a,f,g){if(g.creditHours.creditHourIndicator&&"undefined"!==typeof g.creditHours.creditHourHigh&&null!==g.creditHours.creditHourHigh&&"undefined"!==typeof g.creditHours.creditHourLow&&null!==g.creditHours.creditHourLow)return"OR"==g.creditHours.creditHourIndicator?a.editable.data=getRegistrationCreditHours(g.creditHours):(a.editable.high=g.creditHours.creditHourHigh,a.editable.low=g.creditHours.creditHourLow,a.editable.label=$.i18n.prop("registration.myschedule.creditHourRange",
[a.editable.low,a.editable.high])),this.$el.find("th").filter('[data-property="'+f.attr("data-property")+'"]').addClass("editableFix"),f.addClass("editable").attr("role","composite").attr("aria-readonly","false"),"new_autocomplete"}},gradingModeEditable={type:"new_autocomplete",condition:function(a,f,g){if(1<g.registrationGradingModes.length)return a.editable.data=getRegistrationGradingModes(g.registrationGradingModes),f.addClass("editable").attr("role","composite").attr("aria-readonly","false"),
this.$el.find("th").filter('[data-property="'+f.attr("data-property")+'"]').addClass("editableFix"),"new_autocomplete"}},levelEditable={type:"new_autocomplete",condition:function(a,f,g){if(1<g.registrationLevels.length)return a.editable.data=getRegistrationLevels(g.registrationLevels),f.addClass("editable").attr("role","composite").attr("aria-readonly","false"),this.$el.find("th").filter('[data-property="'+f.attr("data-property")+'"]').addClass("editableFix"),"new_autocomplete"}},studyPathEditable=
{type:"new_autocomplete",condition:function(a,f,g){if(1<g.registrationStudyPaths.length)return a.editable.data=getRegistrationStudyPaths(g.registrationStudyPaths),f.addClass("editable").attr("role","composite").attr("aria-readonly","false"),this.$el.find("th").filter('[data-property="'+f.attr("data-property")+'"]').addClass("editableFix"),"new_autocomplete"}};function registrationCreditHoursRender(a){return a.creditHour}function subjectRender(a){return a.subjectDescription}
function subjectDescriptionRender(a){return a.subjectDescription}function courseDescriptionRender(a){return a.courseDescription}function subjectCourseSectionNumberRender(a){return a.courseReferenceNumber?$.i18n.prop("registration.common.subject_course_section",[a.subject?a.subject:"",a.courseNumber?a.courseNumber:"",a.sequenceNumber?a.sequenceNumber:""]):$.i18n.prop("registration.common.subject_course_section_course",[a.subject?a.subject:"",a.courseNumber?a.courseNumber:""])}
function planSubjectCourseSectionNumberRender(a){return a.courseReferenceNumber?$.i18n.prop("registration.common.subject_course_section",[a.subject?a.subject:"",a.courseNumber?a.courseNumber:"",a.section?a.section:""]):$.i18n.prop("registration.common.subject_course_section_course",[a.subject?a.subject:"",a.courseNumber?a.courseNumber:""])}function courseTitleRender(a){return a.courseReferenceNumber?a.courseTitle?setupCourseDetailsLink(a):"":courseTitleOnCourseSearchResultsRender(a)}
function sectionSearchResultsCourseTitleRender(a){return a.courseReferenceNumber?(window.bootstraps.sectionSearchResultsConfigs&&_.find(window.bootstraps.sectionSearchResultsConfigs,function(a){return"scheduleType"==a.config})&&(a.showScheduleType=!0),a.courseTitle?setupCourseDetailsLink(a):""):courseTitleOnCourseSearchResultsRender(a)}
function creditHoursRender(a){return null!=a.creditHours?a.creditHours:null!=a.creditHourIndicator&&null!=a.creditHourHigh&&null!=a.creditHourLow?a.creditHourLow+" "+a.creditHourIndicator+" "+a.creditHourHigh:null!=a.creditHourLow?a.creditHourLow:null!=a.creditHourHigh?a.creditHourHigh:null!=a.totalCreditHours?a.totalCreditHours:""}function partOfTermRender(a){return a.partOfTermDescription}function gradingModeRender(a){return a.gradingModeDescription}
function levelRender(a){return a.levelDescription}function studyPathRender(a){return a.studyPathName?a.studyPathName:$.i18n.prop("default.none")}function messageRender(a){return a.courseRegistrationStatusDescription+a.registrationStatusDate.toString()}function scheduleTypeRender(a){return a.scheduleDescription}function registrationDateRender(a){return a.registrationStatusDate}function registrationStatusRender(a){return a.statusDescription}function termRender(a){return a.termDesc}
function campusRender(a){return a.campusDescription}function instructorRender(a){var f="";_.each(a.faculty,function(a,h){f+=setupInstructorPopupLink(a.displayName,h,a.emailAddress)+" "+(a.primaryIndicator?$.i18n.prop("registration.searchResults.primary"):"")+" <br/>"});return f}
function formatMeetingTimes(a,f,g,h,e){var r=$("<div></div>"),l=0;_.each(g,function(g){if(h&&g.faculty){var c=$("<div class='meeting-faculty'>");e&&0==g.faculty.length?c.append("<span><label>"+$.i18n.prop("registration.common.instructor")+":</label>"+$.i18n.prop("registration.searchResults.meeting.instructor.notAvailable")+"</span>"):_.each(g.faculty,function(a){c.append("<span class='meeting-faculty-member tooltip-row'><label>"+$.i18n.prop("registration.common.instructor")+": </label><span>"+(a.emailAddress?
setupEmailLink(a.displayName,a.emailAddress):e?setupEmailLink(a.displayName,"#"):a.displayName)+"</span> "+(a.primaryIndicator?"<span class='faculty-primary-indicator'>"+$.i18n.prop("registration.searchResults.primary")+"</span>":"")+"</div>");c.find("a.email").last().attr("data-index",l);l++});r.append($("<div>").append(c).html())}var n=$("<div class='meeting'>"),I=$("<div id='"+a+"."+f+"div'></div>");buildMeetingTimePillBox(I,g);n.append(I);g.meetingTime&&(e?buildMeetingTimeTemplateForDetailsAccordion(n,
g.meetingTime):buildMeetingTimesTemplate(n,g.meetingTime));r.append(n)});e&&(1<g.length?r.find(".meeting-faculty").each(function(a,c){0==a?($(c).addClass("expanded"),$(c).next(".meeting").addClass("expanded")):$(c).addClass("collapsed")}):$(r.find(".meeting")[0]).addClass("expanded"));return r}
buildMeetingTimesTemplate=function(a,f){a.append("<span>"+getFormattedMeetingTime(f.beginTime)+" - "+getFormattedMeetingTime(f.endTime)+"</span>");f.meetingTypeDescription&&a.append("<span class='tooltip-row'> <span>"+$.i18n.prop("registration.searchResults.meeting.type")+":&nbsp;</span>"+f.meetingTypeDescription+"</span>");a.append("<span class='tooltip-row'> <span>"+$.i18n.prop("registration.searchResults.meeting.building")+": </span>"+(f.buildingDescription?f.buildingDescription:$.i18n.prop("default.none"))+
"</span>");a.append("<span class='tooltip-row'> <span>"+$.i18n.prop("registration.searchResults.meeting.room")+": </span>"+(f.room?f.room:$.i18n.prop("default.none"))+"</span>");a.append("<span class='tooltip-row'> <span>"+$.i18n.prop("registration.common.startDate")+": </span>"+(f.startDate?f.startDate:"")+"</span>");a.append("<span class='tooltip-row'> <span>"+$.i18n.prop("registration.common.endDate")+": </span>"+(f.endDate?f.endDate:"")+"</span>")};
buildMeetingTimeTemplateForDetailsAccordion=function(a,f){var g=$("<div></div>"),h=$('<div class="left"></div>'),e=$('<div class="right"></div>');g.append(h).append(e);$(a).find(".ui-pillbox").appendTo(h);f.startDate&&f.endDate&&h.append('<div class="dates">'+f.startDate+" - "+f.endDate+"</div>");f.meetingTypeDescription&&h.append("<div>"+$.i18n.prop("registration.searchResults.meeting.type")+":&nbsp;"+f.meetingTypeDescription+"</div>");f.beginTime&&f.endTime&&e.append("<div>"+getFormattedMeetingTime(f.beginTime)+
" - "+getFormattedMeetingTime(f.endTime)+"</div>");h=[];f.campusDescription?h.push($.i18n.prop("registration.searchResults.campus.header",[f.campusDescription])):!1;f.buildingDescription?h.push(f.buildingDescription):!1;f.room?h.push($.i18n.prop("registration.searchResults.accordion.meeting.room",[f.room])):!1;e.append("<div>"+h.join(" | ")+"</div>");a.append(g)};function meetingTimeRender(a){return formatMeetingTimes(a.term,a.courseReferenceNumber,a.meetingsFaculty,!1).html()}
function statusRender(a){var f;"Y"==window.bootstraps.enrollmentDisplaySettings.enrollmentDisplay?a.crossList?0>=a.crossListAvailable?(f="<div class='status-full'> <span class='status-bold '>"+$.i18n.prop("registration.searchResults.status.full")+"</span>"+$.i18n.prop("registration.searchResults.status.fullSeatsRemain",[0,a.crossListCapacity])+"</span></div>","Y"==window.bootstraps.enrollmentDisplaySettings.waitlistDisplay&&0<a.waitCapacity&&(f+="<div class='status-waitlist'> <span class='status-bold'>"+
a.waitAvailable+"</span> "+$.i18n.prop("registration.searchResults.status.partialWaitlistSeatsRemain",[a.waitCapacity])+"</div>")):0<a.seatsAvailable?(f="<span class='status-bold'>"+a.seatsAvailable+"</span> "+$.i18n.prop("registration.searchResults.status.partialSeatsRemain",[a.maximumEnrollment])+"<br/>","Y"==window.bootstraps.enrollmentDisplaySettings.waitlistDisplay&&0<a.waitCapacity&&(f+="<div class='status-waitlist'> <span class='status-bold'>"+a.waitAvailable+"</span> "+$.i18n.prop("registration.searchResults.status.partialWaitlistSeatsRemain",
[a.waitCapacity])+"</div>",a.seatsAvailable<=a.waitCount&&(f+="<div class='status-waitlist'> <span class='status-bold '>"+$.i18n.prop("registration.searchResults.status.waitListExists")+"</span></div>"))):(f="<div class='status-full'> <span class='status-bold '>"+$.i18n.prop("registration.searchResults.status.full")+"</span>"+$.i18n.prop("registration.searchResults.status.fullSeatsRemain",[0,a.maximumEnrollment])+"</span></div>","Y"==window.bootstraps.enrollmentDisplaySettings.waitlistDisplay&&0<
a.waitCapacity&&(f+="<div class='status-waitlist'> <span class='status-bold'>"+a.waitAvailable+"</span> "+$.i18n.prop("registration.searchResults.status.partialWaitlistSeatsRemain",[a.waitCapacity])+"</div>")):0>=a.seatsAvailable?(f="<div class='status-full'> <span class='status-bold '>"+$.i18n.prop("registration.searchResults.status.full")+"</span>"+$.i18n.prop("registration.searchResults.status.fullSeatsRemain",[0,a.maximumEnrollment])+"</div>","Y"==window.bootstraps.enrollmentDisplaySettings.waitlistDisplay&&
0<a.waitCapacity&&(f+="<div class='status-waitlist'> <span class='status-bold'>"+a.waitAvailable+"</span> "+$.i18n.prop("registration.searchResults.status.partialWaitlistSeatsRemain",[a.waitCapacity])+"</div>")):(f="<span class='status-bold'>"+a.seatsAvailable+"</span> "+$.i18n.prop("registration.searchResults.status.partialSeatsRemain",[a.maximumEnrollment])+"<br/>","Y"==window.bootstraps.enrollmentDisplaySettings.waitlistDisplay&&0<a.waitCapacity&&(f+="<span class='status-bold'>"+a.waitAvailable+
"</span> "+$.i18n.prop("registration.searchResults.status.partialWaitlistSeatsRemain",[a.waitCapacity]),a.seatsAvailable<=a.waitCount&&(f+="<div class='status-waitlist'> <span class='status-bold '>"+$.i18n.prop("registration.searchResults.status.waitListExists")+"</span></div>"))):a.crossList?0>=a.crossListAvailable?(f="<div class='status-full'> <span class='status-bold '>"+$.i18n.prop("registration.searchResults.status.full")+"</span></div>","Y"==window.bootstraps.enrollmentDisplaySettings.waitlistDisplay&&
0<a.waitCapacity&&0<a.waitAvailable&&(f+="<div class='status-waitlist'> <span class='status-bold'>"+$.i18n.prop("registration.searchResults.status.partialWaitlistSeatsRemainStatement")+"</span></div>")):0<a.seatsAvailable?(f="<span class='status-bold'></span> "+$.i18n.prop("registration.searchResults.status.partialSeatsRemainStatement")+"</span><br/>","Y"==window.bootstraps.enrollmentDisplaySettings.waitlistDisplay&&0<a.waitCapacity&&0<a.waitAvailable&&(f+="<div class='status-waitlist'> <span class='status-bold'></span> "+
$.i18n.prop("registration.searchResults.status.partialWaitlistSeatsRemainStatement")+"</div>",a.seatsAvailable<=a.waitCount&&(f+="<div class='status-waitlist'> <span class='status-bold '>"+$.i18n.prop("registration.searchResults.status.waitListExists")+"</span></div>"))):(f="<div class='status-full'> <span class='status-bold '>"+$.i18n.prop("registration.searchResults.status.full")+"</span></div>","Y"==window.bootstraps.enrollmentDisplaySettings.waitlistDisplay&&0<a.waitCapacity&&0<a.waitAvailable&&
(f+="<div class='status-waitlist'> <span class='status-bold'>"+$.i18n.prop("registration.searchResults.status.partialWaitlistSeatsRemainStatement")+"</span></div>")):0>=a.seatsAvailable?(f="<div class='status-full'> <span class='status-bold '>"+$.i18n.prop("registration.searchResults.status.full")+"</span></div>","Y"==window.bootstraps.enrollmentDisplaySettings.waitlistDisplay&&0<a.waitCapacity&&0<a.waitAvailable&&(f+="<div class='status-waitlist'> <span class='status-bold'>"+$.i18n.prop("registration.searchResults.status.partialWaitlistSeatsRemainStatement")+
"</span></div>")):(f="<span class='status-bold '>"+$.i18n.prop("registration.searchResults.status.partialSeatsRemainStatement")+"</span><br/>","Y"==window.bootstraps.enrollmentDisplaySettings.waitlistDisplay&&0<a.waitCapacity&&0<a.waitAvailable&&(f+="<span class='status-bold'>"+$.i18n.prop("registration.searchResults.status.partialWaitlistSeatsRemainStatement"),a.seatsAvailable<=a.waitCount&&(f+="<div class='status-waitlist'> <span class='status-bold '>"+$.i18n.prop("registration.searchResults.status.waitListExists")+
"</span></div>")));a.status&&a.status.authorizationRequired&&a.partOfTerm&&window.bootstraps&&"plan"!==window.bootstraps.mode&&(f+="<div class='status-add-authorization'><span class='status-bold '>"+$.i18n.prop("registration.searchResults.status.addAuthorization")+"</span></div>");a.status&&a.status.timeConflict&&"search"!=mode&&(f+="<span class='time-conflict'>"+$.i18n.prop("registration.searchResults.timeConflict")+"</span>");a.status&&!a.status.restricted&&"search"!=mode&&(f+="<span class='restriction'>"+
$.i18n.prop("registration.searchResults.restriction")+"</span>");a.isSectionLinked&&0<$("#accordion > #classDetailsHeaders > #linked").length&&(f+="<div class='status-linked' title='"+$.i18n.prop("registration.searchResults.status.linked.helpText")+"'> <a href='#' class='status-bold '>"+$.i18n.prop("registration.searchResults.status.linked")+"</a></div>");return f}
function reservedSeatsRender(a){var f="";null!=a.reservedSeatSummary&&(f+="<span class='status-bold'>"+a.reservedSeatSummary.seatsAvailableUnreserved+"</span> <span>"+$.i18n.prop("registration.searchResults.reservedSeats.unreserved",[a.reservedSeatSummary.maximumEnrollmentUnreserved])+"</span> <br/>",0<a.reservedSeatSummary.waitCapacityUnreserved&&"Y"==window.bootstraps.enrollmentDisplaySettings.waitlistDisplay&&(f+="<span class='status-bold'>"+a.reservedSeatSummary.waitAvailableUnreserved+"</span> <span>"+
$.i18n.prop("registration.searchResults.reservedSeats.unreserved.waitlist",[a.reservedSeatSummary.waitCapacityUnreserved])+"</span> <br/>"),f+="<span class='status-bold'>"+a.reservedSeatSummary.seatsAvailableReserved+"</span> <span>"+$.i18n.prop("registration.searchResults.reservedSeats.reserved",[a.reservedSeatSummary.maximumEnrollmentReserved])+"</span> <br/>",0<a.reservedSeatSummary.waitCapacityReserved&&"Y"==window.bootstraps.enrollmentDisplaySettings.waitlistDisplay&&(f+="<span class='status-bold'>"+
a.reservedSeatSummary.waitAvailableReserved+"</span> <span>"+$.i18n.prop("registration.searchResults.reservedSeats.reserved.waitlist",[a.reservedSeatSummary.waitCapacityReserved])+"</span> <br/>"));return f}
function attributeRender(a){var f="";_.each(a.sectionAttributes,function(a){if(a.isZTCAttribute){var h=$.i18n.prop("ZeroTextbookCostProgramIcon.tooltip.message");f+="<span class='ZTCImage'><img src='"+window.bootstraps.ztcEncodedImage+"' alt='"+h+"' title='"+h+"'></span>"}f+="<span>"+a.description+"</span><br><br>"});return f}function courseTitleOnCourseSearchResultsRender(a){return a.courseTitle&&"null"!==a.courseTitle?setupCourseDetailsLinkOnCourseSearchResults(a):""}
function getRegistrationEvents(a,f,g){f=f?f:$("#getRegistrationEvents").attr("data-endpoint");a={termFilter:a};g?a.crn=g:null;$.ajax({url:f,data:a,dataType:"json",success:function(a){resetRegistrationEvents(a,g)}})}
function resetRegistrationEvents(a,f){(_.isNull(f)||_.isUndefined(f)||!f)&&sessionStorage.setItem("classScheduleEvents","[]");f=JSON.parse(sessionStorage.getItem("classScheduleEvents"));!_.isEmpty(f)||a?$.merge(f,a):0<f.length?$.merge(f,window.bootstraps.registrationEvents):f=window.bootstraps.registrationEvents?window.bootstraps.registrationEvents:[];sessionStorage.setItem("classScheduleEvents",JSON.stringify(f));$("#calendar").fullCalendar("refetchEvents")}
function updateValue(a,f,g,h,e,r){var l;""===g&&(g=null);if(e=a.get(r))"studyPath"==f?(l="selectedStudyPath",f="studyPathKeySequence"):l="selected"+f.charAt(0).toUpperCase()+f.slice(1),r={},r[f]=g,r[l]=g,"creditHour"==f?(e&&e.get(f)!=g&&(e.set(r),a.url=$("#saveButton").attr("data-summary-endpoint")),l=g):("null"===g&&(g=null),e&&e.get(f)!=g&&(e.get(l),e.set(r),a.url=$("#saveButton").attr("data-summary-endpoint")),l=h.data[g]);return l}
function getAppUrl(){var a=$("meta[name=menuBaseURL]").attr("content")||document.location.href;return a.substring(0,a.indexOf("/ssb"))}
(function(a){function f(e,c,f){c.low>e||c.high<e?a(f).addClass("error"):a(f).removeClass("error");return e}function g(){if(a.fn.numeric){var e=a.fn.numeric.keyup;a.fn.numeric.keyup=function(c){var f=a.data(this,"numeric.decimal"),g=this.value.indexOf(f);e.apply(this,[c]);0==g&&this.value.match(/0\./)&&a.fn.setSelection(this,this.value.indexOf(f)+1)}}else setTimeout(g,200)}a.editable.addInputType("label_number",{element:function(e,c){e.numberOptions=a.extend({negative:!1,decimal:a.i18n.prop("js.number.decimal")},
e.numberOptions);c="<label for='"+e.name+"'>"+e.label+"</label>";var f=a(e.element||"<input type='text'/>");a(this).append(f);a(this).append("<br>");a(this).append(c);a(f).numeric(e.numberOptions);return f},submit:function(e,c){var f=a("input",this);return!1===e.validate(f.val(),e,c)?!1:!0}});a.editable.addInputType("select_autocomplete",{element:function(e,c){e=a("<select />").addClass("myschedule-select");a(this).append(e);return e},content:function(e,c,f){if(String==e.constructor)eval("var json = "+
e);else var g=e;for(var h in g)g.hasOwnProperty(h)&&"selected"!=h&&(e=a("<option />").val(h).append(g[h]),_.isNumber(g[h])||g[h].replace(/ /g,"")!=a.trim(f.revert).replace(/ /g,"")?h==a(f).data("originalValue")&&e.attr("selected","selected"):e.attr("selected","selected"),a("select",this).append(e));a("select",this).children().each(function(){a(this).val()!=g.selected&&a(this).text()!=a.trim(f.revert)&&"selected"!=a(this).attr("selected")||a(this).attr("selected","selected")});a("select",this).select2({minimumResultsForSearch:10,
blurOnChange:!0,dropdownAutoWidth:!0}).on("select2-blur",function(c){a(this).closest("form").submit()}).addClass("editable-select2")}});var h=a.editable.types.label_number,e=a.extend({},h,{element:function(a,c){a.validate=a.validate||f;return h.element.call(this,a,c)}}),r=a.editable.types.select_autocomplete,l=a.extend({},r,{element:function(a,c){return r.element.call(this,a,c)}});a.editable.addInputType("numeric_range",e);a.editable.addInputType("new_autocomplete",l);g();a("input[placeholder], textarea[placeholder]").placeholder()})(jQuery);
var openMoreDetails=_.once(function(){$(".more-details-link:first").trigger("click")});resizeSearchResults=_.debounce(function(){fluidDialog();fixGlobalNav()},400);$(document).on("dialogopen",".ui-dialog",function(a,f){fluidDialog()});
$(document).ready(function(){$(window).bind("resize orientationchange",resizeSearchResults);EventDispatcher.addEventListener(Application.events.initialized,function(){window.registrationInitErrors&&window.registrationInitErrors.notification&&0<window.registrationInitErrors.notification.length&&_.each(window.registrationInitErrors.notification,function(a){var f=new Notification({message:a.message,type:a.type});f.addPromptAction($.i18n.prop("js.notification.ok"),function(){notifications.remove(f)});
notifications.addNotification(f)})});$(document.body).removeAttr("role");$("#header").wrapAll("<header></header>");$("#outerFooter").wrapAll("<footer></footer>")});var lazySearchResultsHandler=_.debounce(function(a){getViewportWidth()>phoneWidth&&$(window).trigger("resize")},400);
function respGridSetup(a){a.removeData();try{delete a[0].footable}catch(f){a[0].footable=void 0}a.hasClass("footable")?a.footable({reuse:!0,delay:400}):(a.addClass("footable"),a.footable({delay:400}));a.attr("role","grid");a.on("footable_resizing",function(){$(this).removeClass("grid")});a.on("footable_resized",function(){$(this).addClass("grid")});setTimeout(function(){$(window).trigger("resize")},200)}STORAGE="xe.unique.session.storage.id";now=Date.now();
random=Math.random().toString(36).substr(2,5);(stored=sessionStorage.getItem(STORAGE))||sessionStorage.setItem(STORAGE,random+now);stored=sessionStorage.getItem(STORAGE);
function isValidEmailAddress(a){return(new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i)).test(a)}
function zerofill(a){a="00"+a;return a.substring(Math.max(a.length-2,0))}function topOf(a){function f(a){return(a=$(a).position())?a.top:null}return f(_.min($(a),f))}
function setupCalendarView(){var a=$.i18n.prop("default.gregorian.amPm").toLowerCase().split(",");$.fullCalendar.dateFormatters.tt=function(f){return 12>f.getHours()?a[0]:a[1]};$("#calendar").fullCalendar({header:{left:"",center:"",right:""},defaultView:"agendaWeek",allDaySlot:!1,editable:!1,columnFormat:{agendaWeek:"dddd",basicWeek:"ddd"},timeFormat:{basicWeek:"h:mm{-h:mm}"},firstDay:parseInt($.i18n.prop("default.firstDayOfTheWeek")),dayNames:$.i18n.prop("default.gregorian.dayNames").split(","),
dayNamesShort:$.i18n.prop("default.gregorian.dayNamesShort").split(","),monthNames:$.i18n.prop("default.gregorian.monthNames").split(","),monthNamesShort:$.i18n.prop("default.gregorian.monthNamesShort").split(","),axisFormat:$.i18n.prop("events.row.time.format"),isRTL:"rtl"==$.i18n.prop("default.language.direction"),events:function(a,g,h){a=JSON.parse(sessionStorage.getItem("classScheduleEvents"));h(a)},eventRender:function(a,g,h){"agendaWeek"==h.name?(h={},h.term=a.term,h.courseReferenceNumber=a.crn,
h.courseTitle=a.title,$(".fc-event-title",g).text(""),$(".fc-event-title",g).html(setupCourseDetailsLink(h))):(h={},h.term=a.term,h.courseReferenceNumber=a.crn,h.courseTitle=a.subject+" "+a.courseNumber,$(".fc-event-time").show(),$(".fc-event-title",g).text(""),$(".fc-event-title",g).html("<br>"+setupCourseDetailsLink(h)))},eventAfterRender:function(a,g,h){a=$(g);g=a.width();"agendaWeek"==h.name?(h=Math.max(g+6,g/.95),a.hasClass("pendingEvent")?h:h++):h=h.getColWidth();a.css("width",h);"rtl"==$.i18n.prop("default.language.direction")&&
(h=a.position().left,a.css("left",h-20),$(".fc-agenda-days .fc-col0").css("border-left-width",""));addTooltipForLongFields(a,a.closest(".fc-event").hasClass("errorEvent")?"error":null);scrollToFirstEvent()},eventAfterAllRender:function(a){$("#calendar table.fc-agenda-days ").attr("dir",($.i18n.prop("default.language.direction"),"ltr"));"rtl"==$.i18n.prop("default.language.direction")&&($(".fc-agenda-gutter.fc-widget-header.fc-last").removeClass("fc-last").addClass("fc-fake-last"),$(".fc-agenda-axis.fc-widget-header.fc-first").removeClass("fc-first").addClass("fc-fake-first"),
$(".fc-agenda-gutter.fc-widget-header.fc-fake-last").removeClass("fc-fake-last").addClass("fc-first-rtl"),$(".fc-agenda-axis.fc-widget-header.fc-fake-first").removeClass("fc-fake-first").addClass("fc-last-rtl"))}})}
function setupBindings(){_.each($(".combo2"),function(a){var f=!0;"undefined"!=typeof $(a).attr("data-allowmultiple")&&(f="true"==$(a).attr("data-allowMultiple"));$(a).select2({multiple:f,allowClear:!0,dropdownAutoWidth:!0,tokenSeparators:[","," "],closeOnSelect:!0,openOnEnter:!1,escapeMarkup:function(a){return a},formatSearching:function(){return $.i18n.prop("registration.termSelect.searching")},ajax:{url:$(a).attr("data-endpoint"),getMore:$(a).hasClass("page")?!0:!1,dataType:"json",quietMillis:500,
data:function(a,e){return{searchTerm:a,term:$("#txt_term").attr("listofsearchterms"),startDatepicker:$("#startDatepicker").val(),endDatepicker:$("#endDatepicker").val(),offset:e,max:10,uniqueSessionId:stored}},results:function(f,e){e=!1;e=this.getMore?!(0==f.length||10>f.length):!1;var g=[];$.each(f,function(a,e){g.push({id:e.code,text:_.unescape(e.description)})});$(a).trigger("select2-loaded",f.length);return{results:g,more:e}}},formatNoMatches:function(a){return $.i18n.prop("registration.termSelect.noMatches")},
initSelection:function(a,e){a.val()&&a.attr("data-init-text")&&(a={id:a.val(),text:a.attr("data-init-text")},e(a))},formatResult:formatResult});var g=!1;$(a).next("span").text()?(g=!0,$(a).select2("container").attr("data-instructions",$(a).next("span").text()).attr("role","listbox")):$(a).select2("container").attr("data-instructions",$.i18n.prop("registration.classSearch.field.autocomplete.select.tooltip")).attr("role","listbox");$(a).on("select2-focus",function(){if(0<$(this).select2("container").find(".select2-search-choice").length||
g)$(a).select2("container").attr("data-tooltip")||($(a).select2("container").attr("data-tooltip",!0),$(a).select2("container").tooltip({content:function(){return $(this).attr("data-instructions")},position:"rtl"==$.i18n.prop("default.language.direction")?"left":"right"}).unbind("focus.tooltip mouseenter.tooltip blur.tooltip mouseleave.tooltip")),$(a).select2("container").tooltip("open",{})}).on("select2-blur",function(){$(a).select2("container").tooltip("close")}).on("change",function(f){$(a).select2("container").find(".select2-search-choice a").attr("tabindex",
"-1")});$(a).on("select2-open",function(a){$("#select2-drop-undermask").remove()});$(a).on("select2-close",function(a){}).on("select2-loaded",function(a){$(this).select2("positionDropdown")})});$("input.select2-input").attr("tabindex",0)}function formatResult(a){return"<div id='"+a.id+"'>"+a.text+"</div>"}
function fluidDialog(){$(".ui-dialog:visible").each(function(){var a=$(this),f=a.find(".ui-dialog-content").data("dialog");if(f){var g=a.find("#accordion").length?"#class":"#course";$(window).width()<f.options.minWidth?(a.css("min-width","95%"),a.css("max-width","95%")):a.css("min-width",f.options.minWidth);var h=$(g+"DetailsContentDetailsDiv"),e=$(g+"DetailsHeaders > h3.selected");f.option("position",f.options.position);getViewportWidth()<=phoneWidth?(e.after(h),a.css({height:"90%"})):($(g+"DetailsContentDiv").append($(g+
"DetailsContentDetailsDiv")),a.css({height:"auto"}));getViewportHeight()<f.element.height()?a.css({height:"90%"}):a.css({height:"auto"})}})}function removeGridFocus(){window.setTimeout(function(){$("body").click().focus()},0)}
function setupSearchDaysOfTheWeek(){if(0<$("#search-meeting").length){for(var a=parseInt($.i18n.prop("default.firstDayOfTheWeek")),f=$.i18n.prop("default.gregorian.dayNames").split(","),g={},h=[],e=0;7>e;e++){var r=(e+a)%7;h.push({name:f[r],dow:r})}g.weekConfig=h;$("#search-meeting").html(ich.weekConfig(g))}}function isAdvancedSearchOpen(){return $("#advanced-search-link").hasClass("open")}
function toggleAdvancedSearch(a,f){"object"==typeof a?a.preventDefault():"";a=1==a||0==a?a:!$("#advanced-search-link").hasClass("open");f=f?f:400;var g=$(".form-end-controls"),h=g.position().top,e=$("#search-fields-container"),r=e.height();$("#advanced-search-link").toggleClass("open",a);g.toggleClass("fixed-at-bottom",a);e.toggleClass("scrollable",a);$("#advanced-search-fields").toggle(a);var l=g.position().top,t=e.position().top,c=e.height();g.css({position:"absolute",top:h}).animate({top:l},f,
function(){g.css({position:"",top:""})});e.toggleClass("scrollable",!0);e.css({position:"absolute",top:t,height:r}).animate({height:c},f,function(){e.css({position:"",top:"",bottom:"",left:"",right:"",height:""});e.toggleClass("scrollable",a)})}
function prepareSearchTerms(a,f,g){$("#search-fields :input").not(".select2-input").each(function(){if($(this).hasClass("combo2")&&$(this).select2("data")&&0<$(this).select2("val").length){a[$(this)[0].id]=$(this).select2("val");var h="";"object"==typeof $(this).select2("val")?(_.each($(this).select2("data"),function(a){h+=a.text+", "}),h=h.slice(0,-2)):h+=$(this).select2("data").text;f[$(this)[0].id]=h}else{var e,h=null;$(this).is(":checkbox")?($(this).is(":checked")&&(e=!0),h=$.i18n.prop("default.boolean.true")):
$(this).is("select")?(e=escapeHTML($(this)[0].value))&&(h=escapeHTML($("option:selected",this).text())):e=escapeHTML($(this)[0].value);"undefined"===typeof e&&(e="");""!=e&&(g||(g=/[\*\^\'\!\@\$\#\&\?\[\]\(\)\|]/g.test(e)),"string"===typeof e&&(e=encodeURIComponent(e.replace(/[\*\^\'\!\@\$\#\&\?\[\]\(\)\|]/g,""))),a[$(this)[0].id]=e,f[$(this)[0].id]=_.isNull(h)?e:h)}});_.has(a,"txt_credithourhigh")&&!_.has(a,"txt_credithourlow")&&(a.txt_credithourlow=f.txt_credithourlow=CREDIT_HOUR_MIN);!_.has(a,
"txt_credithourhigh")&&_.has(a,"txt_credithourlow")&&(a.txt_credithourhigh=f.txt_credithourhigh=CREDIT_HOUR_MAX)}
function setupPanelsButton(a,f){a||0!=f.length?!a&&0<f.length&&$(".panels button").removeClass("down").addClass("up"):($(".btnToggleSouth").trigger("click"),_.delay(function(){$(".panelsHelp").stop(!0,!0).fadeIn(500,function(){})},2500));$("#panelsHelpClose").live("click",function(){$(".panelsHelp").fadeOut()}).live("keypress",function(a){if(13==a.keyCode)return $("#panelsHelpClose").click(),a.preventDefault()});$(".panels button").live("click",function(){$(".btnToggleSouth").trigger("click")})}
function split(a){return a.split(/,\s*/)}function extractLast(a){return split(a).pop()}
function addListOfCrns(a,f,g,h){$.ajax({url:a,type:"POST",data:f,dataType:"JSON",beforeSend:function(){$("body").toggleClass("waiting")},success:function(a){var h=_.filter(a.aaData,function(c){return c.model&&null!=c.model.partOfTerm&&c.success&&0==a.anyAuthorizationRequired.length||c.model&&null!=c.model.partOfTerm&&c.success&&0<a.anyAuthorizationRequired.length&&-1==a.anyAuthorizationRequired.indexOf(c.model.courseReferenceNumber)});_.each(h,function(a){window[g].unshift(a.model,{silent:!0}).makeDirty();
window[g].url=$("#saveButton").attr("data-registration-endpoint");$("#saveButton").disabled(!1)});h=_.filter(a.aaData,function(a){return!a.success});_.each(h,function(a){a=a.message?$.i18n.prop("registration.addCRN.badSection",[a.courseReferenceNumber,a.message]):$.i18n.prop("registration.directCRNEntry.badCRN",[a.term,a.courseReferenceNumber]);var c=new Notification({message:a,type:"error",model:null,attribute:"",component:$("#txt_crn1")});c.addPromptAction($.i18n.prop("js.notification.ok"),function(){notifications.remove(c)});
notifications.addNotification(c)});h=new $.Deferred;if(0<a.anyOLR.length){var l=new TempOLRTRegsCollection;l.reset();$(".olrPopup").unbind();window.olrPopupView.options.dataMap=f;var t=_.filter(a.aaData,function(a){return a.model&&null==a.model.partOfTerm&&a.success});_.each(t,function(a){l.unshift(a.model)});var c=[];0<l.length&&(l=l.sort(),_.each(l.models,function(a){c.push(a.attributes.courseReferenceNumber)}));window.olrPopupView.options.dataMap.crnList=c.join(",");window.olrPopupView.$el=$(".olrPopup");
window.olrPopupView.el=$(".olrPopup")[0];window.olrPopupView.options.collection=l;window.olrPopupView.olrPopupDeferred=h;window.olrPopupView.render()}else h.resolve();h.promise().then(function(){delete f.cancel;if(0<a.anyAuthorizationRequired.length){var c=new TempAddAuthorizationTRegsCollection;c.reset();$(".addAuthorizationPopup").unbind();window.addAuthorizationPopupView.options.dataMap=f;var g=_.filter(a.aaData,function(c){return c.model&&c.success&&-1!==a.anyAuthorizationRequired.indexOf(c.model.courseReferenceNumber)});
_.each(g,function(a){c.unshift(a.model)});var h=[];0<c.length&&(c=c.sort(),_.each(c.models,function(a){h.push(a.attributes.courseReferenceNumber)}));window.addAuthorizationPopupView.options.dataMap.crnList=h.join(",");window.addAuthorizationPopupView.$el=$(".addAuthorizationPopup");window.addAuthorizationPopupView.el=$(".addAuthorizationPopup")[0];window.addAuthorizationPopupView.options.collection=c;window.addAuthorizationPopupView.render()}})},error:function(a,f,g){notifications.addNotification(new Notification({message:a.message,
type:"error",flash:!1,model:null,attribute:""}))},complete:function(){$("body").toggleClass("waiting");$("#crns").empty();h&&h(!0)}})}
function instructorPopupSetup(a,f,g){var h=$(f);-1!==f.indexOf("tabPanel")&&(h=$(f).closest(".tabPanel"));var e=new ProfileCard({container:h,useOffset:!1,checkBoundaries:!1});a.$el.find("td[data-property=instructor] > a.email").on("click",function(f){f&&(f.preventDefault(),f.stopPropagation());e.show(this);showLoading($(".profileCard"));f=a.collection.get($(this).closest("td").attr("data-id"));var h=$(this).attr("data-index")||0,t={};t.bannerId=f.get(g)[h].bannerId;t.termCode=f.get("term");e.retrieveData(t,
this)})}
function fixGlobalNav(){$(".notification-center-label > span").text($.i18n.prop("js.notification.label"));$("button.user-menu-button").remove();$(".globalnav-list").before("<button class='user-menu-button'></button>");$("ul.globalnav-list > li:not(:last-child)").show();var a=getViewportWidth();a<tabletWidth?($("ul.globalnav-list > li:not(:last-child)").hide(),$(".notification-center-label > span").text("")):a>tabletWidth&&($("ul.globalnav-list > li:not(:last-child)").removeClass("vertical"),$("ul.globalnav-list > li:last-child").removeClass("vertical-absolute"),
$("ul.globalnav-list").removeClass("vertical-list"));0<window.notificationCenter.model.length&&window.notificationCenter.notificationCenterFlyout.display();$("button.user-menu-button").on("click",function(){var a=$(this);$("ul.globalnav-list > li:not(:last-child)").toggle().toggleClass("vertical");$("ul.globalnav-list > li:last-child").toggleClass("vertical-absolute");$("ul.globalnav-list").toggleClass("vertical-list");var g=$(".vertical-absolute").position();g?a.css({position:"absolute",top:g.top+
"px",left:g.left-24+"px"}):(a.removeAttr("style"),a.css({position:"",top:"",left:""}),a.removeClass("user-menu-button"),window.setTimeout(function(){a.addClass("user-menu-button")},0))});window.onpageshow=function(a){a.persisted&&(document.body.style.display="none",location.reload())}}
$(".courseSectionHeaders h3 a").live("keyup",function(a){var f="rtl"==$.i18n.prop("default.language.direction")?-1:1;40==a.keyCode&&detailsPopupNavigation(".courseSectionHeaders h3:visible",1);38==a.keyCode&&detailsPopupNavigation(".courseSectionHeaders h3:visible",-1);39==a.keyCode&&detailsPopupNavigation(".courseSectionHeaders h3:visible",f);37==a.keyCode&&detailsPopupNavigation(".courseSectionHeaders h3:visible",-1*f)});
var detailsPopupNavigation=function(a,f){var g=$(a);a=$(a+".selected:visible").index()+f;a>=g.length&&(a=0);0>a&&(a=g.length-1);g.eq(a).click().find("a").focus()};function enableOrDisableRegistrationTabs(a,f){$("#tabbuttons > li a").each(function(g){0<=$.inArray($(this).attr("id"),f)&&$tabs.tabs(a?"enable":"disable",g)})}function getTabIndexById(a){var f=0;$("#tabbuttons > li a").each(function(g,h){$(h).attr("id")===a&&(f=g)});return f}
function findFirstEnabledTabIndex(){var a=0;$("#tabbuttons > li").each(function(f,g){if(!$(g).hasClass("ui-state-disabled"))return a=f,!1});return a};